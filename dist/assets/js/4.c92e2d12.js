(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{392:function(t,e,i){},436:function(t,e,i){},437:function(t,e,i){var n,r;i(107),i(438),i(94),i(174),i(100),i(176),i(67),i(46),i(368),i(101),i(369),i(71),i(370),i(371),i(440),i(372),i(104),i(175),i(110),i(99),i(102),i(9),i(337),i(30),i(96),i(68),i(177),i(95),i(182);var o=i(373),s=i(374),a=i(376),l=i(377),h=i(347);!function(o,s){"object"==h(e)&&void 0!==t?t.exports=s():void 0===(r="function"==typeof(n=s)?n.call(e,i,e,t):n)||(t.exports=r)}(0,(function(){"use strict";var t="change",e=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}(),i=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();function n(t,e){return t>e?1:t<e?-1:0}function r(){}var h="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,r=arguments.length;n<r;++n){var o=arguments[n];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])}return i};function u(t){for(var e in t)delete t[e]}var c,p=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),f=function(t){function e(e){var i=t.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return p(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);-1===n.indexOf(e)&&n.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new i(t):t,n=e.type;e.target||(e.target=this.eventTarget_||this);var o,s=this.listeners_&&this.listeners_[n];if(s){var a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,l[n]=0),++a[n];for(var h=0,u=s.length;h<u;++h)if(!1===(o="handleEvent"in s[h]?s[h].handleEvent(e):s[h].call(this,e))||e.propagationStopped){o=!1;break}if(--a[n],0===a[n]){var c=l[n];for(delete l[n];c--;)this.removeEventListener(n,r);delete a[n]}return o}},e.prototype.disposeInternal=function(){this.listeners_&&u(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var i=this.listeners_&&this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=r,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},e}(e);function d(){return function(){throw new Error("Unimplemented abstract method.")}()}var g=0;function y(t){return t.ol_uid||(t.ol_uid=String(++g))}var _,v=(_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),m=function(e){function i(t,i,n){var r=e.call(this)||this,o=n||{};return r.tileCoord=t,r.state=i,r.interimTile=null,r.hifi=!0,r.key="",r.transition_=void 0===o.transition?250:o.transition,r.transitionStarts_={},r}return v(i,e),i.prototype.changed=function(){this.dispatchEvent(t)},i.prototype.release=function(){},i.prototype.getKey=function(){return this.key+"/"+this.tileCoord},i.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},i.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},i.prototype.getTileCoord=function(){return this.tileCoord},i.prototype.getState=function(){return this.state},i.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},i.prototype.load=function(){d()},i.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n,r=e-i+1e3/60;return r>=this.transition_?1:(n=r/this.transition_,Math.pow(n,3))},i.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},i.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},i}(f),M="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",x=(M.indexOf("firefox"),-1!==M.indexOf("safari")&&M.indexOf("chrom"),-1!==M.indexOf("webkit")&&M.indexOf("edge"),M.indexOf("macintosh"),"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope),T="undefined"!=typeof Image&&Image.prototype.decode;function I(t,e,i){var n=i&&i.length?i.shift():x?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}!function(){try{var t=Object.defineProperty({},"passive",{get:function(){!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(t){}}();var w,C,D=(C=function(t,e){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}C(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),O=function(e){function i(t,i,n,r){var o=e.call(this)||this;return o.extent=t,o.pixelRatio_=n,o.resolution=i,o.state=r,o}return D(i,e),i.prototype.changed=function(){this.dispatchEvent(t)},i.prototype.getExtent=function(){return this.extent},i.prototype.getImage=function(){return d()},i.prototype.getPixelRatio=function(){return this.pixelRatio_},i.prototype.getResolution=function(){return this.resolution},i.prototype.getState=function(){return this.state},i.prototype.load=function(){d()},i}(f),j="top-left",S=(w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),N=function(t){function e(e){var i=this,n="Assertion failed. See https://openlayers.org/en/v"+"6.5.0".split("-")[0]+"/doc/errors/#"+e+" for details.";return(i=t.call(this,n)||this).code=e,i.name="AssertionError",i.message=n,i}return S(e,t),e}(Error);function z(t,e){if(!t)throw new N(e)}function E(t){for(var e=[1/0,1/0,-1/0,-1/0],i=0,n=t.length;i<n;++i)b(e,t[i]);return e}function A(t,e){return function(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}(t,e[0],e[1])}function L(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function b(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function k(t){var e=0;return function(t){return t[2]<t[0]||t[3]<t[1]}(t)||(e=Q(t)*Y(t)),e}function P(t){return[t[0],t[1]]}function R(t){return[t[2],t[1]]}function F(t,e){var i;return"bottom-left"===e?i=P(t):"bottom-right"===e?i=R(t):e===j?i=U(t):"top-right"===e?i=W(t):z(!1,13),i}function Y(t){return t[3]-t[1]}function G(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return B(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):function(t){L(1/0,1/0,-1/0,-1/0,t)}(n),n}function U(t){return[t[0],t[3]]}function W(t){return[t[2],t[3]]}function Q(t){return t[2]-t[0]}function B(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function X(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){var o=i;i=function(){t.removeEventListener(e,i),o.apply(this,arguments)}}var s={target:t,type:e,listener:i};return t.addEventListener(e,i),s}function Z(t,e,i,n){return X(t,e,i,n,!0)}function H(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),u(t))}var V,J=(V=function(t,e){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}V(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function q(t,e,i){var n=t;if(n.src&&T){var r=n.decode(),o=!0;return r.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():i())})),function(){o=!1}}var s=[Z(n,"load",e),Z(n,"error",i)];return function(){s.forEach(H)}}!function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,i,n,0)||this;return a.src_=r,a.image_=new Image,null!==o&&(a.image_.crossOrigin=o),a.unlisten_=null,a.state=0,a.imageLoadFunction_=s,a}J(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Y(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=q(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(O);var K,$=(K=function(t,e){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}K(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),tt=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,i,s)||this;return a.crossOrigin_=r,a.src_=n,a.key=n,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.tileLoadFunction_=o,a}return $(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=I(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=q(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(m),et="degrees",it={};it[et]=2*Math.PI*6370997/360,it.ft=.3048,it.m=1,it["us-ft"]=1200/3937;var nt=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||it[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();function rt(t,e,i){return Math.min(Math.max(t,e),i)}var ot="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},st="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function at(t){return t*Math.PI/180}function lt(t,e){var i=t%e;return i*e<0?i+e:i}var ht,ut=(ht=function(t,e){return(ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ht(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ct=6378137,pt=Math.PI*ct,ft=[-pt,-pt,pt,pt],dt=[-180,-85,180,85],gt=ct*Math.log(Math.tan(Math.PI/2)),yt=function(t){function e(e){return t.call(this,{code:e,units:"m",extent:ft,global:!0,worldExtent:dt,getPointResolution:function(t,e){return t/ot(e[1]/ct)}})||this}return ut(e,t),e}(nt),_t=[new yt("EPSG:3857"),new yt("EPSG:102100"),new yt("EPSG:102113"),new yt("EPSG:900913"),new yt("http://www.opengis.net/gml/srs/epsg.xml#3857")];var vt,mt,Mt,xt,Tt=(vt=function(t,e){return(vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}vt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),It=[-180,-90,180,90],wt=6378137*Math.PI/180,Ct=function(t){function e(e,i){return t.call(this,{code:e,units:et,extent:It,axisOrientation:i,global:!0,metersPerUnit:wt,worldExtent:It})||this}return Tt(e,t),e}(nt),Dt=[new Ct("CRS:84"),new Ct("EPSG:4326","neu"),new Ct("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ct("urn:ogc:def:crs:OGC:2:84"),new Ct("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")],Ot={},jt={};function St(t,e,i){var n=t.getCode(),r=e.getCode();n in jt||(jt[n]={}),jt[n][r]=i}function Nt(t,e,i){var n=i||6371008.8,r=at(t[1]),o=at(e[1]),s=(o-r)/2,a=at(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function zt(t,e,i){var n;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];n=e}else n=t.slice();return n}function Et(t,e,i){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function At(t){!function(t,e){Ot[t]=e}(t.getCode(),t),St(t,t,zt)}function Lt(t){return"string"==typeof t?Ot[e=t]||Ot[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function bt(t,e,i,n){var r,o=(t=Lt(t)).getPointResolutionFunc();if(o)r=o(e,i),n&&n!==t.getUnits()&&(a=t.getMetersPerUnit())&&(r=r*a/it[n]);else{var s=t.getUnits();if(s==et&&!n||n==et)r=e;else{var a,l=Rt(t,Lt("EPSG:4326"));if(l===Et&&s!==et)r=e*t.getMetersPerUnit();else{var h=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(Nt((h=l(h,h,2)).slice(0,2),h.slice(2,4))+Nt(h.slice(4,6),h.slice(6,8)))/2}void 0!==(a=n?it[n]:t.getMetersPerUnit())&&(r/=a)}}return r}function kt(t){!function(t){t.forEach(At)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&St(e,t,zt)}))}))}function Pt(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Rt(t,e)===zt)&&i}function Rt(t,e){var i=function(t,e){var i;return t in jt&&e in jt[t]&&(i=jt[t][e]),i}(t.getCode(),e.getCode());return i||(i=Et),i}function Ft(t,e){return Rt(Lt(t),Lt(e))}kt(_t),kt(Dt),mt=_t,Mt=function(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=0;s<n;s+=r){o[s]=pt*t[s]/180;var a=ct*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>gt?a=gt:a<-gt&&(a=-gt),o[s+1]=a}return o},xt=function(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=0;s<n;s+=r)o[s]=180*t[s]/pt,o[s+1]=360*Math.atan(Math.exp(t[s+1]/ct))/Math.PI-90;return o},Dt.forEach((function(t){mt.forEach((function(e){St(t,e,Mt),St(e,t,xt)}))}));var Yt,Gt=function(){function t(t,e,i,n,r,o){this.sourceProj_=t,this.targetProj_=e;var s={},a=Ft(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Q(n)==Q(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Q(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Q(this.targetProj_.getExtent()):null;var l=U(i),h=W(i),u=R(i),c=P(i),p=this.transformInv_(l),f=this.transformInv_(h),d=this.transformInv_(u),g=this.transformInv_(c),y=10+(o?Math.max(0,Math.ceil(st(k(i)/(o*o*256*256)))):0);if(this.addQuad_(l,h,u,c,p,f,d,g,y),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach((function(t,e,i){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})},t.prototype.addQuad_=function(t,e,i,n,r,o,s,a,l){var h=E([r,o,s,a]),u=this.sourceWorldWidth_?Q(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1,f=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(f=Q(E([t,e,i,n]))/this.targetWorldWidth_>.25||f),!p&&this.sourceProj_.isGlobal()&&u&&(f=u>.25||f)),!(!f&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3]))||B(h,this.maxSourceExtent_)){var d=0;if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)f=!0;else if(1!=(d=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(l>0){if(!f){var g=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.transformInv_(g),_=void 0;_=p?(lt(r[0],c)+lt(s[0],c))/2-lt(y[0],c):(r[0]+s[0])/2-y[0];var v=(r[1]+s[1])/2-y[1];f=_*_+v*v>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var m=[(e[0]+i[0])/2,(e[1]+i[1])/2],M=this.transformInv_(m),x=[(n[0]+t[0])/2,(n[1]+t[1])/2],T=this.transformInv_(x);this.addQuad_(t,e,m,x,r,o,M,T,l-1),this.addQuad_(x,m,i,n,T,M,s,a,l-1)}else{var I=[(t[0]+e[0])/2,(t[1]+e[1])/2],w=this.transformInv_(I),C=[(i[0]+n[0])/2,(i[1]+n[1])/2],D=this.transformInv_(C);this.addQuad_(t,I,C,n,r,w,D,a,l-1),this.addQuad_(I,e,i,C,w,o,s,D,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&d)&&this.addTriangle_(t,i,n,r,s,a),0==(14&d)&&this.addTriangle_(t,i,e,r,s,o),d&&(0==(13&d)&&this.addTriangle_(e,n,t,o,a,r),0==(7&d)&&this.addTriangle_(e,n,i,o,a,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,i,n){var r=e.source;b(t,r[0]),b(t,r[1]),b(t,r[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),Ut={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function Wt(t,e,i,n,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,r)),t.restore()}function Qt(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Bt(t,e,i,n){var r,o=(r=i,Ft(e,t)(r,void 0,r.length)),s=bt(e,n,i),a=e.getMetersPerUnit();void 0!==a&&(s*=a);var l=t.getMetersPerUnit();void 0!==l&&(s/=l);var h=t.getExtent();if(!h||A(h,o)){var u=bt(t,s,o)/s;isFinite(u)&&u>0&&(s/=u)}return s}function Xt(t,e,i,n,r,o,s,a,l,u,c,p){var f=I(Math.round(i*t),Math.round(i*e));if(h(f,p),0===l.length)return f.canvas;function d(t){return Math.round(t*i)/i}f.scale(i,i),f.globalCompositeOperation="lighter";var g=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,i){var n,r;n=g,(r=t.extent)[0]<n[0]&&(n[0]=r[0]),r[2]>n[2]&&(n[2]=r[2]),r[1]<n[1]&&(n[1]=r[1]),r[3]>n[3]&&(n[3]=r[3])}));var y=Q(g),_=Y(g),v=I(Math.round(i*y/n),Math.round(i*_/n));h(v,p);var m=i/n;l.forEach((function(t,e,i){var n=t.extent[0]-g[0],r=-(t.extent[3]-g[3]),o=Q(t.extent),s=Y(t.extent);t.image.width>0&&t.image.height>0&&v.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,n*m,r*m,o*m,s*m)}));var M=U(s);return a.getTriangles().forEach((function(t,e,r){var s=t.source,a=t.target,l=s[0][0],h=s[0][1],u=s[1][0],c=s[1][1],y=s[2][0],_=s[2][1],m=d((a[0][0]-M[0])/o),x=d(-(a[0][1]-M[1])/o),T=d((a[1][0]-M[0])/o),I=d(-(a[1][1]-M[1])/o),w=d((a[2][0]-M[0])/o),C=d(-(a[2][1]-M[1])/o),D=l,O=h;l=0,h=0;var j=function(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,r=Math.abs(t[i][i]),o=i+1;o<e;o++){var s=Math.abs(t[o][i]);s>r&&(r=s,n=o)}if(0===r)return null;var a=t[n];t[n]=t[i],t[i]=a;for(var l=i+1;l<e;l++)for(var h=-t[l][i]/t[i][i],u=i;u<e+1;u++)i==u?t[l][u]=0:t[l][u]+=h*t[i][u]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*c[p]}return c}([[u-=D,c-=O,0,0,T-m],[y-=D,_-=O,0,0,w-m],[0,0,u,c,I-x],[0,0,y,_,C-x]]);if(j){if(f.save(),f.beginPath(),function(){if(void 0===Yt){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Wt(t,4,5,4,0),Wt(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;Yt=Qt(e,0)||Qt(e,4)||Qt(e,8)}return Yt}()||p===Ut){f.moveTo(T,I);for(var S=m-T,N=x-I,z=0;z<4;z++)f.lineTo(T+d((z+1)*S/4),I+d(z*N/3)),3!=z&&f.lineTo(T+d((z+1)*S/4),I+d((z+1)*N/3));f.lineTo(w,C)}else f.moveTo(T,I),f.lineTo(m,x),f.lineTo(w,C);f.clip(),f.transform(j[0],j[2],j[1],j[3],m,x),f.translate(g[0]-D,g[3]-O),f.scale(n/i,-n/i),f.drawImage(v.canvas,0,0),f.restore()}})),c&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach((function(t,e,i){var n=t.target,r=(n[0][0]-M[0])/o,s=-(n[0][1]-M[1])/o,a=(n[1][0]-M[0])/o,l=-(n[1][1]-M[1])/o,h=(n[2][0]-M[0])/o,u=-(n[2][1]-M[1])/o;f.beginPath(),f.moveTo(a,l),f.lineTo(r,s),f.lineTo(h,u),f.closePath(),f.stroke()})),f.restore()),f.canvas}var Zt,Ht=(Zt=function(t,e){return(Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Zt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Vt=function(e){function i(t,i,n,r,o,s,a,l,h,u,c,p){var f=e.call(this,o,0)||this;f.renderEdges_=void 0!==c&&c,f.contextOptions_=p,f.pixelRatio_=a,f.gutter_=l,f.canvas_=null,f.sourceTileGrid_=i,f.targetTileGrid_=r,f.wrappedTileCoord_=s||o,f.sourceTiles_=[],f.sourcesListenerKeys_=null,f.sourceZ_=0;var d=r.getTileCoordExtent(f.wrappedTileCoord_),g=f.targetTileGrid_.getExtent(),y=f.sourceTileGrid_.getExtent(),_=g?G(d,g):d;if(0===k(_))return f.state=4,f;var v=t.getExtent();v&&(y=y?G(y,v):v);var m=r.getResolution(f.wrappedTileCoord_[0]),M=function(t,e,i,n){var r,o=[((r=i)[0]+r[2])/2,(r[1]+r[3])/2],s=Bt(t,e,o,n);return(!isFinite(s)||s<=0)&&function(t,e){e(P(t))||e(R(t))||e(W(t))||e(U(t))}(i,(function(i){return s=Bt(t,e,i,n),isFinite(s)&&s>0})),s}(t,n,_,m);if(!isFinite(M)||M<=0)return f.state=4,f;var x=void 0!==u?u:.5;if(f.triangulation_=new Gt(t,n,_,y,M*x,m),0===f.triangulation_.getTriangles().length)return f.state=4,f;f.sourceZ_=i.getZForResolution(M);var T=f.triangulation_.calculateSourceExtent();if(y&&(t.canWrapX()?(T[1]=rt(T[1],y[1],y[3]),T[3]=rt(T[3],y[1],y[3])):T=G(T,y)),k(T)){for(var I=i.getTileRangeForExtentAndZ(T,f.sourceZ_),w=I.minX;w<=I.maxX;w++)for(var C=I.minY;C<=I.maxY;C++){var D=h(f.sourceZ_,w,C,a);D&&f.sourceTiles_.push(D)}0===f.sourceTiles_.length&&(f.state=4)}else f.state=4;return f}return Ht(i,e),i.prototype.getImage=function(){return this.canvas_},i.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Xt(n,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},i.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,n,r){var o=i.getState();if(0==o||1==o){e++;var s=X(i,t,(function(t){var n=i.getState();2!=n&&3!=n&&4!=n||(H(s),0==--e&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(s)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,i){0==t.getState()&&t.load()})),0===e&&setTimeout(this.reproject_.bind(this),0)}},i.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(H),this.sourcesListenerKeys_=null},i}(m),Jt=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var i=this.entries_[t];return z(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},t.prototype.remove=function(t){var e=this.entries_[t];return z(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){z(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function qt(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function Kt(t,e,i){return t+"/"+e+"/"+i}function $t(t){return Kt(t[0],t[1],t[2])}var te,ee,ie,ne,re=(ee=function(t,e){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ee(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return re(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove($t(e.tileCoord)),e.release())}.bind(this))}},e}(Jt),se=(te=function(t,e){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}te(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ae=function(e){function i(){var t=e.call(this)||this;return t.revision_=0,t}return se(i,e),i.prototype.changed=function(){++this.revision_,this.dispatchEvent(t)},i.prototype.getRevision=function(){return this.revision_},i.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=X(this,t[r],e);return n}return X(this,t,e)},i.prototype.once=function(t,e){var i;if(Array.isArray(t)){var n=t.length;i=new Array(n);for(var r=0;r<n;++r)i[r]=Z(this,t[r],e)}else i=Z(this,t,e);return e.ol_key=i,i},i.prototype.un=function(t,e){var i=e.ol_key;if(i)!function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)H(t[e]);else H(t)}(i);else if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},i}(f),le=(ie=function(t,e){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ie(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),he=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.key=i,r.oldValue=n,r}return le(e,t),e}(i),ue=function(t){function e(e){var i=t.call(this)||this;return y(i),i.values_=null,void 0!==e&&i.setProperties(e),i}return le(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&h({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var i;i=function(t){return ce.hasOwnProperty(t)?ce[t]:ce[t]="change:"+t}(t),this.dispatchEvent(new he(i,t,e)),i="propertychange",this.dispatchEvent(new he(i,t,e))},e.prototype.set=function(t,e,i){var n=this.values_||(this.values_={});if(i)n[t]=e;else{var r=n[t];n[t]=e,r!==e&&this.notify(t,r)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.applyProperties=function(t){t.values_&&h(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],function(t){var e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,i)}},e}(ae),ce={},pe=(ne=function(t,e){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ne(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),fe=function(t){function e(e){var i=t.call(this)||this;return i.projection_=Lt(e.projection),i.attributions_=de(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:"ready",i.wrapX_=void 0!==e.wrapX&&e.wrapX,i}return pe(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return d()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=de(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(ue);function de(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var ge=function(){function t(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function ye(t,e,i,n,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=n,r):new ge(t,e,i,n)}function _e(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var ve=[0,0,0],me=function(){function t(t){var e,i,r;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,z((e=this.resolutions_,!0,i=function(t,e){return e-t}||n,e.every((function(t,n){if(0===n)return!0;var r=i(e[n-1],t);return!(r>0||0===r)}))),17),!t.origins)for(var o=0,s=this.resolutions_.length-1;o<s;++o)if(r){if(this.resolutions_[o]/this.resolutions_[o+1]!==r){r=void 0;break}}else r=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,z(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=U(a)),z(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,z(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,z(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var i=new ge(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(a){var n=this.getTileRangeForExtentAndZ(a,e);i.minX=Math.max(n.minX,i.minX),i.maxX=Math.min(n.maxX,i.maxX),i.minY=Math.max(n.minY,i.minY),i.maxY=Math.min(n.maxY,i.maxY)}return i}),this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),r=n.minX,o=n.maxX;r<=o;++r)for(var s=n.minY,a=n.maxY;s<=a;++s)i([e,r,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,i,n){var r,o,s=null,a=t[0]-1;for(2===this.zoomFactor_?(r=t[1],o=t[2]):s=this.getTileCoordExtent(t,n);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?ye(r=Math.floor(r/2),r,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(s,a,i)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],r=2*t[2];return ye(n,n+1,r,r+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),r=this.getResolution(t),o=_e(this.getTileSize(t),this.tmpSize_),s=n[0]+e.minX*o[0]*r,a=n[0]+(e.maxX+1)*o[0]*r;return L(s,n[1]+e.minY*o[1]*r,a,n[1]+(e.maxY+1)*o[1]*r,i)},t.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=ve;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var r=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),ye(r,n[1],o,n[2],i)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=_e(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]},t.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=_e(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*n,s=i[1]-(t[2]+1)*r[1]*n;return L(o,s,o+r[0]*n,s+r[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,r){var o=this.getZForResolution(i),s=i/this.getResolution(o),a=this.getOrigin(o),l=_e(this.getTileSize(o),this.tmpSize_),h=n?.5:0,u=n?.5:0,c=Math.floor((t-a[0])/i+h),p=Math.floor((a[1]-e)/i+u),f=s*c/l[0],d=s*p/l[1];return n?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),qt(o,f,d,r)},t.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,r){var o=this.getOrigin(i),s=this.getResolution(i),a=_e(this.getTileSize(i),this.tmpSize_),l=n?.5:0,h=n?.5:0,u=Math.floor((t-o[0])/s+l),c=Math.floor((o[1]-e)/s+h),p=u/a[0],f=c/a[1];return n?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),qt(i,p,f,r)},t.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){return rt(function(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var r=void 0;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i},t}();function Me(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){return function(t,e,i,n){var r=function(t,e,i,n){for(var r=Y(t),o=Q(t),s=_e(256),a=Math.max(o/s[0],r/s[1]),l=new Array(43),h=0;h<43;++h)l[h]=a/Math.pow(2,h);return l}(t);return new me({extent:t,origin:F(t,"top-left"),resolutions:r,tileSize:i})}(xe(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function xe(t){var e=(t=Lt(t)).getExtent();if(!e){var i=180*it[et]/t.getMetersPerUnit();e=L(-i,-i,i,i)}return e}var Te,Ie=(Te=function(t,e){return(Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Te(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),we=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;i.opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=e.tileGrid;return n&&_e(n.getTileSize(n.getMinZoom()),[256,256]),i.tileCache=new oe(e.cacheSize||0),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition},i.zDirection=e.zDirection?e.zDirection:0,i}return Ie(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,s,a,l=!0,h=i.minX;h<=i.maxX;++h)for(var u=i.minY;u<=i.maxY;++u)s=Kt(e,h,u),a=!1,r.containsKey(s)&&(a=2===(o=r.get(s)).getState())&&(a=!1!==n(o)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,n,r){return d()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Me(t)},e.prototype.getTileCacheForProjection=function(t){return z(Pt(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n,r,o,s=this.getTileGridForProjection(i),a=this.getTilePixelRatio(e),l=_e(s.getTileSize(t),this.tmpSize);return 1==a?l:(n=l,r=a,void 0===(o=this.tmpSize)&&(o=[0,0]),o[0]=n[0]*r+.5|0,o[1]=n[1]*r+.5|0,o)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var n=e[0],r=t.getTileCoordCenter(e),o=xe(i);if(A(o,r))return e;var s=Q(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,n)}(n,t,i)),function(t,e){var i=t[0],n=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var o=e.getFullTileRange(i);return!o||o.containsXY(n,r)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,e,i,n){},e}(fe),Ce=function(t){function e(e,i){var n=t.call(this,e)||this;return n.tile=i,n}return Ie(e,t),e}(i);function De(t,e){var i=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(s,a,l){return s?t.replace(i,s[0].toString()).replace(n,s[1].toString()).replace(r,s[2].toString()).replace(o,(function(){var t=s[0],i=e.getFullTileRange(t);return z(i,55),(i.getHeight()-s[2]-1).toString()})):void 0}}function Oe(t){return 1===t.length?t[0]:function(e,i,n){if(e){var r=lt(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[r](e,i,n)}}}function je(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n=i[1].charCodeAt(0),r=i[2].charCodeAt(0),o=void 0;for(o=n;o<=r;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}var Se,Ne,ze=(Ne=function(t,e){return(Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Ne(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ee=function(t){function e(i){var n=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(n.tileUrlFunction=i.tileUrlFunction),n.urls=null,i.urls?n.setUrls(i.urls):i.url&&n.setUrl(i.url),n.tileLoadingKeys_={},n}return ze(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,n=y(i),r=i.getState();1==r?(this.tileLoadingKeys_[n]=!0,e="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=3==r?"tileloaderror":2==r?"tileloadend":void 0),null!=e&&this.dispatchEvent(new Ce(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=je(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=De(t[r],e);return Oe(n)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,i){},e.prototype.useTile=function(t,e,i){var n=Kt(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(we),Ae=(Se=function(t,e){return(Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Se(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Le=function(e){function i(t){var i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:be,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,i.tileClass=void 0!==t.tileClass?t.tileClass:tt,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,i.contextOptions_=!1===t.imageSmoothing?Ut:void 0,i.renderReprojectionEdges_=!1,i}return Ae(i,e),i.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},i.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[n];r.expireCache(r==i?e:{})}},i.prototype.getContextOptions=function(){return this.contextOptions_},i.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Pt(this.getProjection(),t)?0:this.getGutter()},i.prototype.getGutter=function(){return 0},i.prototype.getKey=function(){return e.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},i.prototype.getOpaque=function(t){return!(this.getProjection()&&t&&!Pt(this.getProjection(),t))&&e.prototype.getOpaque.call(this,t)},i.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Pt(e,t)){var i=y(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Me(t)),this.tileGridForProjection[i]}return this.tileGrid},i.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Pt(e,t))return this.tileCache;var i=y(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new oe(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},i.prototype.createTile_=function(e,i,n,r,o,s){var a=[e,i,n],l=this.getTileCoordForTileUrlFunction(a,o),h=l?this.tileUrlFunction(l,r,o):void 0,u=new this.tileClass(a,void 0!==h?0:4,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=s,u.addEventListener(t,this.handleTileChange.bind(this)),u},i.prototype.getTile=function(t,e,i,n,r){var o=this.getProjection();if(o&&r&&!Pt(o,r)){var s=this.getTileCacheForProjection(r),a=[t,e,i],l=void 0,h=$t(a);s.containsKey(h)&&(l=s.get(h));var u=this.getKey();if(l&&l.key==u)return l;var c=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(a,r),d=new Vt(o,c,r,p,a,f,this.getTilePixelRatio(n),this.getGutter(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return d.key=u,l?(d.interimTile=l,d.refreshInterimChain(),s.replace(h,d)):s.set(h,d),d}return this.getTileInternal(t,e,i,n,o||r)},i.prototype.getTileInternal=function(t,e,i,n,r){var o=null,s=Kt(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=a){var l=o;o=this.createTile_(t,e,i,n,r,a),0==l.getState()?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,i,n,r,a),this.tileCache.set(s,o);return o},i.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},i.prototype.setTileGridForProjection=function(t,e){var i=Lt(t);if(i){var n=y(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},i}(Ee);function be(t,e){t.getImage().src=e}var ke="KVP";function Pe(t,e){var i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));var n=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}var Re,Fe,Ye=(Fe=function(t,e){return(Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Fe(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ge=function(t){function e(e){var i=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return i.matrixIds_=e.matrixIds,i}return Ye(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(me),Ue=(Re=function(t,e){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Re(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),We=function(t){function e(e){var i=this,n=void 0!==e.requestEncoding?e.requestEncoding:ke,r=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=je(e.url)),(i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,imageSmoothing:e.imageSmoothing,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",i.format_=void 0!==e.format?e.format:"image/jpeg",i.dimensions_=void 0!==e.dimensions?e.dimensions:{},i.layer_=e.layer,i.matrixSet_=e.matrixSet,i.style_=e.style,i.requestEncoding_=n,i.setKey(i.getKeyForDimensions_()),o&&o.length>0&&(i.tileUrlFunction=Oe(o.map(i.createFromWMTSTemplate.bind(i)))),i}return Ue(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Oe(t.map(this.createFromWMTSTemplate.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},e.prototype.updateDimensions=function(t){h(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e.prototype.createFromWMTSTemplate=function(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==ke&&h(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==ke?Pe(t,i):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t}));var n=this.tileGrid,r=this.dimensions_;return function(i,o,s){if(i){var a={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};h(a,r);var l=t;return e==ke?Pe(l,a):l.replace(/\{(\w+?)\}/g,(function(t,e){return a[e]}))}}},e}(Le),Qe=function(){for(var t=[],e=[],i=1;i<19;i++)t.push(1.40625/Math.pow(2,i)),e.push(i);return new Ge({extent:[-180,-90,180,90],resolutions:t,origin:[-180,90],matrixIds:e,minZoom:1})},Be=function(){for(var t=[],e=[],i=1;i<19;i++)t.push(156543.03392804062/Math.pow(2,i)),e.push(i);return new Ge({extent:[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],resolutions:t,matrixIds:e,origin:[-20037508.3427892,20037508.3427892],minZoom:1})};return function(t){a(i,t);var e=l(i);function i(t){if(o(this,i),!t.token)return s(void 0,void console.error("token is required"));var n=t.matrixSet||"c",r=t.layer||"vec",a={tileGrid:"c"===n?Qe():Be(),style:"default",format:"tiles",layer:r,matrixSet:n,url:"http://t{0-7}.tianditu.gov.cn/".concat(r,"_").concat(n,"/wmts?tk=").concat(t.token)};return e.call(this,Object.assign(a,t))}return i}(We)}))},444:function(t,e,i){var n,r;i(107),i(445),i(20),i(94),i(174),i(100),i(176),i(446),i(67),i(447),i(46),i(173),i(448),i(368),i(449),i(451),i(452),i(101),i(369),i(71),i(370),i(371),i(372),i(104),i(175),i(99),i(102),i(9),i(453),i(455),i(337),i(338),i(30),i(96),i(26),i(333),i(68),i(457),i(177),i(459),i(460),i(465),i(467),i(468),i(469),i(470),i(471),i(472),i(473),i(474),i(475),i(476),i(477),i(478),i(479),i(480),i(481),i(482),i(483),i(484),i(485),i(486),i(487),i(488),i(95),i(32),i(182),i(489);var o=i(375),s=i(376),a=i(377),l=i(490),h=i(373),u=i(495),c=i(347);!function(o,s){"object"==c(e)&&void 0!==t?t.exports=s():void 0===(r="function"==typeof(n=s)?n.call(e,i,e,t):n)||(t.exports=r)}(0,(function(){"use strict";var t=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),e="propertychange",i=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function n(t,e){return t>e?1:t<e?-1:0}function r(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function p(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,r=0;r<n;r++)t[t.length]=i[r]}function f(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function d(){return!0}function g(){return!1}function y(){}var _="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,r=arguments.length;n<r;++n){var o=arguments[n];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])}return i};function v(t){for(var e in t)delete t[e]}var m="function"==typeof Object.values?Object.values:function(t){var e=[];for(var i in t)e.push(t[i]);return e};function M(t){var e;for(e in t)return!1;return!e}var x,T=(x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),I=function(e){function i(t){var i=e.call(this)||this;return i.eventTarget_=t,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return T(i,e),i.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);-1===n.indexOf(e)&&n.push(e)}},i.prototype.dispatchEvent=function(e){var i="string"==typeof e?new t(e):e,n=i.type;i.target||(i.target=this.eventTarget_||this);var r,o=this.listeners_&&this.listeners_[n];if(o){var s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,a[n]=0),++s[n];for(var l=0,h=o.length;l<h;++l)if(!1===(r="handleEvent"in o[l]?o[l].handleEvent(i):o[l].call(this,i))||i.propagationStopped){r=!1;break}if(--s[n],0===s[n]){var u=a[n];for(delete a[n];u--;)this.removeEventListener(n,y);delete s[n]}return r}},i.prototype.disposeInternal=function(){this.listeners_&&v(this.listeners_)},i.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},i.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},i.prototype.removeEventListener=function(t,e){var i=this.listeners_&&this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=y,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},i}(i),w="change",C="click";function D(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){var o=i;i=function(){t.removeEventListener(e,i),o.apply(this,arguments)}}var s={target:t,type:e,listener:i};return t.addEventListener(e,i),s}function O(t,e,i,n){return D(t,e,i,n,!0)}function j(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),v(t))}var S,N=(S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),z=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return N(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(w)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=D(this,t[r],e);return n}return D(this,t,e)},e.prototype.once=function(t,e){var i;if(Array.isArray(t)){var n=t.length;i=new Array(n);for(var r=0;r<n;++r)i[r]=O(this,t[r],e)}else i=O(this,t,e);return e.ol_key=i,i},e.prototype.un=function(t,e){var i=e.ol_key;if(i)E(i);else if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},e}(I);function E(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)j(t[e]);else j(t)}function A(){return function(){throw new Error("Unimplemented abstract method.")}()}var L=0;function b(t){return t.ol_uid||(t.ol_uid=String(++L))}var k,P=(k=function(t,e){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}k(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),R=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.key=i,r.oldValue=n,r}return P(e,t),e}(t),F=function(t){function i(e){var i=t.call(this)||this;return b(i),i.values_=null,void 0!==e&&i.setProperties(e),i}return P(i,t),i.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},i.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},i.prototype.getProperties=function(){return this.values_&&_({},this.values_)||{}},i.prototype.hasProperties=function(){return!!this.values_},i.prototype.notify=function(t,i){var n;n=G(t),this.dispatchEvent(new R(n,t,i)),n=e,this.dispatchEvent(new R(n,t,i))},i.prototype.set=function(t,e,i){var n=this.values_||(this.values_={});if(i)n[t]=e;else{var r=n[t];n[t]=e,r!==e&&this.notify(t,r)}},i.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},i.prototype.applyProperties=function(t){t.values_&&_(this.values_||(this.values_={}),t.values_)},i.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],M(this.values_)&&(this.values_=null),e||this.notify(t,i)}},i}(z),Y={};function G(t){return Y.hasOwnProperty(t)?Y[t]:Y[t]="change:"+t}var U="postrender",W="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Q=(W.indexOf("firefox"),-1!==W.indexOf("safari")&&W.indexOf("chrom"),-1!==W.indexOf("webkit")&&W.indexOf("edge"),W.indexOf("macintosh"),"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope),B="undefined"!=typeof Image&&Image.prototype.decode;function X(t,e,i){var n=i&&i.length?i.shift():Q?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function Z(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+(parseInt(i.marginLeft,10)+parseInt(i.marginRight,10))}function H(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+(parseInt(i.marginTop,10)+parseInt(i.marginBottom,10))}function V(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}!function(){try{var t=Object.defineProperty({},"passive",{get:function(){!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(t){}}();var J,q=(J=function(t,e){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}J(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),K=function(t){function e(e){var i=t.call(this)||this,n=e.element;return!n||e.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),i.element=n||null,i.target_=null,i.map_=null,i.listenerKeys=[],e.render&&(i.render=e.render),e.target&&i.setTarget(e.target),i}return q(e,t),e.prototype.disposeInternal=function(){V(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&V(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)j(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==y&&this.listenerKeys.push(D(t,U,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(F),$=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),tt=["style","variant","weight","size","lineHeight","family"],et=function(t){var e=t.match($);if(!e)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,r=tt.length;n<r;++n){var o=e[n+1];void 0!==o&&(i[tt[n]]=o)}return i.families=i.family.split(/,\s?/),i},it="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function nt(t,e){return t(e={exports:{}},e.exports),e.exports}var rt,ot,st,at,lt=nt((function(t,e){!function(){function e(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){s(n.response,e,i)},n.onerror=function(){console.error("could not download file")},n.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function n(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var r="object"==("undefined"==typeof window?"undefined":c(window))&&window.window===window?window:"object"==("undefined"==typeof self?"undefined":c(self))&&self.self===self?self:"object"==c(it)&&it.global===it?it:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||("object"!=("undefined"==typeof window?"undefined":c(window))||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(t,o,s){var a=r.URL||r.webkitURL,l=document.createElement("a");o=o||t.name||"download",l.download=o,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?n(l):i(l.href)?e(t,o,s):n(l,l.target="_blank")):(l.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(l.href)}),4e4),setTimeout((function(){n(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,o){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=c(e)&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),r);else if(i(t))e(t,r,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){n(s)}))}}:function(t,i,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,n);var a="application/octet-stream"===t.type,l=/constructor/i.test(r.HTMLElement)||r.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||a&&l||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=h?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},u.readAsDataURL(t)}else{var c=r.URL||r.webkitURL,p=c.createObjectURL(t);s?s.location=p:location.href=p,s=null,setTimeout((function(){c.revokeObjectURL(p)}),4e4)}});r.saveAs=s.saveAs=s,t.exports=s}()})),ht=nt((function(t){!function(e){var i=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(e){var i,n;return(i="application/font-woff",n="image/jpeg",{woff:i,woff2:i,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:n,jpeg:n,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[t(e).toLowerCase()]||""},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):function(t){return new Promise((function(e){for(var i=window.atob(t.toDataURL().split(",")[1]),n=i.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=i.charCodeAt(o);e(new Blob([r],{type:"image/png"}))}))}(t)},resolveUrl:function(t,e){var i=document.implementation.createHTMLDocument(),n=i.createElement("base");i.head.appendChild(n);var r=i.createElement("a");return i.body.appendChild(r),n.href=e,r.href=t,r.href},getAndEncode:function(t){return l.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime()),new Promise((function(e){var i,n=new XMLHttpRequest;if(n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var r=new FileReader;r.onloadend=function(){var t=r.result.split(/,/)[1];e(t)},r.readAsDataURL(n.response)}else i?e(i):o("cannot fetch resource: "+t+", status: "+n.status)},n.ontimeout=function(){i?e(i):o("timeout of 30000ms occured while fetching resource: "+t)},n.responseType="blob",n.timeout=3e4,n.open("GET",t,!0),n.send(),l.impl.options.imagePlaceholder){var r=l.impl.options.imagePlaceholder.split(/,/);r&&r[1]&&(i=r[1])}function o(t){console.error(t),e("")}}))},uid:function(){var t=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}}(),delay:function(t){return function(e){return new Promise((function(i){setTimeout((function(){i(e)}),t)}))}},asArray:function(t){for(var e=[],i=t.length,n=0;n<i;n++)e.push(t[n]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){e(n)},n.onerror=i,n.src=t}))},width:function(t){var i=e(t,"border-left-width"),n=e(t,"border-right-width");return t.scrollWidth+i+n},height:function(t){var i=e(t,"border-top-width"),n=e(t,"border-bottom-width");return t.scrollHeight+i+n}};function t(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function e(t,e){var i=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(i.replace("px",""))}}(),n=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,i,o){return e(t)?Promise.resolve(t).then(n).then((function(e){var n=Promise.resolve(t);return e.forEach((function(t){n=n.then((function(e){return r(e,t,i,o)}))})),n})):Promise.resolve(t)},shouldProcess:e,impl:{readUrls:n,inline:r}};function e(e){return-1!==e.search(t)}function n(e){for(var n,r=[];null!==(n=t.exec(e));)r.push(n[1]);return r.filter((function(t){return!i.isDataUrl(t)}))}function r(t,e,n,r){return Promise.resolve(e).then((function(t){return n?i.resolveUrl(t,n):t})).then(r||i.getAndEncode).then((function(t){return i.dataAsUrl(t,i.mimeType(e))})).then((function(n){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+i.escape(t)+")(['\"]?\\))","g")}(e),"$1"+n+"$3")}))}}(),r=function(){return{resolveAll:function(){return t().then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))},impl:{readAll:t}};function t(){return Promise.resolve(i.asArray(document.styleSheets)).then((function(t){var e=[];return t.forEach((function(t){try{i.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}})),e})).then((function(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return n.shouldProcess(t.style.getPropertyValue("src"))}))})).then((function(e){return e.map(t)}));function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return n.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),o=function(){return{inlineAll:function e(r){return r instanceof Element?function(t){var e=t.style.getPropertyValue("background");return e?n.inlineAll(e).then((function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}(r).then((function(){return r instanceof HTMLImageElement?t(r).inline():Promise.all(i.asArray(r.childNodes).map((function(t){return e(t)})))})):Promise.resolve(r)},impl:{newImage:t}};function t(t){return{inline:function(e){return i.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||i.getAndEncode).then((function(e){return i.dataAsUrl(e,i.mimeType(t.src))})).then((function(e){return new Promise((function(i,n){t.onload=i,t.onerror=n,t.src=e}))}))}}}}(),s=void 0,a=!1,l={toSvg:h,toPng:function(t,e){return u(t,e||{}).then((function(t){return t.toDataURL()}))},toJpeg:function(t,e){return u(t,e=e||{}).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))},toBlob:function(t,e){return u(t,e||{}).then(i.canvasToBlob)},toPixelData:function(t,e){return u(t,e||{}).then((function(e){return e.getContext("2d").getImageData(0,0,i.width(t),i.height(t)).data}))},impl:{fontFaces:r,images:o,util:i,inliner:n,options:{}}};function h(t,e){return function(t){void 0===t.imagePlaceholder?l.impl.options.imagePlaceholder=s:l.impl.options.imagePlaceholder=t.imagePlaceholder,void 0===t.cacheBust?l.impl.options.cacheBust=a:l.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then((function(t){return function t(e,n,r){return r||!n||n(e)?Promise.resolve(e).then((function(t){return t instanceof HTMLCanvasElement?i.makeImage(t.toDataURL()):t.cloneNode(!1)})).then((function(r){return function(e,n,r){var o=e.childNodes;return 0===o.length?Promise.resolve(n):s(n,i.asArray(o),r).then((function(){return n}));function s(e,i,n){var r=Promise.resolve();return i.forEach((function(i){r=r.then((function(){return t(i,n)})).then((function(t){t&&e.appendChild(t)}))})),r}}(e,r,n)})).then((function(t){return function(t,e){return e instanceof Element?Promise.resolve().then((function(){!function(t,e){t.cssText?e.cssText=t.cssText:function(t,e){i.asArray(t).forEach((function(i){e.setProperty(i,t.getPropertyValue(i),t.getPropertyPriority(i))}))}(t,e)}(window.getComputedStyle(t),e.style)})).then((function(){function n(n){var r=window.getComputedStyle(t,n),o=r.getPropertyValue("content");if(""!==o&&"none"!==o){var s=i.uid();e.className=e.className+" "+s;var a=document.createElement("style");a.appendChild(function(t,e,n){var r="."+t+":"+e,o=n.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(n):function(t){return i.asArray(t).map((function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")})).join("; ")+";"}(n);return document.createTextNode(r+"{"+o+"}")}(s,n,r)),e.appendChild(a)}}[":before",":after"].forEach((function(t){n(t)}))})).then((function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)})).then((function(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach((function(t){var i=e.getAttribute(t);i&&e.style.setProperty(t,i)})))})).then((function(){return e})):e}(e,t)})):Promise.resolve()}(t,e.filter,!0)})).then(c).then(p).then((function(t){return e.bgcolor&&(t.style.backgroundColor=e.bgcolor),e.width&&(t.style.width=e.width+"px"),e.height&&(t.style.height=e.height+"px"),e.style&&Object.keys(e.style).forEach((function(i){t.style[i]=e.style[i]})),t})).then((function(n){return function(t,e,n){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(i.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+n+'">'+t+"</svg>"})).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))}(n,e.width||i.width(t),e.height||i.height(t))}))}function u(t,e){return h(t,e).then(i.makeImage).then(i.delay(100)).then((function(n){var r=function(t){var n=document.createElement("canvas");if(n.width=e.width||i.width(t),n.height=e.height||i.height(t),e.bgcolor){var r=n.getContext("2d");r.fillStyle=e.bgcolor,r.fillRect(0,0,n.width,n.height)}return n}(t);return r.getContext("2d").drawImage(n,0,0),r}))}function c(t){return r.resolveAll().then((function(e){var i=document.createElement("style");return t.appendChild(i),i.appendChild(document.createTextNode(e)),t}))}function p(t){return o.inlineAll(t).then((function(){return t}))}t.exports=l}()})),ut=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,t),this.options_=e}return u(t,[{key:"toImage",value:function(t){var e=(t?"string"==typeof t?document.getElementById(t):t:void 0)||document;return ht.toBlob(e,this.options_)}}]),t}(),ct=(at=function(t,e){return(at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}at(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),pt=function(t){function e(e){var i=this,n="Assertion failed. See https://openlayers.org/en/v"+"6.5.0".split("-")[0]+"/doc/errors/#"+e+" for details.";return(i=t.call(this,n)||this).code=e,i.name="AssertionError",i.message=n,i}return ct(e,t),e}(Error),ft="remove",dt=(st=function(t,e){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}st(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),gt=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.element=i,r.index=n,r}return dt(e,t),e}(t),yt=function(t){function e(e,i){var n=t.call(this)||this,r=i||{};if(n.unique_=!!r.unique,n.array_=e||[],n.unique_)for(var o=0,s=n.array_.length;o<s;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return dt(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get("length")},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new gt("add",e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new gt(ft,e,t)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new gt(ft,n,t)),this.dispatchEvent(new gt("add",e,t))}else{for(var r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set("length",this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new pt(58)},e}(F),_t="active",vt=(ot=function(t,e){return(ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ot(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),mt=function(t){function e(e){var i=t.call(this)||this;return e&&e.handleEvent&&(i.handleEvent=e.handleEvent),i.map_=null,i.setActive(!0),i}return vt(e,t),e.prototype.getActive=function(){return this.get(_t)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(_t,t)},e.prototype.setMap=function(t){this.map_=t},e}(F),Mt="pointerdrag",xt="pointermove",Tt="pointerdown",It="pointerup",wt=(rt=function(t,e){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}rt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ct=function(t){function e(e){var i=this,n=e||{};return i=t.call(this,n)||this,n.handleDownEvent&&(i.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(i.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(i.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(i.handleUpEvent=n.handleUpEvent),n.stopDown&&(i.stopDown=n.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return wt(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Mt)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==It){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Tt){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==xt&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Tt||e===Mt||e===It}(t)){var e=t.originalEvent,i=e.pointerId.toString();t.type==It?delete this.trackedPointers_[i]:(t.type==Tt||i in this.trackedPointers_)&&(this.trackedPointers_[i]=e),this.targetPointers=m(this.trackedPointers_)}},e}(mt);function Dt(t,e){if(!t)throw new pt(e)}var Ot=d,jt=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},St=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey};function Nt(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function zt(t,e,i){var n,r;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r}function Et(t,e){return Lt(t,e[0],e[1])}function At(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Lt(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function bt(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],s=e[0],a=e[1],l=0;return s<i?l|=16:s>r&&(l|=4),a<n?l|=8:a>o&&(l|=2),0===l&&(l=1),l}function kt(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function Pt(t){return kt(1/0,1/0,-1/0,-1/0,t)}function Rt(t,e,i,n,r){return Yt(Pt(r),t,e,i,n)}function Ft(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Yt(t,e,i,n,r){for(;i<n;i+=r)Gt(t,e[i],e[i+1]);return t}function Gt(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function Ut(t,e){var i;return(i=e(Wt(t)))||(i=e(Qt(t)))||(i=e(Ht(t)))?i:(i=e(Zt(t)))||!1}function Wt(t){return[t[0],t[1]]}function Qt(t){return[t[2],t[1]]}function Bt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Xt(t){return t[3]-t[1]}function Zt(t){return[t[0],t[3]]}function Ht(t){return[t[2],t[3]]}function Vt(t){return t[2]-t[0]}function Jt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function qt(t,e,i){return Math.min(Math.max(t,e),i)}var Kt="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function $t(t,e,i,n,r,o){var s=r-i,a=o-n;if(0!==s||0!==a){var l=((t-i)*s+(e-n)*a)/(s*s+a*a);l>1?(i=r,n=o):l>0&&(i+=s*l,n+=a*l)}return te(t,e,i,n)}function te(t,e,i,n){var r=i-t,o=n-e;return r*r+o*o}function ee(t){return t*Math.PI/180}function ie(t,e,i){return t+i*(e-t)}var ne="XY",re="XYM",oe="XYZM",se="Point",ae="LineString",le="LinearRing",he="Polygon",ue="MultiPoint",ce="MultiLineString",pe="MultiPolygon",fe="GeometryCollection",de="Circle",ge="degrees",ye={};function _e(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function ve(t,e,i,n,r,o,s,a){var l=Math.sin(o),h=Math.cos(o);return t[0]=n*h,t[1]=r*l,t[2]=-n*l,t[3]=r*h,t[4]=s*n*h-a*n*l+e,t[5]=s*r*l+a*r*h+i,t}ye[ge]=2*Math.PI*6370997/360,ye.ft=.3048,ye.m=1,ye["us-ft"]=1200/3937,new Array(6);var me,Me=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ye[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),xe=(me=function(t,e){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}me(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Te=6378137,Ie=Math.PI*Te,we=[-Ie,-Ie,Ie,Ie],Ce=[-180,-85,180,85],De=Te*Math.log(Math.tan(Math.PI/2)),Oe=function(t){function e(e){return t.call(this,{code:e,units:"m",extent:we,global:!0,worldExtent:Ce,getPointResolution:function(t,e){return t/Kt(e[1]/Te)}})||this}return xe(e,t),e}(Me),je=[new Oe("EPSG:3857"),new Oe("EPSG:102100"),new Oe("EPSG:102113"),new Oe("EPSG:900913"),new Oe("http://www.opengis.net/gml/srs/epsg.xml#3857")];var Se,Ne=(Se=function(t,e){return(Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Se(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ze=[-180,-90,180,90],Ee=6378137*Math.PI/180,Ae=function(t){function e(e,i){return t.call(this,{code:e,units:ge,extent:ze,axisOrientation:i,global:!0,metersPerUnit:Ee,worldExtent:ze})||this}return Ne(e,t),e}(Me),Le=[new Ae("CRS:84"),new Ae("EPSG:4326","neu"),new Ae("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ae("urn:ogc:def:crs:OGC:2:84"),new Ae("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")],be={},ke={};function Pe(t,e,i){var n=t.getCode(),r=e.getCode();n in ke||(ke[n]={}),ke[n][r]=i}var Re,Fe,Ye,Ge=6371008.8;function Ue(t,e,i){var n=i||Ge,r=ee(t[1]),o=ee(e[1]),s=(o-r)/2,a=ee(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function We(t,e){for(var i=0,n=0,r=t.length;n<r-1;++n)i+=Ue(t[n],t[n+1],e);return i}function Qe(t,e){for(var i=0,n=t.length,r=t[n-1][0],o=t[n-1][1],s=0;s<n;s++){var a=t[s][0],l=t[s][1];i+=ee(a-r)*(2+Math.sin(ee(o))+Math.sin(ee(l))),r=a,o=l}return i*e*e/2}function Be(t,e,i){var n;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];n=e}else n=t.slice();return n}function Xe(t,e,i){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function Ze(t){!function(t,e){be[t]=e}(t.getCode(),t),Pe(t,t,Be)}function He(t){return"string"==typeof t?be[e=t]||be[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Ve(t){!function(t){t.forEach(Ze)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Pe(e,t,Be)}))}))}function Je(t,e){return function(t,e){var i=function(t,e){var i;return t in ke&&e in ke[t]&&(i=ke[t][e]),i}(t.getCode(),e.getCode());return i||(i=Xe),i}(He(t),He(e))}function qe(t,e){return t}function Ke(t,e,i,n,r,o){for(var s=o||[],a=0,l=e;l<i;l+=n){var h=t[l],u=t[l+1];s[a++]=r[0]*h+r[2]*u+r[4],s[a++]=r[1]*h+r[3]*u+r[5]}return o&&s.length!=a&&(s.length=a),s}function $e(t,e,i,n,r,o,s){for(var a=s||[],l=Math.cos(r),h=Math.sin(r),u=o[0],c=o[1],p=0,f=e;f<i;f+=n){var d=t[f]-u,g=t[f+1]-c;a[p++]=u+d*l-g*h,a[p++]=c+d*h+g*l;for(var y=f+2;y<f+n;++y)a[p++]=t[y]}return s&&a.length!=p&&(a.length=p),a}function ti(t,e,i,n,r,o,s){for(var a=s||[],l=0,h=e;h<i;h+=n){a[l++]=t[h]+r,a[l++]=t[h+1]+o;for(var u=h+2;u<h+n;++u)a[l++]=t[u]}return s&&a.length!=l&&(a.length=l),a}Ve(je),Ve(Le),Re=je,Fe=function(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=0;s<n;s+=r){o[s]=Ie*t[s]/180;var a=Te*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>De?a=De:a<-De&&(a=-De),o[s+1]=a}return o},Ye=function(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=0;s<n;s+=r)o[s]=180*t[s]/Ie,o[s+1]=360*Math.atan(Math.exp(t[s+1]/Te))/Math.PI-90;return o},Le.forEach((function(t){Re.forEach((function(e){Pe(t,e,Fe),Pe(e,t,Ye)}))}));var ei,ii,ni=(ii=function(t,e){return(ii=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ii(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ri=[1,0,0,1,0,0],oi=function(t){function e(){var e,i,n,r,o,s=t.call(this)||this;return s.extent_=[1/0,1/0,-1/0,-1/0],s.extentRevision_=-1,s.simplifiedGeometryMaxMinSquaredTolerance=0,s.simplifiedGeometryRevision=0,s.simplifyTransformedInternal=(e=function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===r&&f(t,n)||(o=!0,r=this,n=t,i=e.apply(this,arguments)),i}),s}return ni(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return A()},e.prototype.closestPointXY=function(t,e,i,n){return A()},e.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return A()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Pt(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){A()},e.prototype.scale=function(t,e,i){A()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return A()},e.prototype.getType=function(){return A()},e.prototype.applyTransform=function(t){A()},e.prototype.intersectsExtent=function(t){return A()},e.prototype.translate=function(t,e){A()},e.prototype.transform=function(t,e){var i=He(t),n="tile-pixels"==i.getUnits()?function(t,n,r){var o=i.getExtent(),s=i.getWorldExtent(),a=Xt(s)/Xt(o);return ve(ri,s[0],s[3],a,-a,0,0,0),Ke(t,0,t.length,r,ri,n),Je(i,e)(t,n,r)}:Je(i,e);return this.applyTransform(n),this},e}(F),si=(ei=function(t,e){return(ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ei(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ai=function(t){function e(){var e=t.call(this)||this;return e.layout=ne,e.stride=2,e.flatCoordinates=null,e}return si(e,t),e.prototype.computeExtent=function(t){return Rt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return A()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=li(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){A()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=li(t);else{for(var r=0;r<i;++r){if(0===e.length)return this.layout=ne,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=ne:3==t?e="XYZ":4==t&&(e=oe),e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();$e(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;r||(r=Bt(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();!function(t,e,i,n,r,o,s,a){for(var l=a||[],h=s[0],u=s[1],c=0,p=0;p<i;p+=n){var f=t[p]-h,d=t[p+1]-u;l[c++]=h+r*f,l[c++]=u+o*d;for(var g=p+2;g<p+n;++g)l[c++]=t[g]}a&&l.length!=c&&(l.length=c)}(o,0,o.length,s,t,n,r,o),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();ti(i,0,i.length,n,t,e,i),this.changed()}},e}(oi);function li(t){var e;return t==ne?e=2:"XYZ"==t||t==re?e=3:t==oe&&(e=4),e}function hi(t,e,i,n,r,o,s){var a,l=t[e],h=t[e+1],u=t[i]-l,c=t[i+1]-h;if(0===u&&0===c)a=e;else{var p=((r-l)*u+(o-h)*c)/(u*u+c*c);if(p>1)a=i;else{if(p>0){for(var f=0;f<n;++f)s[f]=ie(t[e+f],t[i+f],p);return void(s.length=n)}a=e}}for(f=0;f<n;++f)s[f]=t[a+f];s.length=n}function ui(t,e,i,n,r){var o=t[e],s=t[e+1];for(e+=n;e<i;e+=n){var a=t[e],l=t[e+1],h=te(o,s,a,l);h>r&&(r=h),o=a,s=l}return r}function ci(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];r=ui(t,e,a,n,r),e=a}return r}function pi(t,e,i,n,r,o,s,a,l,h,u){if(e==i)return h;var c,p;if(0===r){if((p=te(s,a,t[e],t[e+1]))<h){for(c=0;c<n;++c)l[c]=t[e+c];return l.length=n,p}return h}for(var f=u||[NaN,NaN],d=e+n;d<i;)if(hi(t,d-n,d,n,s,a,f),(p=te(s,a,f[0],f[1]))<h){for(h=p,c=0;c<n;++c)l[c]=f[c];l.length=n,d+=n}else d+=n*Math.max((Math.sqrt(p)-Math.sqrt(h))/r|0,1);if(o&&(hi(t,i-n,e,n,s,a,f),(p=te(s,a,f[0],f[1]))<h)){for(h=p,c=0;c<n;++c)l[c]=f[c];l.length=n}return h}function fi(t,e,i,n,r,o,s,a,l,h,u){for(var c=u||[NaN,NaN],p=0,f=i.length;p<f;++p){var d=i[p];h=pi(t,e,d,n,r,o,s,a,l,h,c),e=d}return h}function di(t,e,i,n){for(var r=0,o=i.length;r<o;++r)t[e++]=i[r];return e}function gi(t,e,i,n){for(var r=0,o=i.length;r<o;++r)for(var s=i[r],a=0;a<n;++a)t[e++]=s[a];return e}function yi(t,e,i,n,r){for(var o=r||[],s=0,a=0,l=i.length;a<l;++a){var h=gi(t,e,i[a],n);o[s++]=h,e=h}return o.length=s,o}function _i(t,e,i,n,r,o,s){var a=(i-e)/n;if(a<3){for(;e<i;e+=n)o[s++]=t[e],o[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var h=[e,i-n],u=0;h.length>0;){for(var c=h.pop(),p=h.pop(),f=0,d=t[p],g=t[p+1],y=t[c],_=t[c+1],v=p+n;v<c;v+=n){var m=$t(t[v],t[v+1],d,g,y,_);m>f&&(u=v,f=m)}f>r&&(l[(u-e)/n]=1,p+n<u&&h.push(p,u),u+n<c&&h.push(u,c))}for(v=0;v<a;++v)l[v]&&(o[s++]=t[e+v*n],o[s++]=t[e+v*n+1]);return s}function vi(t,e){return e*Math.round(t/e)}function mi(t,e,i,n,r,o,s){if(e==i)return s;var a,l,h=vi(t[e],r),u=vi(t[e+1],r);e+=n,o[s++]=h,o[s++]=u;do{if(a=vi(t[e],r),l=vi(t[e+1],r),(e+=n)==i)return o[s++]=a,o[s++]=l,s}while(a==h&&l==u);for(;e<i;){var c=vi(t[e],r),p=vi(t[e+1],r);if(e+=n,c!=a||p!=l){var f=a-h,d=l-u,g=c-h,y=p-u;f*y==d*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(d<0&&y<d||d==y||d>0&&y>d)?(a=c,l=p):(o[s++]=a,o[s++]=l,h=a,u=l,a=c,l=p)}}return o[s++]=a,o[s++]=l,s}function Mi(t,e,i,n,r,o,s,a){for(var l=0,h=i.length;l<h;++l){var u=i[l];s=mi(t,e,u,n,r,o,s),a.push(s),e=u}return s}function xi(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=e;a<i;a+=n)o[s++]=t.slice(a,a+n);return o.length=s,o}function Ti(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=0,l=i.length;a<l;++a){var h=i[a];o[s++]=xi(t,e,h,n,o[s]),e=h}return o.length=s,o}function Ii(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=0,l=i.length;a<l;++a){var h=i[a];o[s++]=Ti(t,e,h,n,o[s]),e=h[h.length-1]}return o.length=s,o}function wi(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],l=t[e+1];r+=s*a-o*l,o=a,s=l}return r/2}function Ci(t,e,i,n){for(var r=0,o=0,s=i.length;o<s;++o){var a=i[o];r+=wi(t,e,a,n),e=a}return r}var Di,Oi,ji=(Oi=function(t,e){return(Oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Oi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Si=function(t){function e(e,i){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return ji(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ui(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return wi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return xi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=_i(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,ne)},e.prototype.getType=function(){return le},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gi(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ai),Ni=(Di=function(t,e){return(Di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Di(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),zi=function(t){function e(e,i){var n=t.call(this)||this;return n.setCoordinates(e,i),n}return Ni(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=te(t,e,r[0],r[1]);if(o<n){for(var s=this.stride,a=0;a<s;++a)i[a]=r[a];return i.length=s,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return i=t,kt(n=(e=this.flatCoordinates)[0],r=e[1],n,r,i);var e,i,n,r},e.prototype.getType=function(){return se},e.prototype.intersectsExtent=function(t){return Lt(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=di(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ai);function Ei(t,e,i,n,r){return!Ut(r,(function(r){return!Ai(t,e,i,n,r[0],r[1])}))}function Ai(t,e,i,n,r,o){for(var s=0,a=t[i-n],l=t[i-n+1];e<i;e+=n){var h=t[e],u=t[e+1];l<=o?u>o&&(h-a)*(o-l)-(r-a)*(u-l)>0&&s++:u<=o&&(h-a)*(o-l)-(r-a)*(u-l)<0&&s--,a=h,l=u}return 0!==s}function Li(t,e,i,n,r,o){if(0===i.length)return!1;if(!Ai(t,e,i[0],n,r,o))return!1;for(var s=1,a=i.length;s<a;++s)if(Ai(t,i[s-1],i[s],n,r,o))return!1;return!0}function bi(t,e,i,r,o,s,a){for(var l,h,u,c,p,f,d,g=o[s+1],y=[],_=0,v=i.length;_<v;++_){var m=i[_];for(c=t[m-r],f=t[m-r+1],l=e;l<m;l+=r)p=t[l],d=t[l+1],(g<=f&&d<=g||f<=g&&g<=d)&&(u=(g-f)/(d-f)*(p-c)+c,y.push(u)),c=p,f=d}var M=NaN,x=-1/0;for(y.sort(n),c=y[0],l=1,h=y.length;l<h;++l){p=y[l];var T=Math.abs(p-c);T>x&&Li(t,e,i,r,u=(c+p)/2,g)&&(M=u,x=T),c=p}return isNaN(M)&&(M=o[s]),a?(a.push(M,g,x),a):[M,g,x]}function ki(t,e,i,n,r){for(var o,s=[t[e],t[e+1]],a=[];e+n<i;e+=n){if(a[0]=t[e+n],a[1]=t[e+n+1],o=r(s,a))return o;s[0]=a[0],s[1]=a[1]}return!1}function Pi(t,e,i,n,r){var o=Yt([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!Jt(r,o)&&(!!At(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]||ki(t,e,i,n,(function(t,e){return function(t,e,i){var n=!1,r=bt(t,e),o=bt(t,i);if(1===r||1===o)n=!0;else{var s=t[0],a=t[1],l=t[2],h=t[3],u=e[0],c=e[1],p=i[0],f=i[1],d=(f-c)/(p-u),g=void 0,y=void 0;2&o&&!(2&r)&&(n=(g=p-(f-h)/d)>=s&&g<=l),n||!(4&o)||4&r||(n=(y=f-(p-l)*d)>=a&&y<=h),n||!(8&o)||8&r||(n=(g=p-(f-a)/d)>=s&&g<=l),n||!(16&o)||16&r||(n=(y=f-(p-s)*d)>=a&&y<=h)}return n}(r,t,e)})))}function Ri(t,e,i,n,r){if(!function(t,e,i,n,r){return!!(Pi(t,e,i,n,r)||Ai(t,e,i,n,r[0],r[1])||Ai(t,e,i,n,r[0],r[3])||Ai(t,e,i,n,r[2],r[1])||Ai(t,e,i,n,r[2],r[3]))}(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(var o=1,s=i.length;o<s;++o)if(Ei(t,i[o-1],i[o],n,r)&&!Pi(t,i[o-1],i[o],n,r))return!1;return!0}function Fi(t,e,i,n){for(;e<i-n;){for(var r=0;r<n;++r){var o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function Yi(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],l=t[e+1];r+=(a-o)*(l+s),o=a,s=l}return 0===r?void 0:r>0}function Gi(t,e,i,n,r){for(var o=void 0!==r&&r,s=0,a=i.length;s<a;++s){var l=i[s],h=Yi(t,e,l,n);if(0===s){if(o&&h||!o&&!h)return!1}else if(o&&!h||!o&&h)return!1;e=l}return!0}function Ui(t,e,i,n,r){for(var o=void 0!==r&&r,s=0,a=i.length;s<a;++s){var l=i[s],h=Yi(t,e,l,n);(0===s?o&&h||!o&&!h:o&&!h||!o&&h)&&Fi(t,e,l,n),e=l}return e}function Wi(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o)e=Ui(t,e,i[o],n,r);return e}var Qi,Bi,Xi=(Bi=function(t,e){return(Bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Bi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Zi=function(t){function e(e,i,n){var r=t.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==i&&n?(r.setFlatCoordinates(i,e),r.ends_=n):r.setCoordinates(e,i),r}return Xi(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?p(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ci(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fi(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Li(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Ci(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Ui(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Ti(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Bt(this.getExtent());this.flatInteriorPoint_=bi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new zi(this.getFlatInteriorPoint(),re)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Si(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o],l=new Si(e.slice(r,a),t);n.push(l),r=a}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Gi(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ui(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Mi(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,ne,n)},e.prototype.getType=function(){return he},e.prototype.intersectsExtent=function(t){return Ri(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=yi(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(ai),Hi="arraybuffer",Vi=(Qi=function(t,e){return(Qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Qi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ji=function(t){function e(e,i,n){var r=t.call(this)||this;if(void 0!==n&&void 0===i)r.setFlatCoordinates(n,e);else{var o=i||0;r.setCenterAndRadius(e,o,n)}return r}return Vi(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<n){if(0===a)for(var l=0;l<this.stride;++l)i[l]=r[l];else{var h=this.getRadius()/Math.sqrt(a);for(i[0]=r[0]+h*o,i[1]=r[1]+h*s,l=2;l<this.stride;++l)i[l]=r[l]}return i.length=this.stride,a}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return kt(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return de},e.prototype.intersectsExtent=function(t){if(Jt(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||Ut(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var r=1;r<e;++r)n[e+r]=t[r];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,r=di(n,0,t,this.stride);n[r++]=n[0]+e;for(var o=1,s=this.stride;o<s;++o)n[r++]=n[o];n.length=r,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter($e(i,0,i.length,n,t,e,i)),this.changed()},e.prototype.translate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter(ti(i,0,i.length,n,t,e,i)),this.changed()},e}(ai);Ji.prototype.transform;var qi,Ki=(qi=function(t,e){return(qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}qi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),$i=function(t){function e(e){var i=t.call(this)||this;if(i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener(G(i.geometryName_),i.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;i.setGeometry(n)}else{var r=e;i.setProperties(r)}return i}return Ki(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(j(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=D(t,w,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(Dt("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(G(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(G(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(F);function tn(t,e,i,r,o,s,a){var l,h,u=(i-e)/r;if(1===u)l=e;else if(2===u)l=e,h=o;else if(0!==u){for(var c=t[e],p=t[e+1],f=0,d=[0],g=e+r;g<i;g+=r){var y=t[g],_=t[g+1];f+=Math.sqrt((y-c)*(y-c)+(_-p)*(_-p)),d.push(f),c=y,p=_}var v=o*f,m=function(t,e,i){for(var r,o,s=n,a=0,l=t.length,h=!1;a<l;)(o=+s(t[r=a+(l-a>>1)],e))<0?a=r+1:(l=r,h=!o);return h?a:~a}(d,v);m<0?(h=(v-d[-m-2])/(d[-m-1]-d[-m-2]),l=e+(-m-2)*r):l=e+m*r}var M=a>1?a:2,x=s||new Array(M);for(g=0;g<M;++g)x[g]=void 0===l?NaN:void 0===h?t[l+g]:ie(t[l+g],t[l+r+g],h);return x}function en(t,e,i,n,r,o){if(i==e)return null;var s;if(r<t[e+n-1])return o?((s=t.slice(e,e+n))[n-1]=r,s):null;if(t[i-1]<r)return o?((s=t.slice(i-n,i))[n-1]=r,s):null;if(r==t[e+n-1])return t.slice(e,e+n);for(var a=e/n,l=i/n;a<l;){var h=a+l>>1;r<t[(h+1)*n-1]?l=h:a=h+1}var u=t[a*n-1];if(r==u)return t.slice((a-1)*n,(a-1)*n+n);var c=(r-u)/(t[(a+1)*n-1]-u);s=[];for(var p=0;p<n-1;++p)s.push(ie(t[(a-1)*n+p],t[a*n+p],c));return s.push(r),s}function nn(t,e,i,n){for(var r=t[e],o=t[e+1],s=0,a=e+n;a<i;a+=n){var l=t[a],h=t[a+1];s+=Math.sqrt((l-r)*(l-r)+(h-o)*(h-o)),r=l,o=h}return s}var rn,on,sn,an,ln,hn,un,cn,pn=(ln=function(t,e){return(ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ln(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),fn=function(t){function e(e,i){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return pn(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?p(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ui(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return ki(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=re&&this.layout!=oe)return null;var i=void 0!==e&&e;return en(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return xi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return tn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return nn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=_i(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,ne)},e.prototype.getType=function(){return ae},e.prototype.intersectsExtent=function(t){return Pi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gi(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ai),dn=(an=function(t,e){return(an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}an(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),gn=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.map=i,r.frameState=void 0!==n?n:null,r}return dn(e,t),e}(t),yn=(sn=function(t,e){return(sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}sn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),_n=function(t){function e(e,i,n,r,o){var s=t.call(this,e,i,o)||this;return s.originalEvent=n,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==r&&r,s}return yn(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(gn),vn=(on=function(t,e){return(on=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}on(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),mn=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(e[0]))r.setCoordinates(e,i);else if(void 0!==i&&n)r.setFlatCoordinates(i,e),r.ends_=n;else{for(var o=r.getLayout(),s=e,a=[],l=[],h=0,u=s.length;h<u;++h){var c=s[h];0===h&&(o=c.getLayout()),p(a,c.getFlatCoordinates()),l.push(a.length)}r.setFlatCoordinates(o,a),r.ends_=l}return r}return vn(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?p(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ci(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fi(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=re&&this.layout!=oe||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,r=void 0!==i&&i;return function(t,e,i,n,r,o,s){if(s)return en(t,e,i[i.length-1],n,r,o);var a;if(r<t[n-1])return o?((a=t.slice(0,n))[n-1]=r,a):null;if(t[t.length-1]<r)return o?((a=t.slice(t.length-n))[n-1]=r,a):null;for(var l=0,h=i.length;l<h;++l){var u=i[l];if(e!=u){if(r<t[e+n-1])return null;if(r<=t[u-1])return en(t,e,u,n,r,!1);e=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,r)},e.prototype.getCoordinates=function(){return Ti(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new fn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,o=0,s=e.length;o<s;++o){var a=e[o],l=new fn(t.slice(r,a),i);n.push(l),r=a}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,r=this.stride,o=0,s=n.length;o<s;++o){var a=n[o];p(t,tn(e,i,a,r,.5)),i=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,o,s,a){for(var l=0,h=i.length;l<h;++l){var u=i[l];s=_i(t,e,u,n,r,o,s),a.push(s),e=u}return s}(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,ne,n)},e.prototype.getType=function(){return ce},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){if(Pi(t,e,i[o],n,r))return!0;e=i[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=yi(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(ai),Mn=(rn=function(t,e){return(rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}rn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),xn=function(t){function e(e,i){var n=t.call(this)||this;return i&&!Array.isArray(e[0])?n.setFlatCoordinates(i,e):n.setCoordinates(e,i),n}return Mn(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?p(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<zt(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,o=this.stride,s=0,a=r.length;s<a;s+=o){var l=te(t,e,r[s],r[s+1]);if(l<n){n=l;for(var h=0;h<o;++h)i[h]=r[s+h];i.length=o}}return n},e.prototype.getCoordinates=function(){return xi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new zi(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],r=0,o=t.length;r<o;r+=i){var s=new zi(t.slice(r,r+i),e);n.push(s)}return n},e.prototype.getType=function(){return ue},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,r=e.length;n<r;n+=i)if(Lt(t,e[n],e[n+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gi(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ai),Tn=(cn=function(t,e){return(cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}cn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),In=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=r.getLayout(),s=e,a=[],l=[],h=0,u=s.length;h<u;++h){var c=s[h];0===h&&(o=c.getLayout());for(var f=a.length,d=c.getEnds(),g=0,y=d.length;g<y;++g)d[g]+=f;p(a,c.getFlatCoordinates()),l.push(d)}i=o,e=a,n=l}return void 0!==i&&n?(r.setFlatCoordinates(i,e),r.endss_=n):r.setCoordinates(e,i),r}return Tn(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;p(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,r=(e=t.getEnds().slice()).length;n<r;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();var r=new e(this.flatCoordinates.slice(),this.layout,i);return r.applyProperties(this),r},e.prototype.closestPointXY=function(t,e,i,n){return n<zt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];r=ci(t,e,a,n,r),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,r,o,s,a,l,h,u){for(var c=[NaN,NaN],p=0,f=i.length;p<f;++p){var d=i[p];h=fi(t,e,d,n,r,!0,s,a,l,h,c),e=d[d.length-1]}return h}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,i,n))},e.prototype.containsXY=function(t,e){return function(t,e,i,n,r,o){if(0===i.length)return!1;for(var s=0,a=i.length;s<a;++s){var l=i[s];if(Li(t,e,l,n,r,o))return!0;e=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,n){for(var r=0,o=0,s=i.length;o<s;++o){var a=i[o];r+=Ci(t,e,a,n),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Wi(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Ii(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,i,n){for(var r=[],o=[1/0,1/0,-1/0,-1/0],s=0,a=i.length;s<a;++s){var l=i[s];o=Rt(t,e,l[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,i,n,r){for(var o=[],s=0,a=i.length;s<a;++s){var l=i[s];o=bi(t,e,l,n,r,2*s,o),e=l[l.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new xn(this.getFlatInteriorPoints().slice(),re)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];if(!Gi(t,e,a,n,void 0))return!1;a.length&&(e=a[a.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Wi(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,o,s,a){for(var l=0,h=i.length;l<h;++l){var u=i[l],c=[];s=Mi(t,e,u,n,r,o,s,c),a.push(c),e=u[u.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,ne,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var o=0,s=n.length;o<s;++o)n[o]-=e;return new Zi(this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o].slice(),l=a[a.length-1];if(0!==r)for(var h=0,u=a.length;h<u;++h)a[h]-=r;var c=new Zi(e.slice(r,l),t,a);n.push(c),r=l}return n},e.prototype.getType=function(){return pe},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];if(Ri(t,e,a,n,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(t,e,i,n,r){for(var o=r||[],s=0,a=0,l=i.length;a<l;++a){var h=yi(t,e,i[a],n,o[s]);o[s++]=h,e=h[h.length-1]}return o.length=s,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(ai),wn="opacity",Cn="visible",Dn="zIndex",On="maxResolution",jn="minResolution",Sn="maxZoom",Nn="minZoom",zn="source",En=(un=function(t,e){return(un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}un(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),An=function(t){function e(e){var i=t.call(this)||this,n=_({},e);return n[wn]=void 0!==e.opacity?e.opacity:1,Dt("number"==typeof n[wn],64),n[Cn]=void 0===e.visible||e.visible,n[Dn]=e.zIndex,n[On]=void 0!==e.maxResolution?e.maxResolution:1/0,n[jn]=void 0!==e.minResolution?e.minResolution:0,n[Nn]=void 0!==e.minZoom?e.minZoom:-1/0,n[Sn]=void 0!==e.maxZoom?e.maxZoom:1/0,i.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,i.setProperties(n),i.state_=null,i}return En(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=qt(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i?i:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return A()},e.prototype.getLayerStatesArray=function(t){return A()},e.prototype.getExtent=function(){return this.get("extent")},e.prototype.getMaxResolution=function(){return this.get(On)},e.prototype.getMinResolution=function(){return this.get(jn)},e.prototype.getMinZoom=function(){return this.get(Nn)},e.prototype.getMaxZoom=function(){return this.get(Sn)},e.prototype.getOpacity=function(){return this.get(wn)},e.prototype.getSourceState=function(){return A()},e.prototype.getVisible=function(){return this.get(Cn)},e.prototype.getZIndex=function(){return this.get(Dn)},e.prototype.setExtent=function(t){this.set("extent",t)},e.prototype.setMaxResolution=function(t){this.set(On,t)},e.prototype.setMinResolution=function(t){this.set(jn,t)},e.prototype.setMaxZoom=function(t){this.set(Sn,t)},e.prototype.setMinZoom=function(t){this.set(Nn,t)},e.prototype.setOpacity=function(t){Dt("number"==typeof t,64),this.set(wn,t)},e.prototype.setVisible=function(t){this.set(Cn,t)},e.prototype.setZIndex=function(t){this.set(Dn,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(F),Ln="ready",bn=(hn=function(t,e){return(hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}hn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),kn=function(t){function e(e){var i=this,n=_({},e);delete n.source,(i=t.call(this,n)||this).mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,e.render&&(i.render=e.render),e.map&&i.setMap(e.map),i.addEventListener(G(zn),i.handleSourcePropertyChange_);var r=e.source?e.source:null;return i.setSource(r),i}return bn(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(zn)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(j(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=D(t,w,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(j(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(j(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=D(t,"precompose",(function(t){var e=t.frameState.layerStatesArray,i=this.getLayerState(!1);Dt(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=D(this,w,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(zn,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(An);function Pn(t,e,i,n,r){!function t(e,i,n,r,o){for(;r>n;){if(r-n>600){var s=r-n+1,a=i-n+1,l=Math.log(s),h=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*h*(s-h)/s)*(a-s/2<0?-1:1);t(e,i,Math.max(n,Math.floor(i-a*h/s+u)),Math.min(r,Math.floor(i+(s-a)*h/s+u)),o)}var c=e[i],p=n,f=r;for(Rn(e,n,i),o(e[r],c)>0&&Rn(e,n,r);p<f;){for(Rn(e,p,f),p++,f--;o(e[p],c)<0;)p++;for(;o(e[f],c)>0;)f--}0===o(e[n],c)?Rn(e,n,f):Rn(e,++f,r),f<=i&&(n=f+1),i<=f&&(r=f-1)}}(t,e,i||0,n||t.length-1,r||Fn)}function Rn(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function Fn(t,e){return t<e?-1:t>e?1:0}var Yn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;h(this,t),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}return u(t,[{key:"all",value:function(){return this._all(this.data,[])}},{key:"search",value:function(t){var e=this.data,i=[];if(!qn(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?n(s):s;qn(t,a)&&(e.leaf?i.push(s):Jn(t,a)?this._all(s,i):r.push(s))}e=r.pop()}return i}},{key:"collides",value:function(t){var e=this.data;if(!qn(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r;if(qn(t,o)){if(e.leaf||Jn(t,o))return!0;i.push(r)}}e=i.pop()}return!1}},{key:"load",value:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}},{key:"insert",value:function(t){return t&&this._insert(t,this.data.height-1),this}},{key:"clear",value:function(){return this.data=Kn([]),this}},{key:"remove",value:function(t,e){if(!t)return this;for(var i,n,r,o=this.data,s=this.toBBox(t),a=[],l=[];o||a.length;){if(o||(o=a.pop(),n=a[a.length-1],i=l.pop(),r=!0),o.leaf){var h=Gn(t,o.children,e);if(-1!==h)return o.children.splice(h,1),a.push(o),this._condense(a),this}r||o.leaf||!Jn(o,s)?n?(i++,o=n.children[i],r=!1):o=null:(a.push(o),l.push(i),i=0,n=o,o=o.children[0])}return this}},{key:"toBBox",value:function(t){return t}},{key:"compareMinX",value:function(t,e){return t.minX-e.minX}},{key:"compareMinY",value:function(t,e){return t.minY-e.minY}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(t){return this.data=t,this}},{key:"_all",value:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,l(t.children)):i.push.apply(i,l(t.children)),t=i.pop();return e}},{key:"_build",value:function(t,e,i,n){var r,o=i-e+1,s=this._maxEntries;if(o<=s)return Un(r=Kn(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(r=Kn([])).leaf=!1,r.height=n;var a=Math.ceil(o/s),l=a*Math.ceil(Math.sqrt(s));$n(t,e,i,l,this.compareMinX);for(var h=e;h<=i;h+=l){var u=Math.min(h+l-1,i);$n(t,h,u,a,this.compareMinY);for(var c=h;c<=u;c+=a){var p=Math.min(c+a-1,u);r.children.push(this._build(t,c,p,n-1))}}return Un(r,this.toBBox),r}},{key:"_chooseSubtree",value:function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=void 0,o=1/0,s=1/0,a=0;a<e.children.length;a++){var l=e.children[a],h=Zn(l),u=(c=t,p=l,(Math.max(p.maxX,c.maxX)-Math.min(p.minX,c.minX))*(Math.max(p.maxY,c.maxY)-Math.min(p.minY,c.minY))-h);u<s?(s=u,o=h<o?h:o,r=l):u===s&&h<o&&(o=h,r=l)}e=r||e.children[0]}var c,p;return e}},{key:"_insert",value:function(t,e,i){var n=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(n,this.data,e,r);for(o.children.push(t),Qn(o,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)}},{key:"_split",value:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),s=Kn(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,Un(i,this.toBBox),Un(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)}},{key:"_splitRoot",value:function(t,e){this.data=Kn([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Un(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(t,e,i){for(var n,r=1/0,o=1/0,s=e;s<=i-e;s++){var a=Wn(t,0,s,this.toBBox),l=Wn(t,s,i,this.toBBox),h=Vn(a,l),u=Zn(a)+Zn(l);h<r?(r=h,n=s,o=u<o?u:o):h===r&&u<o&&(o=u,n=s)}return n||i-e}},{key:"_chooseSplitAxis",value:function(t,e,i){var n=t.leaf?this.compareMinX:Bn,r=t.leaf?this.compareMinY:Xn;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)}},{key:"_allDistMargin",value:function(t,e,i,n){t.children.sort(n);for(var r=this.toBBox,o=Wn(t,0,e,r),s=Wn(t,i-e,i,r),a=Hn(o)+Hn(s),l=e;l<i-e;l++){var h=t.children[l];Qn(o,t.leaf?r(h):h),a+=Hn(o)}for(var u=i-e-1;u>=e;u--){var c=t.children[u];Qn(s,t.leaf?r(c):c),a+=Hn(s)}return a}},{key:"_adjustParentBBoxes",value:function(t,e,i){for(var n=i;n>=0;n--)Qn(e[n],t)}},{key:"_condense",value:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():Un(t[i],this.toBBox)}}]),t}();function Gn(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function Un(t,e){Wn(t,0,t.children.length,e,t)}function Wn(t,e,i,n,r){r||(r=Kn(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<i;o++){var s=t.children[o];Qn(r,t.leaf?n(s):s)}return r}function Qn(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Bn(t,e){return t.minX-e.minX}function Xn(t,e){return t.minY-e.minY}function Zn(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Hn(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Vn(t,e){var i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,o-n)}function Jn(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function qn(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Kn(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function $n(t,e,i,n,r){for(var o=[e,i];o.length;)if(!((i=o.pop())-(e=o.pop())<=n)){var s=e+Math.ceil((i-e)/n/2)*n;Pn(t,s,e,i,r),o.push(e,s,s,i)}}function tr(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var er=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=tr(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return A()},t.prototype.getImage=function(t){return A()},t.prototype.getHitDetectionImage=function(){return A()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return A()},t.prototype.getImageSize=function(){return A()},t.prototype.getHitDetectionImageSize=function(){return A()},t.prototype.getOrigin=function(){return A()},t.prototype.getSize=function(){return A()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=tr(t)},t.prototype.listenImageChange=function(t){A()},t.prototype.load=function(){A()},t.prototype.unlistenImageChange=function(t){A()},t}(),ir=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,nr=/^([a-z]*)$|^hsla?\(.*\)$/i;function rr(t){return"string"==typeof t?t:lr(t)}var or=function(){var t={},e=0;return function(i){var n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){var r=0;for(var o in t)0==(3&r++)&&(delete t[o],--e)}n=function(t){var e,i,n,r,o;if(nr.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t)),ir.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var l=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),n=parseInt(t.substr(1+2*s,s),16),r=l?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,l&&(r=(r<<4)+r)),o=[e,i,n,r/255]}else 0==t.indexOf("rgba(")?ar(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),ar(o)):Dt(!1,14);return o}(i),t[i]=n,++e}return n}}();function sr(t){return Array.isArray(t)?t:or(t)}function ar(t){return t[0]=qt(t[0]+.5|0,0,255),t[1]=qt(t[1]+.5|0,0,255),t[2]=qt(t[2]+.5|0,0,255),t[3]=qt(t[3],0,1),t}function lr(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}function hr(t){return Array.isArray(t)?lr(t):t}var ur="10px sans-serif",cr="#000",pr="round",fr=[],dr="round",gr="#000",yr="center",_r="middle",vr=[0,0,0,0],mr=new F;(new I).setSize=function(){console.warn("labelCache is deprecated.")};var Mr,xr,Tr=null,Ir={},wr=function(){var t,e,i="32px ",n=["monospace","serif"],r=n.length,o="wmytzilWMYTZIL@#/&?$%10";function s(t,s,a){for(var l=!0,h=0;h<r;++h){var u=n[h];if(e=Dr(t+" "+s+" "+i+u,o),a!=u){var c=Dr(t+" "+s+" "+i+a+","+u,o);l=l&&c!=e}}return!!l}function a(){for(var e=!0,i=mr.getKeys(),n=0,r=i.length;n<r;++n){var o=i[n];mr.get(o)<100&&(s.apply(this,o.split("\n"))?(v(Ir),Tr=null,Mr=void 0,mr.set(o,100)):(mr.set(o,mr.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var i=et(e);if(i)for(var n=i.families,r=0,o=n.length;r<o;++r){var l=n[r],h=i.style+"\n"+i.weight+"\n"+l;void 0===mr.get(h)&&(mr.set(h,100,!0),s(i.style,i.weight,l)||(mr.set(h,0,!0),void 0===t&&(t=setInterval(a,32))))}}}();function Cr(t,e){return Tr||(Tr=X(1,1)),t!=Mr&&(Tr.font=t,Mr=Tr.font),Tr.measureText(e)}function Dr(t,e){return Cr(t,e).width}function Or(t,e,i){if(e in i)return i[e];var n=Dr(t,e);return i[e]=n,n}function jr(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}var Sr,Nr,zr=(Nr=function(t,e){return(Nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Nr(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Er=function(t){function e(e){var i=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_={},i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return zr(e,t),e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionCanvas_){var t=this.createRenderOptions();this.createHitDetectionCanvas_(t)}return this.hitDetectionCanvas_},e.prototype.getImage=function(t){if(!this.canvas_[t||1]){var e=this.createRenderOptions(),i=X(e.size*t||1,e.size*t||1);this.draw_(e,i,0,0,t||1),this.canvas_[t||1]=i.canvas}return this.canvas_[t||1]},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return 2},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.createRenderOptions=function(){var t,e=pr,i=dr,n=0,r=null,o=0,s=0;return this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=gr),t=hr(t),void 0===(s=this.stroke_.getWidth())&&(s=1),r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i=dr),void 0===(e=this.stroke_.getLineCap())&&(e=pr),void 0===(n=this.stroke_.getMiterLimit())&&(n=10)),{strokeStyle:t,strokeWidth:s,size:2*(this.radius_+s)+1,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:i,miterLimit:n}},e.prototype.render=function(){var t=this.createRenderOptions(),e=X(t.size,t.size);this.draw_(t,e,0,0,1),this.canvas_={},this.canvas_[1]=e.canvas;var i=e.canvas.width,n=i,r=this.getDisplacement();this.hitDetectionImageSize_=[t.size,t.size],this.createHitDetectionCanvas_(t),this.anchor_=[i/2-r[0],i/2+r[1]],this.size_=[i,i],this.imageSize_=[n,n]},e.prototype.draw_=function(t,e,i,n,r){var o,s,a;e.setTransform(r,0,0,r,0,0),e.translate(i,n),e.beginPath();var l=this.points_;if(l===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(l*=2),o=0;o<=l;o++)s=2*o*Math.PI/l-Math.PI/2+this.angle_,a=o%2==0?this.radius_:h,e.lineTo(t.size/2+a*Math.cos(s),t.size/2+a*Math.sin(s))}if(this.fill_){var u=this.fill_.getColor();null===u&&(u=cr),e.fillStyle=hr(u),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){var e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=sr(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var n=X(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.translate(i,n),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(r*=2);var s=void 0,a=void 0,l=void 0;for(s=0;s<=r;s++)l=2*s*Math.PI/r-Math.PI/2+this.angle_,a=s%2==0?this.radius_:o,e.lineTo(t.size/2+a*Math.cos(l),t.size/2+a*Math.sin(l))}e.fillStyle=cr,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(er),Ar=(Sr=function(t,e){return(Sr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Sr(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Lr=function(t){function e(e){var i=e||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return Ar(e,t),e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Er),br=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),kr=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),Pr=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Gr,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==c(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Gr,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}(),Rr=null;function Fr(t,e){if(!Rr){var i=new br({color:"rgba(255,255,255,0.4)"}),n=new kr({color:"#3399CC",width:1.25});Rr=[new Pr({image:new Lr({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return Rr}function Yr(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[he]=[new Pr({fill:new br({color:[255,255,255,.5]})})],t[pe]=t[he],t[ae]=[new Pr({stroke:new kr({color:e,width:5})}),new Pr({stroke:new kr({color:i,width:3})})],t[ce]=t[ae],t[de]=t[he].concat(t[ae]),t[se]=[new Pr({image:new Lr({radius:6,fill:new br({color:i}),stroke:new kr({color:e,width:1.5})}),zIndex:1/0})],t[ue]=t[se],t[fe]=t[he].concat(t[ae],t[se]),t}function Gr(t){return t.getGeometry()}var Ur,Wr,Qr,Br,Xr,Zr=(Xr=function(t,e){return(Xr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Xr(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Hr="renderOrder",Vr=function(t){function e(e){var i=this,n=e||{},r=_({},n);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(i=t.call(this,r)||this).declutter_=void 0!==n.declutter&&n.declutter,i.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,i.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,i}return Zr(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Hr)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new Yn(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(Hr,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Fr,this.styleFunction_=null===t?void 0:function(t){var e,i;"function"==typeof t?e=t:(Array.isArray(t)?i=t:(Dt("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i});return e}(this.style_),this.changed()},e}(kn),Jr=[8],qr=[12],Kr=[1],$r=[3],to=function(){function t(){}return t.prototype.drawCustom=function(t,e,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),eo=(Br=function(t,e){return(Br=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Br(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),io=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return eo(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates,o=r.length,s=0,a=t.length;s<a;s+=e)n[0]=t[s],n[1]=t[s+1],Et(i,n)&&(r[o++]=n[0],r[o++]=n[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,e,i,n,r,o){var s=this.coordinates,a=s.length,l=this.getBufferedMaxExtent();o&&(e+=n);var h,u,c,p=t[e],f=t[e+1],d=this.tmpCoordinate_,g=!0;for(h=e+n;h<i;h+=n)d[0]=t[h],d[1]=t[h+1],(c=bt(l,d))!==u?(g&&(s[a++]=p,s[a++]=f,g=!1),s[a++]=d[0],s[a++]=d[1]):1===c?(s[a++]=d[0],s[a++]=d[1],g=!1):g=!0,p=d[0],f=d[1],u=c;return(r&&g||h===e+n)&&(s[a++]=p,s[a++]=f),a},e.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],l=this.appendFlatLineCoordinates(t,e,a,n,!1,!1);r.push(l),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,r,o,s,a,l=t.getType(),h=t.getStride(),u=this.coordinates.length;if(l==pe){n=t.getOrientedFlatCoordinates(),s=[];var c=t.getEndss();a=0;for(var p=0,f=c.length;p<f;++p){var d=[];a=this.drawCustomCoordinates_(n,a,c[p],h,d),s.push(d)}this.instructions.push([4,u,s,t,i,Ii])}else l==he||l==ce?(o=[],n=l==he?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(n,0,t.getEnds(),h,o),this.instructions.push([4,u,o,t,i,Ti])):l==ae||l==de?(n=t.getFlatCoordinates(),r=this.appendFlatLineCoordinates(n,0,n.length,h,!1,!1),this.instructions.push([4,u,r,t,i,xi])):l==ue?(n=t.getFlatCoordinates(),(r=this.appendFlatPointCoordinates(n,h))>u&&this.instructions.push([4,u,r,t,i,xi])):l==se&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),r=this.coordinates.length,this.instructions.push([4,u,r,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[0,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[0,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,o=e.length,s=-1;for(t=0;t<o;++t)7==(n=(i=e[t])[0])?s=t:0==n&&(i[2]=t,r(this.hitDetectionInstructions,s,t),s=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=hr(n||cr)}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=hr(r||gr);var o=e.getLineCap();i.lineCap=void 0!==o?o:pr;var s=e.getLineDash();i.lineDash=s?s.slice():fr;var a=e.getLineDashOffset();i.lineDashOffset=a||0;var l=e.getLineJoin();i.lineJoin=void 0!==l?l:dr;var h=e.getWidth();i.lineWidth=void 0!==h?h:1;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[10,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[11,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!f(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[7,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=this.maxExtent.slice(),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Nt(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(to),no=(Qr=function(t,e){return(Qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Qr(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ro=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return no(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([6,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([6,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([6,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([6,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterImageWithText_=e},e}(io),oo=(Wr=function(t,e){return(Wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Wr(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),so=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return oo(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=[9,this.coordinates.length,this.appendFlatLineCoordinates(t,e,i,n,!1,!1)];return this.instructions.push(r),this.hitDetectionInstructions.push(r),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Kr);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(qr),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Kr);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),l=0,h=0,u=o.length;h<u;++h)l=this.drawFlatCoordinates_(s,l,o[h],a);this.hitDetectionInstructions.push(qr),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(qr),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(qr),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Kr)},e}(io),ao=(Ur=function(t,e){return(Ur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Ur(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),lo=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return ao(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,s=void 0!==r.strokeStyle,a=i.length;this.instructions.push(Kr),this.hitDetectionInstructions.push(Kr);for(var l=0;l<a;++l){var h=i[l],u=[9,this.coordinates.length,this.appendFlatLineCoordinates(t,e,h,n,!0,!s)];this.instructions.push(u),this.hitDetectionInstructions.push(u),s&&(this.instructions.push($r),this.hitDetectionInstructions.push($r)),e=h}return o&&(this.instructions.push(Jr),this.hitDetectionInstructions.push(Jr)),s&&(this.instructions.push(qr),this.hitDetectionInstructions.push(qr)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([10,cr]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);var l=[2,a];this.instructions.push(Kr,l),this.hitDetectionInstructions.push(Kr,l),void 0!==i.fillStyle&&(this.instructions.push(Jr),this.hitDetectionInstructions.push(Jr)),void 0!==i.strokeStyle&&(this.instructions.push(qr),this.hitDetectionInstructions.push(qr)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([10,cr]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([10,cr]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),l=0,h=0,u=o.length;h<u;++h)l=this.drawFlatCoordinatess_(s,l,o[h],a);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,r=i.length;n<r;++n)i[n]=vi(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(io);function ho(t,e,i,n,r){var o,s,a,l,h,u,c,p,f,d=i,g=i,y=0,_=0,v=i;for(o=i;o<n;o+=r){var m=e[o],M=e[o+1];void 0!==l&&(p=m-l,f=M-h,a=Math.sqrt(p*p+f*f),void 0!==u&&(_+=s,Math.acos((u*p+c*f)/(s*a))>t&&(_>y&&(y=_,d=v,g=o),_=0,v=o-r)),s=a,u=p,c=f),l=m,h=M}return(_+=a)>y?[v,o]:[d,g]}var uo,co,po,fo,go=(fo=function(t,e){return(fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}fo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),yo={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},_o={Circle:lo,Default:io,Image:ro,LineString:so,Polygon:lo,Text:function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return go(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var o=this.coordinates,s=o.length,a=t.getType(),l=null,h=t.getStride();if("line"!==r.placement||a!=ae&&a!=ce&&a!=he&&a!=pe){var u=r.overflow?null:[];switch(a){case se:case ue:l=t.getFlatCoordinates();break;case ae:l=t.getFlatMidpoint();break;case de:l=t.getCenter();break;case ce:l=t.getFlatMidpoints(),h=2;break;case he:l=t.getFlatInteriorPoint(),r.overflow||u.push(l[2]/this.resolution),h=3;break;case pe:var c=t.getFlatInteriorPoints();for(l=[],x=0,T=c.length;x<T;x+=3)r.overflow||u.push(c[x+2]/this.resolution),l.push(c[x],c[x+1]);if(0===l.length)return;h=2}if((S=this.appendFlatPointCoordinates(l,h))===s)return;this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var p=r.padding;if(p!=vr&&(r.scale[0]<0||r.scale[1]<0)){var f=r.padding[0],d=r.padding[1],g=r.padding[2],y=r.padding[3];r.scale[0]<0&&(d=-d,y=-y),r.scale[1]<0&&(f=-f,g=-g),p=[f,d,g,y]}var _=this.pixelRatio;this.instructions.push([6,s,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,p==vr?vr:p.map((function(t){return t*_})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);var v=1/_;this.hitDetectionInstructions.push([6,s,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterImageWithText_,p,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),this.endGeometry(e)}else{if(!Jt(this.getBufferedMaxExtent(),t.getExtent()))return;var m=void 0;if(l=t.getFlatCoordinates(),a==ae)m=[l.length];else if(a==ce)m=t.getEnds();else if(a==he)m=t.getEnds().slice(0,1);else if(a==pe){var M=t.getEndss();m=[];for(var x=0,T=M.length;x<T;++x)m.push(M[x][0])}this.beginGeometry(t,e);for(var I=r.textAlign,w=0,C=void 0,D=0,O=m.length;D<O;++D){if(null==I){var j=ho(r.maxAngle,l,w,m[D],h);w=j[0],C=j[1]}else C=m[D];for(x=w;x<C;x+=h)o.push(l[x],l[x+1]);var S=o.length;w=m[D],this.drawChars_(s,S),s=S}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||yr,textBaseline:e.textBaseline||_r,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e){var i=this.textStrokeState_,n=this.textState_,r=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();var a=this.pixelRatio,l=yo[n.textBaseline],h=this.textOffsetY_*a,u=this.text_,c=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([5,t,e,l,n.overflow,s,n.maxAngle,a,h,r,c*a,u,o,1]),this.hitDetectionInstructions.push([5,t,e,l,n.overflow,s,n.maxAngle,1,h,r,c,u,o,1/a])},e.prototype.setTextStyle=function(t,e){var i,n,r;if(t){var o=t.getFill();o?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=hr(o.getColor()||cr)):(n=null,this.textFillState_=n);var s=t.getStroke();if(s){(r=this.textStrokeState_)||(r={},this.textStrokeState_=r);var a=s.getLineDash(),l=s.getLineDashOffset(),h=s.getWidth(),u=s.getMiterLimit();r.lineCap=s.getLineCap()||pr,r.lineDash=a?a.slice():fr,r.lineDashOffset=void 0===l?0:l,r.lineJoin=s.getLineJoin()||dr,r.lineWidth=void 0===h?1:h,r.miterLimit=void 0===u?10:u,r.strokeStyle=hr(s.getColor()||gr)}else r=null,this.textStrokeState_=r;i=this.textState_;var c=t.getFont()||ur;wr(c);var p=t.getScaleArray();i.overflow=t.getOverflow(),i.font=c,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||_r,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||vr,i.scale=void 0===p?[1,1]:p;var f=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===y?0:y,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:b(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+b(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(io)},vo=function(){function t(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var r=i[n].finish();t[e][n]=r}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var r=n[e];return void 0===r&&(r=new(0,_o[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r),r},t}(),mo=(po=function(t,e){return(po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}po(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Mo=function(t){function e(e){var i=t.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=e,i.declutterExecutorGroup=null,i}return mo(e,t),e.prototype.getFeatures=function(t){return A()},e.prototype.prepareFrame=function(t){return A()},e.prototype.renderFrame=function(t,e){return A()},e.prototype.loadedTileCallback=function(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,e,i){return function(n,r){var o=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,r,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){},e.prototype.getDataAtPixel=function(t,e,i){return A()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(w,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Ln&&t.changed()},e}(z),xo=(co=function(t,e){return(co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}co(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),To=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.inversePixelTransform=i,o.frameState=n,o.context=r,o}return xo(e,t),e}(t),Io=(uo=function(t,e){return(uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}uo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),wo=function(t){function e(e){var i=t.call(this,e)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i}return Io(e,t),e.prototype.useContainer=function(t,e,i){var n,r,o=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===o&&(a=t.firstElementChild)instanceof HTMLCanvasElement&&(r=a.getContext("2d")),!r||0!==r.canvas.width&&r.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=r,this.containerReused=!0),!this.container){(n=document.createElement("div")).className=o;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var a=(r=X()).canvas;n.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=r}},e.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n/2,o=e.size[1]*n/2,s=e.viewState.rotation,a=Zt(i),l=Ht(i),h=Qt(i),u=Wt(i);_e(e.coordinateToPixelTransform,a),_e(e.coordinateToPixelTransform,l),_e(e.coordinateToPixelTransform,h),_e(e.coordinateToPixelTransform,u),t.save(),jr(t,-s,r,o),t.beginPath(),t.moveTo(a[0]*n,a[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(u[0]*n,u[1]*n),t.clip(),jr(t,s,r,o)},e.prototype.clipUnrotated=function(t,e,i){var n=Zt(i),r=Ht(i),o=Qt(i),s=Wt(i);_e(e.coordinateToPixelTransform,n),_e(e.coordinateToPixelTransform,r),_e(e.coordinateToPixelTransform,o),_e(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;_e(a,n),_e(a,r),_e(a,o),_e(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,i){var n=this.getLayer();if(n.hasListener(t)){var r=new To(t,this.inversePixelTransform,i,e);n.dispatchEvent(r)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,i,n,r,o,s){var a=r/2,l=o/2,h=n/e,u=-h,c=-t[0]+s,p=-t[1];return ve(this.tempTransform,a,l,h,u,-i,c,p)},e.prototype.getDataAtPixel=function(t,e,i){var n,r=_e(this.inversePixelTransform,t.slice()),o=this.context,s=this.getLayer().getExtent();if(s&&!Et(s,_e(e.pixelToCoordinateTransform,t.slice())))return null;try{var a=Math.round(r[0]),l=Math.round(r[1]),h=document.createElement("canvas"),u=h.getContext("2d");h.width=1,h.height=1,u.clearRect(0,0,1,1),u.drawImage(o.canvas,a,l,1,1,0,0,1,1),n=u.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(Mo),Co="Default",Do="Image",Oo="LineString",jo="Polygon",So="Text";function No(t,e,i,n,r,o,s,a,l,h,u,c){var p=t[e],f=t[e+1],d=0,g=0,y=0,_=0;function v(){d=p,g=f,p=t[e+=n],f=t[e+1],_+=y,y=Math.sqrt((p-d)*(p-d)+(f-g)*(f-g))}do{v()}while(e<i-n&&_+y<o);for(var m=(o-_)/y,M=ie(d,p,m),x=ie(g,f,m),T=e-n,I=_,w=o+a*l(h,r,u);e<i-n&&_+y<w;)v();var C,D=ie(d,p,m=(w-_)/y),O=ie(g,f,m);if(c){var j=[M,x,D,O];$e(j,0,4,2,c,j,j),C=j[0]>j[2]}else C=M>D;var S,N=Math.PI,z=[],E=T+n===e;if(y=0,_=I,p=t[e=T],f=t[e+1],E){v();var A=Math.atan2(f-g,p-d);C&&(A+=A>0?-N:N);var L=(D+M)/2,b=(O+x)/2;return z[0]=[L,b,(w-o)/2,A,r],z}for(var k=0,P=r.length;k<P;){v();var R=Math.atan2(f-g,p-d);if(C&&(R+=R>0?-N:N),void 0!==S){var F=R-S;if(F+=F>N?-2*N:F<-N?2*N:0,Math.abs(F)>s)return null}S=R;for(var Y=k,G=0;k<P;++k){var U=a*l(h,r[C?P-k-1:k],u);if(e+n<i&&_+y<o+G+U/2)break;G+=U}if(k!==Y){var W=C?r.substring(P-Y,P-k):r.substring(Y,k);L=ie(d,p,m=(o+G/2-_)/y),b=ie(g,f,m),z.push([L,b,G/2,R,W]),o+=G}}return z}var zo=[1/0,1/0,-1/0,-1/0],Eo=[],Ao=[],Lo=[],bo=[];function ko(t){return t[3].declutterBox}var Po=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Ro(t,e){return"start"!==e&&"end"!==e||Po.test(t)||(e="start"===e?"left":"right"),yo[e]}var Fo,Yo=function(){function t(t,e,i,n,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderBuffer_=r,this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var r=t+e+i+n;if(this.labels_[r])return this.labels_[r];var o=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],l=this.pixelRatio,h=[a.scale[0]*l,a.scale[1]*l],u=Ro(t,a.textAlign||yr),c=n&&o.lineWidth?o.lineWidth:0,p=t.split("\n"),f=p.length,d=[],g=function(t,e,i){for(var n=e.length,r=0,o=0;o<n;++o){var s=Dr(t,e[o]);r=Math.max(r,s),i.push(s)}return r}(a.font,p,d),y=function(t){var e=Ir[t];if(null==e){if(Q){var i=et(t),n=Cr(t,"g");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else xr||((xr=document.createElement("div")).innerHTML="M",xr.style.margin="0 !important",xr.style.padding="0 !important",xr.style.position="absolute !important",xr.style.left="-99999px !important"),xr.style.font=t,document.body.appendChild(xr),e=xr.offsetHeight,document.body.removeChild(xr);Ir[t]=e}return e}(a.font),_=g+c,v=[],m=(_+2)*h[0],M=(y*f+c)*h[1],x={width:m<0?Math.floor(m):Math.ceil(m),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:v};1==h[0]&&1==h[1]||v.push("scale",h),v.push("font",a.font),n&&(v.push("strokeStyle",o.strokeStyle),v.push("lineWidth",c),v.push("lineCap",o.lineCap),v.push("lineJoin",o.lineJoin),v.push("miterLimit",o.miterLimit),(Q?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(v.push("setLineDash",[o.lineDash]),v.push("lineDashOffset",o.lineDashOffset))),i&&v.push("fillStyle",s.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");var T,I=.5-u,w=u*_+I*c;if(n)for(T=0;T<f;++T)v.push("strokeText",[p[T],w+I*d[T],.5*(c+y)+T*y]);if(i)for(T=0;T<f;++T)v.push("fillText",[p[T],w+I*d[T],.5*(c+y)+T*y]);return this.labels_[r]=x,x},t.prototype.replayTextBackground_=function(t,e,i,n,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,i,n,r,o,s,a,l,h,u,c,p,f,d,g){var y,_=i-(s*=c[0]),v=n-(a*=c[1]),m=r+l>t?t-l:r,M=o+h>e?e-h:o,x=f[3]+m*c[0]+f[1],T=f[0]+M*c[1]+f[2],I=_-f[3],w=v-f[0];return(d||0!==u)&&(Eo[0]=I,bo[0]=I,Eo[1]=w,Ao[1]=w,Ao[0]=I+x,Lo[0]=Ao[0],Lo[1]=w+T,bo[1]=Lo[1]),0!==u?(_e(y=ve([1,0,0,1,0,0],i,n,1,1,u,-i,-n),Eo),_e(y,Ao),_e(y,Lo),_e(y,bo),kt(Math.min(Eo[0],Ao[0],Lo[0],bo[0]),Math.min(Eo[1],Ao[1],Lo[1],bo[1]),Math.max(Eo[0],Ao[0],Lo[0],bo[0]),Math.max(Eo[1],Ao[1],Lo[1],bo[1]),zo)):kt(Math.min(I,I+x),Math.min(w,w+T),Math.max(I,I+x),Math.max(w,w+T),zo),p&&(_=Math.round(_),v=Math.round(v)),{drawImageX:_,drawImageY:v,drawImageW:m,drawImageH:M,originX:l,originY:h,declutterBox:{minX:zo[0],minY:zo[1],maxX:zo[2],maxY:zo[3],value:g},canvasTransform:y,scale:c}},t.prototype.replayImageOrLabel_=function(t,e,i,n,r,o,s){var a=!(!o&&!s),l=n.declutterBox,h=t.canvas,u=s?s[2]*n.scale[0]/2:0;return l.minX-u<=h.width/e&&l.maxX+u>=0&&l.minY-u<=h.height/e&&l.maxY+u>=0&&(a&&this.replayTextBackground_(t,Eo,Ao,Lo,bo,o,s),function(t,e,i,n,r,o,s,a,l,h,u){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(l,h),t.scale(u[0],u[1]),function(t,e){for(var i=t.contextInstructions,n=0,r=i.length;n<r;n+=2)Array.isArray(i[n+1])?e[i[n]].apply(e,i[n+1]):e[i[n]]=i[n+1]}(n,t)):u[0]<0||u[1]<0?(t.translate(l,h),t.scale(u[0],u[1]),t.drawImage(n,r,o,s,a,0,0,s,a)):t.drawImage(n,r,o,s,a,l,h,s*u[0],a*u[1]),t.restore()}(t,n.canvasTransform,r,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=_e(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var r=this.textStates[e],o=this.createLabel(t,e,n,i),s=this.strokeStates[i],a=this.pixelRatio,l=Ro(t,r.textAlign||yr),h=yo[r.textBaseline||_r],u=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:l*(o.width/a-2*r.scale[0])+2*(.5-l)*u,anchorY:h*o.height/a+2*(.5-h)*u}},t.prototype.execute_=function(t,e,i,n,r,o,s,a){var l,h,u;this.pixelCoordinates_&&f(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=Ke(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),u=i,(h=this.renderedTransform_)[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5]);for(var c,p,d,g,y,_,v,m,M,x,T,I,w,C,D,O,j=0,S=n.length,N=0,z=0,E=0,A=null,L=null,b=this.coordinateCache_,k=this.viewRotation_,P=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,R={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},F=this.instructions!=n||this.overlaps?0:200;j<S;){var Y=n[j];switch(Y[0]){case 0:w=Y[1],O=Y[3],w.getGeometry()?void 0===s||Jt(s,O.getExtent())?++j:j=Y[2]+1:j=Y[2];break;case 1:z>F&&(this.fill_(t),z=0),E>F&&(t.stroke(),E=0),z||E||(t.beginPath(),g=NaN,y=NaN),++j;break;case 2:var G=l[N=Y[1]],U=l[N+1],W=l[N+2]-G,Q=l[N+3]-U,B=Math.sqrt(W*W+Q*Q);t.moveTo(G+B,U),t.arc(G,U,B,0,2*Math.PI,!0),++j;break;case 3:t.closePath(),++j;break;case 4:N=Y[1],c=Y[2];var X=Y[3],Z=Y[4],H=6==Y.length?Y[5]:void 0;R.geometry=X,R.feature=w,j in b||(b[j]=[]);var V=b[j];H?H(l,N,c,2,V):(V[0]=l[N],V[1]=l[N+1],V.length=2),Z(V,R),++j;break;case 6:N=Y[1],c=Y[2],m=Y[3],p=Y[4],d=Y[5];var J=Y[6],q=Y[7],K=Y[8],$=Y[9],tt=Y[10],et=Y[11],it=Y[12],nt=Y[13],rt=Y[14];if(!m&&Y.length>=19){M=Y[18],x=Y[19],T=Y[20],I=Y[21];var ot=this.drawLabelWithPointPlacement_(M,x,T,I);m=ot.label,Y[3]=m;var st=Y[22];p=(ot.anchorX-st)*this.pixelRatio,Y[4]=p;var at=Y[23];d=(ot.anchorY-at)*this.pixelRatio,Y[5]=d,J=m.height,Y[6]=J,nt=m.width,Y[13]=nt}var lt=void 0;Y.length>24&&(lt=Y[24]);var ht=void 0,ut=void 0,ct=void 0;Y.length>16?(ht=Y[15],ut=Y[16],ct=Y[17]):(ht=vr,ut=!1,ct=!1),tt&&P?et+=k:tt||P||(et-=k);for(var pt=0;N<c;N+=2)if(!(lt&&lt[pt++]<nt/this.pixelRatio)){var ft=[t,e,m,Ft=this.calculateImageOrLabelDimensions_(m.width,m.height,l[N],l[N+1],nt,J,p,d,K,$,et,it,r,ht,ut||ct,w),q,ut?A:null,ct?L:null],dt=void 0,gt=void 0;if(a&&rt){if(!rt[N]){rt[N]=ft;continue}if(dt=rt[N],delete rt[N],gt=ko(dt),a.collides(gt))continue}a&&a.collides(Ft.declutterBox)||(dt&&(a&&a.insert(gt),this.replayImageOrLabel_.apply(this,dt)),a&&a.insert(Ft.declutterBox),this.replayImageOrLabel_.apply(this,ft))}++j;break;case 5:var yt=Y[1],_t=Y[2],vt=Y[3],mt=Y[4];I=Y[5];var Mt=Y[6],xt=Y[7],Tt=Y[8];T=Y[9];var It=Y[10];M=Y[11],x=Y[12];var wt=[Y[13],Y[13]],Ct=this.textStates[x],Dt=Ct.font,Ot=[Ct.scale[0]*xt,Ct.scale[1]*xt],jt=void 0;Dt in this.widths_?jt=this.widths_[Dt]:(jt={},this.widths_[Dt]=jt);var St=nn(l,yt,_t,2),Nt=Math.abs(Ot[0])*Or(Dt,M,jt);if(mt||Nt<=St){var zt=this.textStates[x].textAlign,Et=No(l,yt,_t,2,M,(St-Nt)*yo[zt],Mt,Math.abs(Ot[0]),Or,Dt,jt,P?0:this.viewRotation_);t:if(Et){var At=[],Lt=void 0,bt=void 0,kt=void 0,Pt=void 0,Rt=void 0;if(T)for(Lt=0,bt=Et.length;Lt<bt;++Lt){kt=(Rt=Et[Lt])[4],Pt=this.createLabel(kt,x,"",T),p=Rt[2]+(Ot[0]<0?-It:It),d=vt*Pt.height+2*(.5-vt)*It*Ot[1]/Ot[0]-Tt;var Ft=this.calculateImageOrLabelDimensions_(Pt.width,Pt.height,Rt[0],Rt[1],Pt.width,Pt.height,p,d,0,0,Rt[3],wt,!1,vr,!1,w);if(a&&a.collides(Ft.declutterBox))break t;At.push([t,e,Pt,Ft,1,null,null])}if(I)for(Lt=0,bt=Et.length;Lt<bt;++Lt){if(kt=(Rt=Et[Lt])[4],Pt=this.createLabel(kt,x,I,""),p=Rt[2],d=vt*Pt.height-Tt,Ft=this.calculateImageOrLabelDimensions_(Pt.width,Pt.height,Rt[0],Rt[1],Pt.width,Pt.height,p,d,0,0,Rt[3],wt,!1,vr,!1,w),a&&a.collides(Ft.declutterBox))break t;At.push([t,e,Pt,Ft,1,null,null])}a&&a.load(At.map(ko));for(var Yt=0,Gt=At.length;Yt<Gt;++Yt)this.replayImageOrLabel_.apply(this,At[Yt])}}++j;break;case 7:if(void 0!==o){var Ut=o(w=Y[1],O);if(Ut)return Ut}++j;break;case 8:F?z++:this.fill_(t),++j;break;case 9:for(N=Y[1],c=Y[2],C=l[N],v=(D=l[N+1])+.5|0,(_=C+.5|0)===g&&v===y||(t.moveTo(C,D),g=_,y=v),N+=2;N<c;N+=2)_=(C=l[N])+.5|0,v=(D=l[N+1])+.5|0,N!=c-2&&_===g&&v===y||(t.lineTo(C,D),g=_,y=v);++j;break;case 10:A=Y,this.alignFill_=Y[2],z&&(this.fill_(t),z=0,E&&(t.stroke(),E=0)),t.fillStyle=Y[1],++j;break;case 11:L=Y,E&&(t.stroke(),E=0),this.setStrokeStyle_(t,Y),++j;break;case 12:F?E++:t.stroke(),++j;break;default:++j}}z&&this.fill_(t),E&&t.stroke()},t.prototype.execute=function(t,e,i,n,r,o){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,r,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,r)},t}(),Go=[jo,"Circle",Oo,Do,So,Co],Uo=function(){function t(t,e,i,n,r,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(r)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e],r=[this.renderBuffer_||0,this.renderBuffer_||0];for(var o in n){var s=n[o];i[o]=new Yo(this.resolution_,this.pixelRatio_,this.overlaps_,s,r)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,o,s){var a=2*(r=Math.round(r))+1,l=ve(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=X(a,a));var u,c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):h||c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(function(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}(u=[1/0,1/0,-1/0,-1/0],t),Nt(u,e*(this.renderBuffer_+r),u));var p,f=function(t){if(void 0!==Wo[t])return Wo[t];for(var e=2*t+1,i=t*t,n=new Array(i+1),r=0;r<=t;++r)for(var o=0;o<=t;++o){var s=r*r+o*o;if(s>i)break;var a=n[s];a||(a=[],n[s]=a),a.push(4*((t+r)*e+(t+o))+3),r>0&&a.push(4*((t-r)*e+(t+o))+3),o>0&&(a.push(4*((t+r)*e+(t-o))+3),r>0&&a.push(4*((t-r)*e+(t-o))+3))}for(var l=[],h=(r=0,n.length);r<h;++r)n[r]&&l.push.apply(l,n[r]);return Wo[t]=l,l}(r);function d(t,e){for(var i=c.getImageData(0,0,a,a).data,n=0,l=f.length;n<l;n++)if(i[f[n]]>0){if(!s||p!==Do&&p!==So||-1!==s.indexOf(t)){var h=(f[n]-3)/4,u=r-h%a,d=r-(h/a|0),g=o(t,e,u*u+d*d);if(g)return g}c.clearRect(0,0,a,a);break}}var g,y,_,v,m,M=Object.keys(this.executorsByZIndex_).map(Number);for(M.sort(n),g=M.length-1;g>=0;--g){var x=M[g].toString();for(_=this.executorsByZIndex_[x],y=Go.length-1;y>=0;--y)if(void 0!==(v=_[p=Go[y]])&&(m=v.executeHitDetection(c,l,i,d,u)))return m}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],r=e[2],o=e[3],s=[i,n,i,o,r,o,r,n];return Ke(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return M(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,r,o,s,a){var l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(n),this.maxExtent_&&(t.save(),this.clip(t,i));var h,u,c,p,f,d,g=s||Go;for(a&&l.reverse(),h=0,u=l.length;h<u;++h){var y=l[h].toString();for(f=this.executorsByZIndex_[y],c=0,p=g.length;c<p;++c)void 0!==(d=f[g[c]])&&d.execute(t,e,i,r,o,a)}this.maxExtent_&&t.restore()},t}(),Wo={},Qo=(Fo=function(t,e){return(Fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Fo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Bo=function(t){function e(e,i,n,r,o,s,a){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=i,l.extent_=n,l.transform_=r,l.viewRotation_=o,l.squaredTolerance_=s,l.userTransform_=a,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=[1,0,0,1,0,0],l}return Qo(e,t),e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var r=Ke(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var h=0,u=r.length;h<u;h+=2){var c=r[h]-this.imageAnchorX_,p=r[h+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var f=c+this.imageAnchorX_,d=p+this.imageAnchorY_;ve(s,f,d,1,1,l,-f,-d),o.setTransform.apply(o,s),o.translate(f,d),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,p,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Ke(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=n){var a=r[e]+this.textOffsetX_,l=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]){var h=ve(this.tmpLocalTransform_,a,l,1,1,s,-a,-l);o.setTransform.apply(o,h),o.translate(a,l),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&o.strokeText(this.text_,a,l),this.textFillState_&&o.fillText(this.text_,a,l)}}},e.prototype.moveToLineTo_=function(t,e,i,n,r){var o=this.context_,s=Ke(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var l=2;l<a;l+=2)o.lineTo(s[l],s[l+1]);return r&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},e.prototype.drawCircle=function(t){if(Jt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,i){var n=t.getFlatCoordinates();if(n){var r=t.getStride();return Ke(n,0,n.length,r,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case se:this.drawPoint(t);break;case ae:this.drawLineString(t);break;case he:this.drawPolygon(t);break;case ue:this.drawMultiPoint(t);break;case ce:this.drawMultiLineString(t);break;case pe:this.drawMultiPolygon(t);break;case fe:this.drawGeometryCollection(t);break;case de:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Jt(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Jt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Jt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),r=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,l=o.length;a<l;++a)r=this.moveToLineTo_(n,r,o[a],s,!1);i.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Jt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Jt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=r.length;s<a;++s){var l=r[s];n=this.drawRings_(i,n,l,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var h=t.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(f(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:yr;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:hr(i||cr)}}else this.fillState_=null;if(e){var n=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:pr,lineDash:o||fr,lineDashOffset:s||0,lineJoin:void 0!==a?a:dr,lineWidth:this.pixelRatio_*(void 0!==l?l:1),miterLimit:void 0!==h?h:10,strokeStyle:hr(n||gr)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getSize();if(e){var i=t.getAnchor(),n=t.getImage(1),r=t.getOrigin(),o=t.getScaleArray();this.imageAnchorX_=i[0],this.imageAnchorY_=i[1],this.imageHeight_=e[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=[this.pixelRatio_*o[0],this.pixelRatio_*o[1]],this.imageWidth_=e[0]}else this.image_=null}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:hr(i||cr)}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),o=n.getLineCap(),s=n.getLineDash(),a=n.getLineDashOffset(),l=n.getLineJoin(),h=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:pr,lineDash:s||fr,lineDashOffset:a||0,lineJoin:void 0!==l?l:dr,lineWidth:void 0!==h?h:1,miterLimit:void 0!==u?u:10,strokeStyle:hr(r||gr)}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),y=t.getScaleArray(),_=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==c?c:ur,textAlign:void 0!==v?v:yr,textBaseline:void 0!==m?m:_r},this.text_=void 0!==_?_:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}else this.text_=""},e}(to),Xo="fraction",Zo="bottom-left",Ho="bottom-right",Vo="top-left",Jo="top-right";function qo(t,e,i){return e+":"+t+":"+(i?rr(i):"null")}var Ko,$o,ts=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,i){var n=qo(t,e,i);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,i,n){var r=qo(t,e,i);this.cache_[r]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),es=($o=function(t,e){return($o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}$o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),is=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=i,o.state=r,o}return es(e,t),e.prototype.changed=function(){this.dispatchEvent(w)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return A()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){A()},e}(I),ns=(Ko=function(t,e){return(Ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Ko(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function rs(t,e,i){var n=t;if(n.src&&B){var r=n.decode(),o=!0;return r.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():i())})),function(){o=!1}}var s=[O(n,"load",e),O(n,"error",i)];return function(){s.forEach(j)}}!function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,i,n,0)||this;return a.src_=r,a.image_=new Image,null!==o&&(a.image_.crossOrigin=o),a.unlisten_=null,a.state=0,a.imageLoadFunction_=s,a}ns(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Xt(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=rs(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(is);var os,ss,as=(os=function(t,e){return(os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}os(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ls=null,hs=function(t){function e(e,i,n,r,o,s){var a=t.call(this)||this;return a.hitDetectionImage_=null,a.image_=e||new Image,null!==r&&(a.image_.crossOrigin=r),a.canvas_={},a.color_=s,a.unlisten_=null,a.imageState_=o,a.size_=n,a.src_=i,a.tainted_,a}return as(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){ls||(ls=X(1,1)),ls.drawImage(this.image_,0,0);try{ls.getImageData(0,0,1,1),this.tainted_=!1}catch(t){ls=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(w)},e.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=X(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=rs(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.isTainted_())i.fillStyle=rr(this.color_),i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var n=i.getImageData(0,0,e.width,e.height),r=n.data,o=this.color_[0]/255,s=this.color_[1]/255,a=this.color_[2]/255,l=this.color_[3],h=0,u=r.length;h<u;h+=4)r[h]*=o,r[h+1]*=s,r[h+2]*=a,r[h+3]*=l;i.putImageData(n,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(I),us=(ss=function(t,e){return(ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ss(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),cs=function(t){function e(e){var i=this,n=e||{},r=void 0!==n.opacity?n.opacity:1,o=void 0!==n.rotation?n.rotation:0,s=void 0!==n.scale?n.scale:1,a=void 0!==n.rotateWithView&&n.rotateWithView;(i=t.call(this,{opacity:r,rotation:o,scale:s,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:a})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:Vo,i.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:Xo,i.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:Xo,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var l=void 0!==n.img?n.img:null,h=void 0!==n.imgSize?n.imgSize:null,u=n.src;Dt(!(void 0!==u&&l),4),Dt(!l||l&&h,5),void 0!==u&&0!==u.length||!l||(u=l.src||b(l)),Dt(void 0!==u&&u.length>0,6);var c=void 0!==n.src?0:2;return i.color_=void 0!==n.color?sr(n.color):null,i.iconImage_=function(t,e,i,n,r,o){var s=ts.get(e,n,o);return s||(s=new hs(t,e,i,n,r,o),ts.set(e,n,o,s)),s}(l,u,h,i.crossOrigin_,c,i.color_),i.offset_=void 0!==n.offset?n.offset:[0,0],i.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:Vo,i.origin_=null,i.size_=void 0!==n.size?n.size:null,i}return us(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==Xo||this.anchorYUnits_==Xo){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==Xo&&(t[0]*=e[0]),this.anchorYUnits_==Xo&&(t[1]*=e[1])}if(this.anchorOrigin_!=Vo){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Jo&&this.anchorOrigin_!=Ho||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Zo&&this.anchorOrigin_!=Ho||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=Vo){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),this.offsetOrigin_!=Jo&&this.offsetOrigin_!=Ho||(t[0]=n[0]-i[0]-t[0]),this.offsetOrigin_!=Zo&&this.offsetOrigin_!=Ho||(t[1]=n[1]-i[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(w,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(w,t)},e}(er),ps={Point:function(t,e,i,n,r){var o,s=i.getImage(),a=i.getText();if(r&&(t=r,o=s&&a&&a.getText()?{}:void 0),s){if(2!=s.getImageState())return;var l=t.getBuilder(i.getZIndex(),Do);l.setImageStyle(s,o),l.drawPoint(e,n)}if(a&&a.getText()){var h=t.getBuilder(i.getZIndex(),So);h.setTextStyle(a,o),h.drawText(e,n)}},LineString:function(t,e,i,n,r){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),Oo);s.setFillStrokeStyle(null,o),s.drawLineString(e,n)}var a=i.getText();if(a&&a.getText()){var l=(r||t).getBuilder(i.getZIndex(),So);l.setTextStyle(a),l.drawText(e,n)}},Polygon:function(t,e,i,n,r){var o=i.getFill(),s=i.getStroke();if(o||s){var a=t.getBuilder(i.getZIndex(),jo);a.setFillStrokeStyle(o,s),a.drawPolygon(e,n)}var l=i.getText();if(l&&l.getText()){var h=(r||t).getBuilder(i.getZIndex(),So);h.setTextStyle(l),h.drawText(e,n)}},MultiPoint:function(t,e,i,n,r){var o,s=i.getImage(),a=i.getText();if(r&&(t=r,o=s&&a&&a.getText()?{}:void 0),s){if(2!=s.getImageState())return;var l=t.getBuilder(i.getZIndex(),Do);l.setImageStyle(s,o),l.drawMultiPoint(e,n)}if(a&&a.getText()){var h=(r||t).getBuilder(i.getZIndex(),So);h.setTextStyle(a,o),h.drawText(e,n)}},MultiLineString:function(t,e,i,n,r){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),Oo);s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,n)}var a=i.getText();if(a&&a.getText()){var l=(r||t).getBuilder(i.getZIndex(),So);l.setTextStyle(a),l.drawText(e,n)}},MultiPolygon:function(t,e,i,n,r){var o=i.getFill(),s=i.getStroke();if(s||o){var a=t.getBuilder(i.getZIndex(),jo);a.setFillStrokeStyle(o,s),a.drawMultiPolygon(e,n)}var l=i.getText();if(l&&l.getText()){var h=(r||t).getBuilder(i.getZIndex(),So);h.setTextStyle(l),h.drawText(e,n)}},GeometryCollection:function(t,e,i,n,r){var o,s,a=e.getGeometriesArray();for(o=0,s=a.length;o<s;++o)(0,ps[a[o].getType()])(t,a[o],i,n,r)},Circle:function(t,e,i,n,r){var o=i.getFill(),s=i.getStroke();if(o||s){var a=t.getBuilder(i.getZIndex(),"Circle");a.setFillStrokeStyle(o,s),a.drawCircle(e,n)}var l=i.getText();if(l&&l.getText()){var h=(r||t).getBuilder(i.getZIndex(),So);h.setTextStyle(l),h.drawText(e,n)}}};function fs(t,e){return parseInt(b(t),10)-parseInt(b(e),10)}function ds(t,e){return.5*t/e}function gs(t,e,i,n,r,o,s){var a=!1,l=i.getImage();if(l){var h=l.getImageState();2==h||3==h?l.unlistenImageChange(r):(0==h&&l.load(),h=l.getImageState(),l.listenImageChange(r),a=!0)}return function(t,e,i,n,r,o){var s=i.getGeometryFunction()(e);if(s){var a=s.simplifyTransformed(n,r);i.getRenderer()?function t(e,i,n,r){if(i.getType()!=fe)e.getBuilder(n.getZIndex(),Co).drawCustom(i,r,n.getRenderer());else for(var o=i.getGeometries(),s=0,a=o.length;s<a;++s)t(e,o[s],n,r)}(t,a,i,e):(0,ps[a.getType()])(t,a,i,e,o)}}(t,e,i,n,o,s),a}var ys,_s,vs,ms=(vs=function(t,e){return(vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}vs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ms=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=[1/0,1/0,-1/0,-1/0],i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return ms(e,t),e.prototype.useContainer=function(e,i,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,i,n)},e.prototype.renderWorlds=function(t,e,i){var n=e.extent,r=e.viewState,o=r.center,s=r.resolution,a=r.projection,l=r.rotation,h=a.getExtent(),u=this.getLayer().getSource(),c=e.pixelRatio,p=e.viewHints,f=!(p[0]||p[1]),d=this.context,g=Math.round(e.size[0]*c),y=Math.round(e.size[1]*c),_=u.getWrapX()&&a.canWrapX(),v=_?Vt(h):null,m=_?Math.ceil((n[2]-h[2])/v)+1:1,M=_?Math.floor((n[0]-h[0])/v):0;do{var x=this.getRenderTransform(o,s,l,c,g,y,M*v);t.execute(d,1,x,l,f,void 0,i)}while(++M<m)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,i){return r=e,0,0,o=i,0,0,(n=t)[0]=r,n[1]=0,n[2]=0,n[3]=o,n[4]=0,n[5]=0,n;var n,r,o}(this.pixelTransform,1/i,1/i),function(t,e){var i,n=(i=e)[0]*i[3]-i[1]*i[2];Dt(0!==n,32);var r=e[0],o=e[1],s=e[2],a=e[3],l=e[4],h=e[5];t[0]=a/n,t[1]=-o/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*h-a*l)/n,t[5]=-(r*h-o*l)/n}(this.inversePixelTransform,this.pixelTransform);var r="matrix("+this.pixelTransform.join(", ")+")";this.useContainer(e,r,n.opacity);var o=this.context,s=o.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return!this.containerReused&&s.width>0&&(s.width=0),this.container;var h=Math.round(t.size[0]*i),u=Math.round(t.size[1]*i);s.width!=h||s.height!=u?(s.width=h,s.height=u,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,h,u),this.preRender(o,t);var c=t.viewState,p=(c.projection,!1);if(n.extent&&this.clipping){var f=n.extent;(p=!At(f,t.extent)&&Jt(f,t.extent))&&this.clipUnrotated(o,t,f)}this.renderWorlds(a,t),p&&o.restore(),this.postRender(o,t);var d=n.opacity,g=this.container;return d!==parseFloat(g.style.opacity)&&(g.style.opacity=1===d?"":String(d)),this.renderedRotation_!==c.rotation&&(this.renderedRotation_=c.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];_e(this.pixelTransform,i);var r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.renderedExtent_,h=this.getLayer(),u=[],c=i[0]/2,p=i[1]/2;u.push(this.getRenderTransform(r,o,s,.5,c,p,0).slice());var f=h.getSource(),d=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!At(d,l)){for(var g=l[0],y=Vt(d),_=0,v=void 0;g<d[0];)v=y*--_,u.push(this.getRenderTransform(r,o,s,.5,c,p,v).slice()),g+=y;for(_=0,g=l[2];g>d[2];)v=y*++_,u.push(this.getRenderTransform(r,o,s,.5,c,p,v).slice()),g-=y}this.hitDetectionImageData_=function(t,e,i,r,o,s,a){var l=X(t[0]/2,t[1]/2);l.imageSmoothingEnabled=!1;for(var h=l.canvas,u=new Bo(l,.5,o,null,a),c=i.length,p=Math.floor(16777215/c),f={},d=1;d<=c;++d){var g=i[d-1],y=g.getStyleFunction()||r;if(r){var _=y(g,s);if(_){Array.isArray(_)||(_=[_]);for(var v="#"+("000000"+(d*p).toString(16)).slice(-6),m=0,M=_.length;m<M;++m){var x=_[m],T=x.clone(),I=T.getFill();I&&I.setColor(v);var w=T.getStroke();w&&w.setColor(v),T.setText(void 0);var C=x.getImage();if(C){var D=C.getImageSize();if(!D)continue;var O=document.createElement("canvas");O.width=D[0],O.height=D[1];var j=O.getContext("2d",{alpha:!1});j.fillStyle=v;var S=j.canvas;j.fillRect(0,0,S.width,S.height),X(D?D[0]:S.width,D?D[1]:S.height).drawImage(S,0,0),T.setImage(new cs({img:S,imgSize:D,anchor:C.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:C.getOrigin(),size:C.getSize(),opacity:C.getOpacity(),scale:C.getScale(),rotation:C.getRotation(),rotateWithView:C.getRotateWithView()}))}var N=Number(T.getZIndex());(L=f[N])||(L={},f[N]=L,L[he]=[],L[de]=[],L[ae]=[],L[se]=[]);var z=T.getGeometryFunction()(g);z&&Jt(o,z.getExtent())&&L[z.getType().replace("Multi","")].push(z,T)}}}}for(var E=Object.keys(f).map(Number).sort(n),A=(d=0,E.length);d<A;++d){var L=f[E[d]];for(var b in L){var k=L[b];for(m=0,M=k.length;m<M;m+=2){u.setStyle(k[m+1]);for(var P=0,R=e.length;P<R;++P)u.setTransform(e[P]),u.drawGeometry(k[m])}}}return l.getImageData(0,0,h.width,h.height)}(i,u,this.renderedFeatures_,h.getStyleFunction(),l,o,s)}e(function(t,e,i){var n=[];if(i){var r=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*i.width),o=i.data[r],s=i.data[r+1],a=i.data[r+2]+256*(s+256*o),l=Math.floor(16777215/e.length);a&&a%l==0&&n.push(e[a/l-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){var o=this;if(this.replayGroup_){var s,a=e.viewState.resolution,l=e.viewState.rotation,h=this.getLayer(),u={},c=function(t,e,i){var o=b(t),s=u[o];if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return u[o]=!0,r.splice(r.lastIndexOf(s),1),n(t,h,e);s.geometry=e,s.distanceSq=i}}else{if(0===i)return u[o]=!0,n(t,h,e);r.push(u[o]={feature:t,layer:h,geometry:e,distanceSq:i,callback:n})}},p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some((function(n){return s=n.forEachFeatureAtCoordinate(t,a,l,i,c,n===o.declutterExecutorGroup?e.declutterTree.all().map((function(t){return t.value})):null)})),s}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[0],r=t.viewHints[1],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!s&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var a=t.extent,l=t.viewState,h=l.projection,u=l.resolution,c=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=fs);var g=l.center.slice(),y=Nt(a,f*u),_=[y.slice()],v=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!At(v,t.extent)){var m=Vt(v),M=Math.max(Vt(y)/2,m);y[0]=v[0]-M,y[2]=v[2]+M,function(t,e){if(e.canWrapX()){var i=Vt(e.getExtent()),n=function(t,e,i){var n=e.getExtent(),r=0;if(e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])){var o=i||Vt(n);r=Math.floor((t[0]-n[0])/o)}return r}(t,e,i);n&&(t[0]-=n*i)}}(g,h);var x=function(t,e){var i=e.getExtent(),n=Bt(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){var r=Vt(i),o=Math.floor((n[0]-i[0])/r)*r;t[0]-=o,t[2]-=o}return t}(_[0],h);x[0]<v[0]&&x[2]<v[2]?_.push([x[0]+m,x[1],x[2]+m,x[3]]):x[0]>v[0]&&x[2]>v[2]&&_.push([x[0]-m,x[1],x[2]-m,x[3]])}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==p&&this.renderedRenderOrder_==d&&At(this.renderedExtent_,y))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var T,I=new vo(ds(u,c),y,u,c);this.getLayer().getDeclutter()&&(T=new vo(ds(u,c),y,u,c));for(var w=0,C=_.length;w<C;++w)i.loadFeatures(_[w],u,h);var D=function(t,e){var i=ds(t,e);return i*i}(u,c),O=function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,u)),i){var r=this.renderFeature(t,D,i,I,void 0,T);this.dirty_=this.dirty_||r}}.bind(this),j=function(t,e){return t}(y),S=i.getFeaturesInExtent(j);for(d&&S.sort(d),w=0,C=S.length;w<C;++w)O(S[w]);this.renderedFeatures_=S;var N=I.finish(),z=new Uo(y,u,c,i.getOverlaps(),N,e.getRenderBuffer());return T&&(this.declutterExecutorGroup=new Uo(y,u,c,i.getOverlaps(),T.finish(),e.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=p,this.renderedRenderOrder_=d,this.renderedExtent_=y,this.renderedCenter_=g,this.renderedProjection_=h,this.replayGroup_=z,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,r,o){if(!i)return!1;var s=!1;if(Array.isArray(i))for(var a=0,l=i.length;a<l;++a)s=gs(n,t,i[a],e,this.boundHandleStyleImageChange_,r,o)||s;else s=gs(n,t,i,e,this.boundHandleStyleImageChange_,r,o);return s},e}(wo),xs=(_s=function(t,e){return(_s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}_s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ts=function(t){function e(e){return t.call(this,e)||this}return xs(e,t),e.prototype.createRenderer=function(){return new Ms(this)},e}(Vr),Is=function(){function t(t){this.rbush_=new Yn(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[b(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,r=e.length;n<r;n++){var o=t[n],s=e[n],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[n]=a,this.items_[b(s)]=a}this.rbush_.load(i)},t.prototype.remove=function(t){var e=b(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[b(e)];Ft([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,n=0,r=t.length;n<r;n++)if(i=e(t[n]))return i;return i},t.prototype.isEmpty=function(){return M(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return kt(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),ws=(ys=function(t,e){return(ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}ys(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Cs=function(t){function e(e){var i=t.call(this)||this;return i.projection_=He(e.projection),i.attributions_=Ds(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:Ln,i.wrapX_=void 0!==e.wrapX&&e.wrapX,i}return ws(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return A()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Ds(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(F);function Ds(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var Os="addfeature",js="removefeature";function Ss(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Ns(t,e){return function(i,n,r,o,s){var a=this;!function(t,e,i,n,r,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(i,n,r):t,!0),e.getType()==Hi&&(a.responseType="arraybuffer"),a.withCredentials=!1,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var n=e.getType(),l=void 0;"json"==n||"text"==n?l=a.responseText:"xml"==n?(l=a.responseXML)||(l=(new DOMParser).parseFromString(a.responseText,"application/xml")):n==Hi&&(l=a.response),l?o(e.readFeatures(l,{extent:i,featureProjection:r}),e.readProjection(l)):s()}else s()},a.onerror=s,a.send()}(t,e,i,n,r,(function(t,e){void 0!==o&&o(t),a.addFeatures(t)}),s||y)}}var zs,Es,As,Ls=(Es=function(t,e){return(Es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Es(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),bs=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.feature=i,r.features=n,r}return Ls(e,t),e}(t),ks=function(t){function i(e){var i=this,n=e||{};(i=t.call(this,{attributions:n.attributions,projection:void 0,state:Ln,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=y,i.format_=n.format,i.overlaps_=void 0===n.overlaps||n.overlaps,i.url_=n.url,void 0!==n.loader?i.loader_=n.loader:void 0!==i.url_&&(Dt(i.format_,7),i.loader_=Ns(i.url_,i.format_)),i.strategy_=void 0!==n.strategy?n.strategy:Ss;var r,o,s=void 0===n.useSpatialIndex||n.useSpatialIndex;return i.featuresRtree_=s?new Is:null,i.loadedExtentsRtree_=new Is,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(r=n.features).getArray()),s||void 0!==r||(r=new yt(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==r&&i.bindFeaturesCollection_(r),i}return Ls(i,t),i.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},i.prototype.addFeatureInternal=function(t){var e=b(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new bs(Os,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},i.prototype.setupChangeEvents_=function(t,i){this.featureChangeKeys_[t]=[D(i,w,this.handleFeatureChange_,this),D(i,e,this.handleFeatureChange_,this)]},i.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(Dt(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},i.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},i.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],r=0,o=t.length;r<o;r++){var s=b(l=t[r]);this.addToIndex_(s,l)&&i.push(l)}r=0;for(var a=i.length;r<a;r++){var l;s=b(l=i[r]),this.setupChangeEvents_(s,l);var h=l.getGeometry();if(h){var u=h.getExtent();e.push(u),n.push(l)}else this.nullGeometryFeatures_[s]=l}this.featuresRtree_&&this.featuresRtree_.load(e,n),r=0;for(var c=i.length;r<c;r++)this.dispatchEvent(new bs(Os,i[r]))},i.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(Os,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(js,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener("add",function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(ft,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},i.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(j);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new bs("clear");this.dispatchEvent(n),this.changed()},i.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},i.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0}))},i.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},i.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}}))},i.prototype.getFeaturesCollection=function(){return this.featuresCollection_},i.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),M(this.nullGeometryFeatures_)||p(t,m(this.nullGeometryFeatures_))),t},i.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},i.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},i.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],l=e||d;return this.featuresRtree_.forEachInExtent(a,(function(t){if(l(t)){var e=t.getGeometry(),h=s;if((s=e.closestPointXY(i,n,o,s))<h){r=t;var u=Math.sqrt(s);a[0]=i-u,a[1]=n-u,a[2]=i+u,a[3]=n+u}}})),r},i.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},i.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},i.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},i.prototype.getFormat=function(){return this.format_},i.prototype.getOverlaps=function(){return this.overlaps_},i.prototype.getUrl=function(){return this.url_},i.prototype.handleFeatureChange_=function(t){var e=t.target,i=b(e),n=e.getGeometry();if(n){var r=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var o=e.getId();if(void 0!==o){var s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new bs("changefeature",e))},i.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:b(t)in this.uidIndex_},i.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&M(this.nullGeometryFeatures_)},i.prototype.loadFeatures=function(t,e,i){var n=this.loadedExtentsRtree_,r=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var a=r[t];n.forEachInExtent(a,(function(t){return At(t.extent,a)}))||(s.dispatchEvent(new bs("featuresloadstart")),s.loader_.call(s,a,e,i,function(t){this.dispatchEvent(new bs("featuresloadend",void 0,t))}.bind(s),function(){this.dispatchEvent(new bs("featuresloaderror"))}.bind(s)),n.insert(a,{extent:a.slice()}),s.loading=s.loader_!==y)},s=this,a=0,l=r.length;a<l;++a)o(a)},i.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},i.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if(Ft(i.extent,t))return e=i,!0})),e&&i.remove(e)},i.prototype.removeFeature=function(t){var e=b(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},i.prototype.removeFeatureInternal=function(t){var e=b(t);this.featureChangeKeys_[e].forEach(j),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new bs(js,t))},i.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},i.prototype.setLoader=function(t){this.loader_=t},i.prototype.setUrl=function(t){Dt(this.format_,7),this.setLoader(Ns(t,this.format_))},i}(Cs),Ps=(zs=function(t,e){return(zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}zs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Rs="Point",Fs="LineString",Ys="Polygon",Gs="Circle",Us="drawstart",Ws=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return Ps(e,t),e}(t),Qs=function(t){function e(e){var i=this,n=e;n.stopDown||(n.stopDown=g),(i=t.call(this,n)||this).shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.pointerType_,i.freehand_=!1,i.source_=e.source?e.source:null,i.features_=e.features?e.features:null,i.snapTolerance_=e.snapTolerance?e.snapTolerance:12,i.type_=e.type,i.mode_=function(t){var e;return t===se||t===ue?e=Rs:t===ae||t===ce?e=Fs:t===he||t===pe?e=Ys:t===de&&(e=Gs),e}(i.type_),i.stopClick_=!!e.stopClick,i.minPoints_=e.minPoints?e.minPoints:i.mode_===Ys?3:2,i.maxPoints_=i.mode_===Gs?2:e.maxPoints?e.maxPoints:1/0,i.finishCondition_=e.finishCondition?e.finishCondition:d;var r,o=e.geometryFunction;if(!o){var s,a=i.mode_;a===Gs?o=function(t,e,i){var n,r,o,s,a=e||new Ji([NaN,NaN]),l=qe(t[0]),h=(n=l,r=qe(t[t.length-1]),o=n[0]-r[0],o*o+(s=n[1]-r[1])*s);return a.setCenterAndRadius(l,Math.sqrt(h)),a}:(a===Rs?s=zi:a===Fs?s=fn:a===Ys&&(s=Zi),o=function(t,e,i){return e?a===Ys?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])]):e.setCoordinates([]):e.setCoordinates(t):e=new s(t),e})}return i.geometryFunction_=o,i.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,i.overlay_=new Ts({source:new ks({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(r=Yr(),function(t,e){return r[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.geometryName_=e.geometryName,i.condition_=e.condition?e.condition:jt,i.freehandCondition_,e.freehand?i.freehandCondition_=Ot:i.freehandCondition_=e.freehandCondition?e.freehandCondition:St,i.addEventListener(G(_t),i.updateState_),i}return Ps(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){"contextmenu"===e.originalEvent.type&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!==Rs&&this.freehandCondition_(e);var i=e.type===xt,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Mt&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Mt&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Tt?n=!1:i&&this.getPointerCount()<2?(n=e.type===xt)&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===Mt&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):"dblclick"===e.type&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new _n(xt,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){switch(!0){case!this.finishCoordinate_:if(this.startDrawing_(t.coordinate),this.mode_!==Rs)break;case this.freehand_||this.atFinish_(t.pixel)&&this.finishCondition_(t):this.finishDrawing();break;case!this.freehand_:this.addToDrawing_(t.coordinate)}e=!1}else this.freehand_&&this.abortDrawing();return!e&&this.stopClick_&&t.originalEvent.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t)},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_],r=this.mode_;if(r===Rs)e=!0;else if(r===Gs)e=2===this.sketchCoords_.length;else if(r===Fs)i=this.sketchCoords_.length>this.minPoints_;else if(r===Ys){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,n=[o[0][0],o[0][o[0].length-2]]}if(i)for(var s=this.getMap(),a=0,l=n.length;a<l;a++){var h=n[a],u=s.getPixelFromCoordinate(h),c=t[0]-u[0],p=t[1]-u[1],f=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(c*c+p*p)<=f){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new $i(new zi(e)),this.updateSketchFeatures_())},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new $i);var e=t.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new fn(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))},e.prototype.startDrawing_=function(t){var e=this.getMap().getView().getProjection();this.finishCoordinate_=t,this.mode_===Rs?this.sketchCoords_=t.slice():this.mode_===Ys?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new $i(new fn(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new $i,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Ws(Us,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,n=this.getMap(),r=this.sketchFeature_.getGeometry(),o=n.getView().getProjection();this.mode_===Rs?i=this.sketchCoords_:this.mode_===Ys?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(n.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=t[0],i[1]=t[1],this.geometryFunction_(this.sketchCoords_,r,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),r.getType()===he&&this.mode_!==Ys?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),o=this.mode_;o===Fs||o===Gs?(this.finishCoordinate_=t.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),this.geometryFunction_(i,n,r)):o===Ys&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;if(n===Fs||n===Gs){if((t=this.sketchCoords_).splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();var r=this.finishCoordinate_.slice();t[t.length-1]=r,this.sketchPoint_.setGeometry(new zi(r))}this.geometryFunction_(t,e,i),e.getType()===he&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(n===Ys){(t=this.sketchCoords_[0]).splice(-2,1);var o=this.sketchLine_.getGeometry();t.length>=2&&(r=t[t.length-2].slice(),t[t.length-1]=r,this.sketchPoint_.setGeometry(new zi(r))),o.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)}1===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===Fs?(e.pop(),this.geometryFunction_(e,i,n)):this.mode_===Ys&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),this.type_===ue?t.setGeometry(new xn([e])):this.type_===ce?t.setGeometry(new mn([e])):this.type_===pe&&t.setGeometry(new In([e])),this.dispatchEvent(new Ws("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new Ws("drawabort",t))},e.prototype.appendCoordinates=function(t){var e,i=this.mode_,n=!this.sketchFeature_;if(n&&this.startDrawing_(t[0]),i===Fs||i===Gs)e=this.sketchCoords_;else{if(i!==Ys)return;e=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&e.shift(),e.pop();for(var r=0;r<t.length;r++)this.addToDrawing_(t[r]);var o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new $i(new zi(i)),this.updateSketchFeatures_(),this.dispatchEvent(new Ws(Us,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(Ct),Bs="bottom-center",Xs="bottom-right",Zs="center-center",Hs="center-right",Vs=(As=function(t,e){return(As=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}As(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Js="element",qs="offset",Ks="position",$s="positioning",ta=function(t){function e(e){var i=t.call(this)||this;i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!=c(n)&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener(G(Js),i.handleElementChanged),i.addEventListener(G("map"),i.handleMapChanged),i.addEventListener(G(qs),i.handleOffsetChanged),i.addEventListener(G(Ks),i.handlePositionChanged),i.addEventListener(G($s),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:"top-left"),void 0!==e.position&&i.setPosition(e.position),i}return Vs(e,t),e.prototype.getElement=function(){return this.get(Js)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get("map")},e.prototype.getOffset=function(){return this.get(qs)},e.prototype.getPosition=function(){return this.get(Ks)},e.prototype.getPositioning=function(){return this.get($s)},e.prototype.handleElementChanged=function(){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(V(this.element),j(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=D(t,U,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Js,t)},e.prototype.setMap=function(t){this.set("map",t)},e.prototype.setOffset=function(t){this.set(qs,t)},e.prototype.setPosition=function(t){this.set(Ks,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(Ks)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),r=this.getRect(n,[Z(n),H(n)]),o=t||{},s=void 0===o.margin?20:o.margin;if(!At(i,r)){var a=r[0]-i[0],l=i[2]-r[2],h=r[1]-i[1],u=i[3]-r[3],c=[0,0];if(a<0?c[0]=a-s:l<0&&(c[0]=Math.abs(l)+s),h<0?c[1]=h-s:u<0&&(c[1]=Math.abs(u)+s),0!==c[0]||0!==c[1]){var p=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(p);if(!f)return;var d=[f[0]+c[0],f[1]+c[1]],g=o.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set($s,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",s=Math.round(t[1]+n[1])+"px",a="0%",l="0%";r==Xs||r==Hs||"top-right"==r?a="-100%":r!=Bs&&r!=Zs&&"top-center"!=r||(a="-50%"),"bottom-left"==r||r==Bs||r==Xs?l="-100%":"center-left"!=r&&r!=Zs&&r!=Hs||(l="-50%");var h="translate("+a+", "+l+") translate("+o+", "+s+")";this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h,i.msTransform=h)},e.prototype.getOptions=function(){return this.options},e}(F),ea="measureLayer",ia=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,t),e?(this.map_=e,this.style_=i.style||this.createDefaultStyle_(),this.source_=i.source||new ks,this.active_=!1):console.error("map is required")}return u(t,[{key:"excute",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.stop(),this.mode_=t,this.active_=!0,this.doOnce_=e;var i="area"===t?"Polygon":"LineString";this.drawInteraction_&&(this.map_.removeInteraction(this.drawInteraction_),this.drawInteraction_=null);var n=this.getLayerById_(ea);n||(n=this.createMeasureLayer_()),this.createMeasureTooltip_(),this.createHelpTooltip_(),this.drawInteraction_=this.createDraw_(i),this.map_.addInteraction(this.drawInteraction_),this.mapMoveListener_=this.map_.on("pointermove",this.handlePointerMove_.bind(this))}},{key:"stop",value:function(){this.type_=void 0,this.active_=!1,this.helpTooltip_&&this.map_.removeOverlay(this.helpTooltip_),this.drawInteraction_&&this.map_.removeInteraction(this.drawInteraction_),this.mapMoveListener_&&E(this.mapMoveListener_)}},{key:"getActive",value:function(){return this.active_}},{key:"getMode",value:function(){return this.mode_}},{key:"createDraw_",value:function(t){var e=new Qs({type:t,style:this.style_,source:this.source_,freehand:!1});return e.on("drawstart",this.handleDrawStart_.bind(this)),e.on("drawend",this.handleDrawEnd_.bind(this)),e}},{key:"createDefaultStyle_",value:function(){return new Pr({fill:new br({color:"rgba(0, 0, 255, 0.45)"}),stroke:new kr({color:"rgba(24, 144, 255, 1)",width:2})})}},{key:"createMeasureLayer_",value:function(){var t=new Ts({id:ea,className:ea,source:this.source_,style:this.style_});this.map_.addLayer(t),this.measureLayer_=t}},{key:"handleDrawStart_",value:function(t){var e=this;this.updateInteractionActive_(!1),this.sketch_=t.feature;var i=t.coordinate;this.listener_=this.sketch_.getGeometry().on("change",(function(t){var n,r=t.target;r instanceof Zi?(n=e.calculateArea_(r),i=r.getInteriorPoint().getCoordinates()):r instanceof fn&&(n=e.calculateLength_(r),i=r.getLastCoordinate()),e.measureTooltipElement_.innerHTML=n,e.measureTooltip_.setPosition(i)}))}},{key:"handleDrawEnd_",value:function(t){var e=this;setTimeout((function(){e.updateInteractionActive_(!0)}),1e3),this.measureTooltipElement_.className="oles-tooltip oles-tooltip-static";var i=document.createElement("span");i.className="oles-tooltip-close",i.innerHTML="X",this.measureTooltipElement_.appendChild(i),this.measureTooltip_.setOffset([0,-7]),i.feature=this.sketch_,i.overlay=this.measureTooltip_,i.addEventListener("click",(function(t){var i=t.target,n=i.feature,r=i.overlay,o=e.getLayerById_(ea);o&&o.getSource().hasFeature(n)&&o.getSource().removeFeature(n),e.map_.removeOverlay(r)}),{once:!0}),this.sketch_=null,this.measureTooltipElement_=null,E(this.listener_),this.doOnce_?this.stop():this.createMeasureTooltip_()}},{key:"createHelpTooltip_",value:function(){this.helpTooltipElement_&&this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_),this.helpTooltipElement_=document.createElement("div"),this.helpTooltipElement_.className="oles-tooltip hidden",this.helpTooltip_=new ta({element:this.helpTooltipElement_,offset:[15,0],positioning:"center-left"}),this.map_.addOverlay(this.helpTooltip_)}},{key:"createMeasureTooltip_",value:function(){this.measureTooltipElement_&&this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_),this.measureTooltipElement_=document.createElement("div"),this.measureTooltipElement_.className="oles-tooltip oles-tooltip-measure",this.measureTooltip_=new ta({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center"}),this.map_.addOverlay(this.measureTooltip_)}},{key:"handlePointerMove_",value:function(t){if(!t.dragging){var e="";if(this.sketch_){var i=this.sketch_.getGeometry();(i instanceof Zi||i instanceof fn)&&(e="")}this.helpTooltipElement_.innerHTML=e,this.helpTooltip_.setPosition(t.coordinate),this.helpTooltipElement_.classList.remove("hidden")}}},{key:"calculateArea_",value:function(t){var e=function t(e,i){var n=i||{},r=n.radius||Ge,o=n.projection||"EPSG:3857",s=e.getType();s!==fe&&(e=e.clone().transform(o,"EPSG:4326"));var a,l,h,u,c,p,f=0;switch(s){case se:case ue:case ae:case ce:case le:break;case he:for(a=e.getCoordinates(),f=Math.abs(Qe(a[0],r)),h=1,u=a.length;h<u;++h)f-=Math.abs(Qe(a[h],r));break;case pe:for(h=0,u=(a=e.getCoordinates()).length;h<u;++h)for(l=a[h],f+=Math.abs(Qe(l[0],r)),c=1,p=l.length;c<p;++c)f-=Math.abs(Qe(l[c],r));break;case fe:var d=e.getGeometries();for(h=0,u=d.length;h<u;++h)f+=t(d[h],i);break;default:throw new Error("Unsupported geometry type: "+s)}return f}(t,{projection:this.map_.getView().getProjection()});return e>1e4?"<font class='oles-tooltip-value'>".concat(Math.round(e/1e6*100)/100,"</font> "):"<font class='oles-tooltip-value'>".concat(Math.round(100*e)/100,"</font> ")}},{key:"calculateLength_",value:function(t){var e=function t(e,i){var n=i||{},r=n.radius||Ge,o=n.projection||"EPSG:3857",s=e.getType();s!==fe&&(e=e.clone().transform(o,"EPSG:4326"));var a,l,h,u,c,p,f=0;switch(s){case se:case ue:break;case ae:case le:f=We(a=e.getCoordinates(),r);break;case ce:case he:for(h=0,u=(a=e.getCoordinates()).length;h<u;++h)f+=We(a[h],r);break;case pe:for(h=0,u=(a=e.getCoordinates()).length;h<u;++h)for(c=0,p=(l=a[h]).length;c<p;++c)f+=We(l[c],r);break;case fe:var d=e.getGeometries();for(h=0,u=d.length;h<u;++h)f+=t(d[h],i);break;default:throw new Error("Unsupported geometry type: "+s)}return f}(t,{projection:this.map_.getView().getProjection()});return e>100?"<font class='oles-tooltip-value'>".concat(Math.round(e/1e3*100)/100,"</font> "):"<font class='oles-tooltip-value'>".concat(Math.round(100*e)/100,"</font> ")}},{key:"getLayerById_",value:function(t){var e=this.map_.getLayers(),i=null;return e.forEach((function(e){e.get("id")&&e.get("id")===t&&(i=e)})),i}},{key:"updateInteractionActive_",value:function(t){this.map_.getInteractions().getArray().forEach((function(e){e instanceof Qs||e.setActive(t)}))}}]),t}(),na=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,t),this.targetElement_=("string"==typeof e.target?document.getElementById(e.target):e.target)||document.body}return u(t,[{key:"entry",value:function(){if(this.isSupported_()&&!this.isFullScreen_()){var t=this.targetElement_;t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.requestFullScreen?t.requestFullscreen():console.log("error")}}},{key:"exit",value:function(){if(this.isFullScreen_()){var t=document;t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.cancelFullScreen?t.cancelFullScreen():t.exitFullscreen?t.exitFullscreen():console.log("error")}}},{key:"getActive",value:function(){return this.isFullScreen_()}},{key:"isFullScreen_",value:function(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}},{key:"isSupported_",value:function(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}}]),t}(),ra="gray",oa=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,t),this.layers_=e.layers||[],this.mode_=e.mode||ra,this.active_=!1}return u(t,[{key:"render",value:function(){var t=this;this.active_=!0,this.layers_.forEach((function(e){var i=e.getRenderer().context;t.filter_(i);var n=e.on("postrender",t.handlePostRender_.bind(t));e.listener_=n}))}},{key:"reset",value:function(){this.active_=!1,this.layers_.forEach((function(t){E(t.listener_),t.setOpacity(1===t.getOpacity()?.99:1)}))}},{key:"getActive",value:function(){return this.active_}},{key:"getMode",value:function(){return this.mode_}},{key:"setLayers",value:function(t){this.layers_=t||[],this.render()}},{key:"setMode",value:function(t){this.mode_=t||ra,this.render()}},{key:"handlePostRender_",value:function(t){var e=t.context;this.filter_(e)}},{key:"filter_",value:function(t){for(var e=t.canvas.width,i=t.canvas.height,n=t.getImageData(0,0,e,i),r=0;r<n.width;r++)for(var o=0;o<n.height;o++){var s=4*(r+o*n.width),a=.299*n.data[s+0]+.587*n.data[s+1]+.114*n.data[s+2];n.data[s+0]=a,n.data[s+1]=a,n.data[s+2]=a}t.putImageData(n,0,0)}}]),t}(),sa=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,t),e?(this.map_=e,this.layers_=i.layers||[],this.position_=i.position||.5,this.direction_=i.direction||"vertical",this.active_=!1,this.listeners_=[]):console.error("map is required")}return u(t,[{key:"render",value:function(){var t=this;this.reset(),this.createSlider_(),this.active_=!0,this.listeners_=[],this.layers_.forEach((function(e){var i=e.on("prerender",t.handlePreRender_.bind(t));t.listeners_.push(i);var n=e.on("postrender",t.handlePostRender_.bind(t));t.listeners_.push(n)})),this.map_.renderSync()}},{key:"reset",value:function(){this.removeSlider_(),this.active_=!1,this.listeners_.forEach((function(t){E(t)})),this.listeners_=[],this.map_.renderSync()}},{key:"getActive",value:function(){return this.active_}},{key:"setLayers",value:function(t){this.layers_=t||[],this.render()}},{key:"setDirection",value:function(t){this.direction_=t,this.render()}},{key:"getDirection",value:function(){return this.direction_}},{key:"setPosition",value:function(t){this.position_=t,this.render()}},{key:"getPosition",value:function(){return this.position_}},{key:"createSlider_",value:function(){if(!this.sliderElem_){var t=document.createElement("div");if("horizontal"===this.direction_){t.className="oles-swipe-slider horizontal";var e=this.map_.getSize()[0];t.style.left=this.position_*e+"px"}else{t.className="oles-swipe-slider vertical";var i=this.map_.getSize()[1];t.style.top=this.position_*i+"px"}t.addEventListener("mousedown",this.handleMouseDown_.bind(this)),t.addEventListener("mouseup",this.handleMouseUp_.bind(this)),document.body.addEventListener("mouseleave",this.handleMouseLeave_.bind(this)),document.body.addEventListener("mousemove",this.handleMouseMove_.bind(this)),this.sliderElem_=t;var n=this.map_.getTargetElement();n.style.position="relative",n.appendChild(t)}}},{key:"removeSlider_",value:function(){if(this.sliderElem_){var t=this.map_.getTargetElement();t.style=void 0,t.removeChild(this.sliderElem_),this.sliderElem_=void 0}}},{key:"handlePreRender_",value:function(t){var e=t.context,i=t.frameState.size;e.save(),e.beginPath();var n=[[0,0],[i[0],i[1]]];"horizontal"===this.direction_?n[1]=[i[0]*this.position_,i[1]]:n[1]=[i[0],i[1]*this.position_],this.drawRect_(t,n),e.clip()}},{key:"handlePostRender_",value:function(t){t.context.restore()}},{key:"drawRect_",value:function(t,e){var i=t.context,n=t.inversePixelTransform;n?[[e[0][0],e[0][1]],[e[0][0],e[1][1]],[e[1][0],e[1][1]],[e[1][0],e[0][1]],[e[0][0],e[0][1]]].forEach((function(t,e){t=[t[0]*n[0]-t[1]*n[1]+n[4],-t[0]*n[2]+t[1]*n[3]+n[5]],e?i.lineTo(t[0],t[1]):i.moveTo(t[0],t[1])})):i.rect(e[0][0],e[0][1],e[1][0],e[1][1])}},{key:"handleMouseDown_",value:function(t){this.mouseActive_=!0}},{key:"handleMouseUp_",value:function(t){this.mouseActive_=!1}},{key:"handleMouseLeave_",value:function(t){this.mouseActive_=!1}},{key:"handleMouseMove_",value:function(t){if(this.mouseActive_){if("horizontal"===this.direction_){var e=t.clientX-this.map_.getTargetElement().getBoundingClientRect().left;this.sliderElem_.style.left=e+"px";var i=this.map_.getSize()[0];this.position_=e/i}else{var n=t.clientY-this.map_.getTargetElement().getBoundingClientRect().top;this.sliderElem_.style.top=n+"px";var r=this.map_.getSize()[1];this.position_=n/r}this.map_.renderSync()}}}]),t}();return{Container:function(t){s(i,t);var e=a(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,i),n.element=n.element||document.createElement("div"),t=e.call(this,n);var r=n.position||"top-left",o=n.direction||"row";return t.element.className="oles-container oles-".concat(r," oles-").concat(o),t}return u(i,[{key:"appendChild",value:function(t){t.setTarget(this.element),this.getMap().addControl(t)}}]),i}(K),Box:function(t){s(i,t);var e=a(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,i),n.element=n.element||document.createElement("div"),(t=e.call(this,n)).element.className="oles-box",t}return u(i,[{key:"appendChild",value:function(t){t.setTarget(this.element),this.getMap().addControl(t)}}]),i}(K),Snapshot:function(t){s(i,t);var e=a(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,i),n.element=n.element||document.createElement("div"),t=e.call(this,n);var r=n.icon?"string"==typeof n.icon?t.createIcon_(n.icon):n.icon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTk3ODA3NTU0MjI3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMxNTU3IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTg3MC40IDgxOS4yVjIwNC44SDEwMi40djYxNC40aDc2OHogbTUxLjIgMGg3Ni44YTI1LjYgMjUuNiAwIDEgMSAwIDUxLjJIOTIxLjZ2MTI4YTI1LjYgMjUuNiAwIDEgMS01MS4yIDBWODcwLjRINzYuOGEyNS42IDI1LjYgMCAwIDEtMjUuNi0yNS42VjIwNC44SDI1LjZhMjUuNiAyNS42IDAgMCAxIDAtNTEuMkg1MS4yVjI1LjZhMjUuNiAyNS42IDAgMCAxIDUxLjIgMFYxNTMuNmg3OTMuNmEyNS40OTc2IDI1LjQ5NzYgMCAwIDEgMjUuNiAyNS42VjgxOS4yek0yNTQuOTc2IDM1Ni45NjY0YTY3Ljk0MjQgNjcuOTQyNCAwIDAgMSA2Ny45OTM2LTY3Ljk5MzZBNjcuOTkzNiA2Ny45OTM2IDAgMSAxIDI1NC45NzYgMzU2Ljk2NjR6IG01NDMuMDI3MiAzNjYuNTkyYTE3LjIwMzIgMTcuMjAzMiAwIDAgMS0yLjMwNCAxNy4xMDA4IDE4LjEyNDggMTguMTI0OCAwIDAgMS0xNS4zNiA3LjgzMzZIMjA1LjQxNDRhMTguNDgzMiAxOC40ODMyIDAgMCAxLTE2LjQ4NjQtOS40NzIgMTcuNzE1MiAxNy43MTUyIDAgMCAxIDAuNjE0NC0xOC42ODhsMTE2LjE3MjgtMTc3LjMwNTZhMTguNzkwNCAxOC43OTA0IDAgMCAxIDI0LjA2NC02LjYwNDhsMTk1LjU4NCA5NS4wMjcyYzguNTUwNCA0LjI0OTYgMTguOTQ0IDEuMzgyNCAyNC4xNjY0LTYuNjU2bDExNC4xNzYtMTc0LjM4NzJhMTguNjg4IDE4LjY4OCAwIDAgMSAxNy43NjY0LTguMzQ1NmM3LjA2NTYgMC41MTIgMTMuMTU4NCA1LjEyIDE1LjYxNiAxMS43NzZsMTAwLjk2NjQgMjY5LjcyMTZ6IiBwLWlkPSIzMTU1OCI+PC9wYXRoPjwvc3ZnPg=="),s=void 0!==n.label?n.label:"",a=document.createElement("div");return a.className="oles-button",a.title=s,a.appendChild(r),a.addEventListener(C,t.handleClick_.bind(o(t)),!1),t.element.className="ol-unselectable oles-control oles-snapshot",t.element.appendChild(a),t}return u(i,[{key:"createIcon_",value:function(t){var e=document.createElement("img");return e.src=t,e.className="oles-icon",e}},{key:"handleClick_",value:function(t){t.preventDefault(),this.mapToImage_()}},{key:"mapToImage_",value:function(){this.snapshotTool||(this.snapshotTool=new ut);var t=this.getMap().getTargetElement();this.snapshotTool.toImage(t).then((function(t){lt.saveAs(t,"MAP-".concat(Math.round(89999*Math.random()+1e4),".png"))}))}}]),i}(K),Measure:function(t){s(i,t);var e=a(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,i),n.element=n.element||document.createElement("div"),t=e.call(this,n);var r=n.direction||"row",o=n.areaIcon?"string"==typeof n.areaIcon?t.createIcon_(n.areaIcon):n.areaIcon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTk3MzEwNTM0OTc5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjcyMzMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNODczLjkxMDg1NyAzMzAuNTU2OTUyTDM1MS43NjgzODEgODQ4Ljg0NzIzOEgyNjIuMTQ0di0zNy4zNTE2MTlMODM2LjI2NjY2NyAyNDEuNTY2NDc2aDM3LjU0NjY2NnY4OC45OTA0NzZ6IG0tNTAuMDc4NDc2IDQzOC4zNjk1MjRhMzAuMzI5OTA1IDMwLjMyOTkwNSAwIDAgMC0zMC40Mjc0MjkgMzAuMjMyMzgxdjQ5LjczNzE0M2gtMTMyLjM4ODU3MWwyMTIuOTQzMjM4LTIxMS40ODAzODF2MTMxLjUxMDg1N2gtNTAuMTI3MjM4eiBtNTAuMDc4NDc2LTIxNy4wODhsLTI5MS44NCAyODkuNzQzMjM4YTMwLjUyNDk1MiAzMC41MjQ5NTIgMCAwIDAtNS40NjEzMzMgNy4yNjU1MjRINDM3Ljk3OTQyOWw0MzUuOTMxNDI4LTQzMi43NjE5MDV2MTM1Ljc1MzE0M3pNMTgxLjczNTYxOSA2NzguMjc4MDk1bDUyMC4yODk1MjQtNTE2LjU4MzYxOWg5MS4zMzEwNDd2MzcuMDU5MDQ4TDIxOC44NDM0MjkgNzY4Ljk3NTIzOGgtMzcuMzUxNjE5di05MC42OTcxNDNoMC4yNDM4MDl6IG01MC4wNzg0NzYtNDM2LjY2Mjg1N2EzMC4zMjk5MDUgMzAuMzI5OTA1IDAgMCAwIDMwLjM3ODY2Ny0zMC4yMzIzODF2LTQ5LjczNzE0M2gxMjguOTc1MjM4TDE4MS42MzgwOTUgMzY5Ljc2MTUyNFYyNDEuNTY2NDc2aDUwLjE3NnpNMTgxLjczNTYxOSA0NTQuMjE3MTQzYTMxLjk4NzgxIDMxLjk4NzgxIDAgMCAwIDUuMTItNC4wOTZsMjkwLjQ3NDY2Ny0yODguNDc1NDI5aDEzOC41ODEzMzNsLTQzNC4xNzYgNDMxLjA1NTIzOHYtMTM4LjQ4MzgwOXogbTgwMy4xMDg1NzEtMjEyLjYwMTkwNWEzMC4yODExNDMgMzAuMjgxMTQzIDAgMCAwIDMwLjUyNDk1My0zMC4yMzIzODFWNTEuMjk3NTI0QTMwLjI4MTE0MyAzMC4yODExNDMgMCAwIDAgOTg0Ljk5MDQ3NiAyMS4yMTE0MjloLTE2MS4xNTgwOTVhMzAuMzI5OTA1IDMwLjMyOTkwNSAwIDAgMC0zMC40Mjc0MjkgMzAuMTM0ODU3djQ5LjczNzE0M2gtOTguODg5MTQyYTMzLjEwOTMzMyAzMy4xMDkzMzMgMCAwIDAtOS4zMTM1MjQgMEgyNjIuMTQ0di00OS43MzcxNDNBMzAuMzI5OTA1IDMwLjMyOTkwNSAwIDAgMCAyMzEuNjE5MDQ4IDIxLjIxMTQyOUg3MC41NTg0NzZhMzAuMzI5OTA1IDMwLjMyOTkwNSAwIDAgMC0zMC40Mjc0MjggMzAuMTM0ODU3djE1OS45MzkwNDdjMC4wOTc1MjQgMTYuNjc2NTcxIDEzLjc1MDg1NyAzMC4yMzIzODEgMzAuNDI3NDI4IDMwLjA4NjA5Nmg1MC4xMjcyMzh2NTI3LjQ1NzUyM0g3MC41NTg0NzZhMzAuMzI5OTA1IDMwLjMyOTkwNSAwIDAgMC0zMC40Mjc0MjggMzAuMTM0ODU4djE1OS45MzkwNDdjMC4wOTc1MjQgMTYuNjc2NTcxIDEzLjc1MDg1NyAzMC4yMzIzODEgMzAuNDI3NDI4IDMwLjEzNDg1N0gyMzEuNjE5MDQ4YTMwLjIzMjM4MSAzMC4yMzIzODEgMCAwIDAgMzAuNDI3NDI4LTMwLjIzMjM4MXYtNDkuNjg4MzgxaDUzMS4yMTIxOTF2NDkuNzM3MTQzYTMwLjIzMjM4MSAzMC4yMzIzODEgMCAwIDAgMzAuNDI3NDI4IDMwLjE4MzYxOWgxNjEuMTA5MzM0YTMwLjIzMjM4MSAzMC4yMzIzODEgMCAwIDAgMzAuNDI3NDI4LTMwLjIzMjM4MVY3OTkuMjA3NjE5YTMwLjI4MTE0MyAzMC4yODExNDMgMCAwIDAtMzAuNDI3NDI4LTMwLjIzMjM4MUg5MzQuNzY1NzE0VjM0NC41MDI4NTdhMTYuMTg4OTUyIDE2LjE4ODk1MiAwIDAgMCAwLTMuMDcyVjI0MS41NjY0NzZoNTAuMTc2LTAuMDQ4NzYyek01NDAuNDc2OTUyIDE2LjE0MDE5TDUzNi4zODA5NTIgMTMuNzUwODU3YzguMzg3MDQ4IDExLjU1NjU3MSA4LjM4NzA0OCA2LjE5Mjc2MiAzLjk5ODQ3NyAyLjUzNTYxOVYxNi4xODg5NTJ6IiBwLWlkPSI3MjM0Ij48L3BhdGg+PC9zdmc+"),s=void 0!==n.areaLabel?n.areaLabel:"",a=n.lengthIcon?"string"==typeof n.lengthIcon?t.createIcon_(n.lengthIcon):n.lengthIcon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTk3MzEwNTIyNzg4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjcxMDMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNzI3LjAwNTM3OSAyNTkuMjE4Mjg2YTQwLjE3OTgxIDQwLjE3OTgxIDAgMSAxLTU2LjgwNzYxOSA1Ni44NTYzODFMNTc1LjU1MDkwMyAyMjEuMzc5MDQ4YTQwLjE3OTgxIDQwLjE3OTgxIDAgMSAxIDU2Ljg1NjM4MS01Ni44NTYzODFsOTQuNTk4MDk1IDk0LjU5ODA5NXogbS0yOC4xODQzODEgMjM5LjEyODM4MWE0MC4xNzk4MSA0MC4xNzk4MSAwIDEgMS01Ni44NTYzODEgNTYuODU2MzgxTDQ0MS44NDU3NiAzNTUuMDg0MTlhNDAuMTc5ODEgNDAuMTc5ODEgMCAxIDEgNTYuODU2MzgxLTU2Ljg1NjM4bDIwMC4xMTg4NTcgMjAwLjExODg1N3ogbS0yMzkuMTI4MzgxIDI4LjIzMzE0M2E0MC4xNzk4MSA0MC4xNzk4MSAwIDEgMS01Ni44NTYzODEgNTYuODU2MzhMMzA4LjE0MDYxNyA0ODguNzg5MzMzYTQwLjE3OTgxIDQwLjE3OTgxIDAgMCAxIDU2LjgwNzYxOS01Ni44NTYzODFsOTQuNjk1NjE5IDk0LjU5ODA5NnogbS0yOC4yODE5MDUgMjM5LjE3NzE0MmE0MC4xNzk4MSA0MC4xNzk4MSAwIDEgMS01Ni44MDc2MTkgNTYuODU2MzgxbC0yMDAuMTE4ODU3LTIwMC4xNjc2MTlBNDAuMTMxMDQ4IDQwLjEzMTA0OCAwIDEgMSAyMzEuMjkxODU1IDU2NS42MzgwOTVsMjAwLjE2NzYxOSAyMDAuMTE4ODU3ek02MTIuMDczNTcgMjguNTc0NDc2TDM5LjQ2MjUyMiA2MDEuMDM5MjM4YTUxLjM5NTA0OCA1MS4zOTUwNDggMCAwIDAgMCA3Mi42NTUyMzhsMzAwLjAzMiAzMDAuMDMyYTUxLjM0NjI4NiA1MS4zNDYyODYgMCAwIDAgNzIuNjA2NDc2IDBMOTg0LjY2MzI4NCA0MDEuMjEyOTUyYTUxLjM5NTA0OCA1MS4zOTUwNDggMCAwIDAgMC03Mi42NTUyMzhMNjg0LjU4MjUyMiAyOC41NzQ0NzZhNTEuMzQ2Mjg2IDUxLjM0NjI4NiAwIDAgMC03Mi42NTUyMzggMHoiIHAtaWQ9IjcxMDQiPjwvcGF0aD48L3N2Zz4="),l=void 0!==n.lengthLabel?n.lengthLabel:"",u="ol-unselectable oles-control oles-flex oles-".concat(r," oles-measure");t.element.className=u,t.createButton_(o,s,t.element,"area");var c=document.createElement("div");return c.className="oles-divider-"+(r.indexOf("row")>-1?"vertical":"horizontal"),t.element.appendChild(c),t.createButton_(a,l,t.element,"length"),t}return u(i,[{key:"createButton_",value:function(t,e,i,n){var r=document.createElement("div");r.className="oles-button",r.title=e,r.appendChild(t),r.addEventListener(C,this.handleClick_.bind(this,n),!1),i.appendChild(r)}},{key:"createIcon_",value:function(t){var e=document.createElement("img");return e.src=t,e.className="oles-icon",e}},{key:"handleClick_",value:function(t,e){e.preventDefault(),this.measure_(t)}},{key:"measure_",value:function(t){var e=this.getMap();this.measureTool||(this.measureTool=new ia(e)),this.measureTool.getActive()&&this.measureTool.getMode()===t?this.measureTool.stop():this.measureTool.excute(t)}}]),i}(K),FullScreen:function(t){s(i,t);var e=a(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,i),n.element=n.element||document.createElement("div"),t=e.call(this,n);var r=n.icon?"string"==typeof n.icon?t.createIcon_(n.icon):n.icon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE3MjYxMDEyMzcxIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM3NDQiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMCA5MjEuNTkxMTVWMTAyLjM5NDQwMUMwIDQ1LjgzODE1NyA0NS44NTA4IDAgMTAyLjQwNTIzOCAwaDgxOS4xOTY3NDljNTYuNTU2MjQ0IDAgMTAyLjM5NDQwMSA0NS44MzgxNTcgMTAyLjM5NDQwMSAxMDIuMzk0NDAxdjgxOS4xOTg1NTVjMCA1Ni41NTYyNDQtNDUuODM4MTU3IDEwMi40MDcwNDQtMTAyLjM5NDQwMSAxMDIuNDA3MDQ0SDEwMi40MDUyMzhDNDUuODUwOCAxMDIzLjk5ODE5NCAwIDk3OC4xNDczOTQgMCA5MjEuNTkxMTV6TTkyMS42MDE5ODcgNzYuNzk2NzA0SDEwMi40MDUyMzhjLTE4LjEwOTEyNCAwLTI1LjYxMDM0MSA3LjQ5OTQxLTI1LjYxMDM0MSAyNS41OTc2OTd2ODE5LjE5ODU1NWMwIDE4LjEwOTEyNCA3LjUwMTIxNiAyNS42MTAzNDEgMjUuNjEwMzQxIDI1LjYxMDM0aDg0NC43OTYyNTJWMTAyLjM5NDQwMWMwLTE4LjA5ODI4Ny03LjQ5OTQxLTI1LjU5NzY5Ny0yNS41OTk1MDMtMjUuNTk3Njk3eiIgZmlsbD0iIzIzMTgxNSIgcC1pZD0iMzc0NSI+PC9wYXRoPjxwYXRoIGQ9Ik0xNTMuNjAyNDM4IDIwNC43OTk2Mzl2MTI3Ljk5MzkwNGMwIDIxLjIxNTgxNiAxNy4xODc5NTQgMzguNDAxOTY0IDM4LjQwMzc3MSAzOC40MDE5NjQgMjEuMjA0OTc5IDAgMzguMzkyOTMzLTE3LjE4Nzk1NCAzOC4zOTI5MzMtMzguNDAxOTY0di0xMDIuMzk0NDAxaDEwMi40MDM0MzJjMjEuMjA0OTc5IDAgMzguNDAzNzctMTcuMTk2OTg1IDM4LjQwMzc3LTM4LjQwMzc3cy0xNy4xOTg3OTEtMzguMzkyOTMzLTM4LjQwMzc3LTM4LjM5MjkzNGgtMTI4LjAwMjkzNWMtMjguMjc4MTIyIDAtNTEuMTk3MiAyMi45MTkwNzgtNTEuMTk3MjAxIDUxLjE5NzIwMXpNODcwLjM5NTc1NSAyMDQuNzk5NjM5djEyNy45OTM5MDRjMCAyMS4yMTU4MTYtMTcuMTg3OTU0IDM4LjQwMTk2NC0zOC4zOTI5MzMgMzguNDAxOTY0cy0zOC40MDM3Ny0xNy4xODc5NTQtMzguNDAzNzctMzguNDAxOTY0di0xMDIuMzk0NDAxaC0xMDIuMzkyNTk1Yy0yMS4yMTU4MTYgMC0zOC40MDM3Ny0xNy4xOTY5ODUtMzguNDAzNzctMzguNDAzNzdzMTcuMTg3OTU0LTM4LjM5MjkzMyAzOC40MDM3Ny0zOC4zOTI5MzRoMTI3Ljk5MjA5OGMyOC4yNzgxMjIgMCA1MS4xOTcyIDIyLjkxOTA3OCA1MS4xOTcyIDUxLjE5NzIwMXpNMTUzLjYwMjQzOCA4MTkuMTk4NTU1di0xMjguMDA2NTQ4YzAtMjEuMjAzMTczIDE3LjE4Nzk1NC0zOC40MDE5NjQgMzguNDAzNzcxLTM4LjQwMTk2NCAyMS4yMDQ5NzkgMCAzOC4zOTI5MzMgMTcuMTk4NzkxIDM4LjM5MjkzMyAzOC40MDE5NjR2MTAyLjQwNzA0NWgxMDIuNDAzNDMyYzIxLjIwNDk3OSAwIDM4LjQwMzc3IDE3LjE4Nzk1NCAzOC40MDM3NyAzOC4zOTI5MzMgMCAyMS4yMTU4MTYtMTcuMTk4NzkxIDM4LjQwMzc3LTM4LjQwMzc3IDM4LjQwMzc3aC0xMjguMDAyOTM1Yy0yOC4yNzgxMjIgMC01MS4xOTcyLTIyLjkyMDg4NS01MS4xOTcyMDEtNTEuMTk3MnpNODE5LjE5Njc0OSA4NzAuMzk1NzU1aC0xMjcuOTkyMDk4Yy0yMS4yMTU4MTYgMC0zOC40MDM3Ny0xNy4xODc5NTQtMzguNDAzNzctMzguNDAzNzcgMC0yMS4yMDQ5NzkgMTcuMTg3OTU0LTM4LjM5MjkzMyAzOC40MDM3Ny0zOC4zOTI5MzNoMTAyLjM5MjU5NXYtMTAyLjQwNzA0NWMwLTIxLjIwMzE3MyAxNy4xOTY5ODUtMzguNDAxOTY0IDM4LjQwMzc3LTM4LjQwMTk2NHMzOC4zOTI5MzMgMTcuMTk4NzkxIDM4LjM5MjkzMyAzOC40MDE5NjR2MTI4LjAwNjU0OGMwLjAwMTgwNiAyOC4yNzYzMTYtMjIuOTE3MjcyIDUxLjE5NzItNTEuMTk3MiA1MS4xOTcyeiIgcC1pZD0iMzc0NiI+PC9wYXRoPjwvc3ZnPg=="),s=void 0!==n.label?n.label:"",a=document.createElement("div");return a.className="oles-button",a.title=s,a.appendChild(r),a.addEventListener(C,t.handleClick_.bind(o(t)),!1),t.element.className="ol-unselectable oles-control oles-full-screen",t.element.appendChild(a),t}return u(i,[{key:"createIcon_",value:function(t){var e=document.createElement("img");return e.src=t,e.className="oles-icon",e}},{key:"handleClick_",value:function(t){t.preventDefault(),this.fullScreen_()}},{key:"fullScreen_",value:function(){this.fullScreenTool||(this.fullScreenTool=new na),this.fullScreenTool.getActive()?this.fullScreenTool.exit():this.fullScreenTool.entry()}}]),i}(K),Filter:function(t){s(i,t);var e=a(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,i),n.element=n.element||document.createElement("div"),(t=e.call(this,n)).layers_=n.layers;var r=n.icon?"string"==typeof n.icon?t.createIcon_(n.icon):n.icon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE3MDk1NDA1ODAyIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwODQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMwMjUiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjExLjcxODc1IiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMzAzLjE5MzkyIDM2Mi41ODU5MDRhMzMwLjU3MDkxMyAzMzAuNTcwOTEzIDAgMCAxIDI3OC4zMTY5MjcgMTEyLjk3MTk3MSA0NS4xNzU5ODggNDUuMTc1OTg4IDAgMSAxLTY4LjIxNTk4MiA1OS4yMzk5ODQgMjQwLjk0MDkzNiAyNDAuOTQwOTM2IDAgMSAwLTMyLjQ5Njk5MiAzNDYuODY1OTA5IDMyOS43ODc5MTMgMzI5Ljc4NzkxMyAwIDAgMS01OS4xNTA5ODQtMTg4Ljk1Nzk1MWMwLTI3LjA0NTk5MyAzLjI1Mjk5OS01My42OTk5ODYgOS42Mzc5OTctNzkuNTA5OTc5YTQ1LjE3NTk4OCA0NS4xNzU5ODggMCAwIDEgODcuNzAxOTc3IDIxLjYyMzk5NSAyNDAuOTQwOTM2IDI0MC45NDA5MzYgMCAxIDAgNDc0Ljg5NDg3NSA1Ny44ODU5ODQgMjQxLjE1MTkzNiAyNDEuMTUxOTM2IDAgMCAwLTE1MC41Mjc5Ni0yMjMuNDQyOTQxQTMzMS41MDQ5MTMgMzMxLjUwNDkxMyAwIDAgMSA2NDcuNjc5ODI5IDY0NS4zODk4M2E0NS4xNzU5ODggNDUuMTc1OTg4IDAgMCAxLTI4Ljc2Mjk5Mi04NS42MjQ5NzhBMjQxLjA2MTkzNiAyNDEuMDYxOTM2IDAgMCAwIDc4My4wNTk3OTQgMzMxLjI5MzkxM2EyNDAuOTQwOTM2IDI0MC45NDA5MzYgMCAxIDAtNDc5Ljg2NDg3NCAzMS4yOTE5OTF6IG0tODguNDI0OTc3IDE5Ljg3Nzk5NWEzMzMuNDkyOTEyIDMzMy40OTI5MTIgMCAwIDEtMy45NDU5OTktNTEuMTY5OTg2QzIxMC44MjI5NDQgMTQ4LjMyODk2MSAzNTkuMTUyOTA1IDAgNTQyLjExNjg1NyAwczMzMS4yOTQ5MTMgMTQ4LjMyOTk2MSAzMzEuMjk0OTEzIDMzMS4yOTM5MTNjMCAxNy4zNDc5OTUtMS4zNTYgMzQuNDU0OTkxLTMuOTQ1OTk5IDUxLjE5OTk4NmEzMzEuNDc0OTEzIDMzMS40NzQ5MTMgMCAwIDEgMjE0Ljc2ODk0MyAzMTAuMjExOTE4YzAgMTgyLjk2Mzk1Mi0xNDguMzI5OTYxIDMzMS4yOTM5MTMtMzMxLjI5MzkxMyAzMzEuMjkzOTEzLTgwLjExMjk3OSAwLTE1My41Mzk5Ni0yOC40MzA5OTMtMjEwLjgyMzk0NC03NS43MTU5OEEzMzAuMjA5OTEzIDMzMC4yMDk5MTMgMCAwIDEgMzMxLjI5MzkxMyAxMDIzLjk5OTczQzE0OC4zMjg5NjEgMTAyMy45OTk3MyAwIDg3NS42Njk3NjkgMCA2OTIuNzA1ODE3IDAgNTUwLjc1OTg1NSA4OS4yOTg5NzYgNDI5LjY1Nzg4NyAyMTQuNzM4OTQzIDM4Mi40OTM4OTl6IiBwLWlkPSIzMDI2Ij48L3BhdGg+PC9zdmc+"),s=void 0!==n.label?n.label:"",a=document.createElement("div");return a.className="oles-button",a.title=s,a.appendChild(r),a.addEventListener(C,t.handleClick_.bind(o(t)),!1),t.element.className="ol-unselectable oles-control oles-filter",t.element.appendChild(a),t}return u(i,[{key:"createIcon_",value:function(t){var e=document.createElement("img");return e.src=t,e.className="oles-icon",e}},{key:"handleClick_",value:function(t){t.preventDefault(),this.mapFilter_()}},{key:"mapFilter_",value:function(){if(!this.filterTool){var t=this.layers_||this.getMap().getLayers().getArray();this.filterTool=new oa({layers:t})}this.filterTool.getActive()?this.filterTool.reset():this.filterTool.render()}}]),i}(K),Swipe:function(t){s(i,t);var e=a(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,i),n.element=n.element||document.createElement("div"),(t=e.call(this,n)).layers_=n.layers||[];var r=n.direction||"row",o=n.horizontalIcon?"string"==typeof n.horizontalIcon?t.createIcon_(n.horizontalIcon):n.horizontalIcon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE3MDk0ODIwMzAwIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjY5MjAiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNDguNzYxOTA1IDE0Ni4yODU3MTRoOTI2LjQ3NjE5djczMS40Mjg1NzJINDguNzYxOTA1VjE0Ni4yODU3MTR6IG00NjAuOCA5MS40Mjg1NzJ2NTQ4LjU3MTQyOGgzNzMuMDI4NTcxVjIzNy43MTQyODZINTA5LjU2MTkwNXoiIHAtaWQ9IjY5MjEiPjwvcGF0aD48cGF0aCBkPSJNNDM4Ljg1NzE0MyAwaDk3LjUyMzgwOXYxMDI0SDQzOC44NTcxNDN6IiBwLWlkPSI2OTIyIj48L3BhdGg+PC9zdmc+"),s=void 0!==n.horizontalLabel?n.horizontalLabel:"",a=n.verticalIcon?"string"==typeof n.verticalIcon?t.createIcon_(n.verticalIcon):n.verticalIcon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE3MDk0OTE0MDA2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI5OTUiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMTQ2LjI4NiA5NzUuMjM4bDAtOTI2LjQ3NiA3MzEuNDI4IDBMODc3LjcxNCA5NzUuMjM4IDE0Ni4yODYgOTc1LjIzOHogbTkxLjQyOC00NjAuOGw1NDguNTcyIDBMNzg2LjI4NTk5OTk5IDE0MS40MSAyMzcuNzE0MDAwMDEgMTQxLjQxIDIzNy43MTQgNTE0LjQzOHoiIHAtaWQ9IjI5OTYiPjwvcGF0aD48cGF0aCBkPSJNMCA1ODUuMTQzbDAtOTcuNTI0IDEwMjQgMCAwIDk3LjUyNHoiIHAtaWQ9IjI5OTciPjwvcGF0aD48L3N2Zz4="),l=void 0!==n.verticalLabel?n.verticalLabel:"",u="ol-unselectable oles-control oles-flex oles-".concat(r," oles-swipe");t.element.className=u,t.createButton_(o,s,t.element,"horizontal");var c=document.createElement("div");return c.className="oles-divider-"+(r.indexOf("row")>-1?"vertical":"horizontal"),t.element.appendChild(c),t.createButton_(a,l,t.element,"vertical"),t}return u(i,[{key:"createButton_",value:function(t,e,i,n){var r=document.createElement("div");r.className="oles-button",r.title=e,r.appendChild(t),r.addEventListener(C,this.handleClick_.bind(this,n),!1),i.appendChild(r)}},{key:"createIcon_",value:function(t){var e=document.createElement("img");return e.src=t,e.className="oles-icon",e}},{key:"handleClick_",value:function(t,e){e.preventDefault(),this.swipe_(t)}},{key:"swipe_",value:function(t){var e=this.getMap();this.swipeTool||(this.swipeTool=new sa(e,{layers:this.layers_,direction:t}));var i=this.swipeTool.getDirection();i!==t&&this.swipeTool.setDirection(t),this.swipeTool.getActive()?i===t&&this.swipeTool.reset():this.swipeTool.render()}}]),i}(K),Zoom:function(t){s(i,t);var e=a(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,i),n.element=n.element||document.createElement("div"),(t=e.call(this,n)).layers_=n.layers||[];var r=n.direction||"column",o=n.zoomInIcon?"string"==typeof n.zoomInIcon?t.createIcon_(n.zoomInIcon):n.zoomInIcon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE3MjYwNjA1MDQzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEwMDk1IiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTQ5MC4zODIyMjIgODk1LjM3NDIyMmMyMjEuOTgwNDQ0IDAgNDAzLjE3MTU1Ni0xODEuMTM0MjIyIDQwNC45OTItNDA0LjY1MDY2NkE0MDQuODIxMzMzIDQwNC44MjEzMzMgMCAwIDAgNDkwLjM4MjIyMiA4NS41MDQgNDA0Ljc2NDQ0NCA0MDQuNzY0NDQ0IDAgMCAwIDg1LjUwNCA0OTAuMzgyMjIyYTQwNC43NjQ0NDQgNDA0Ljc2NDQ0NCAwIDAgMCA0MDQuOTM1MTExIDQwNC45MzUxMTF6TTQ2Mi40NDk3NzggNDQ3LjE0NjY2N0gyNzcuMzkwMjIyYTQyLjcyMzU1NiA0Mi43MjM1NTYgMCAwIDAgMCA4NS41MDRoMTg1LjAwMjY2N3YxODUuMDAyNjY2YTQyLjcyMzU1NiA0Mi43MjM1NTYgMCAxIDAgODUuNDQ3MTExIDBWNTMyLjcwNzU1NmgxODUuMDAyNjY3YTQyLjcyMzU1NiA0Mi43MjM1NTYgMCAwIDAgMC04NS41MDRINTQ3Ljg0VjI2Mi4yNTc3NzhhNDIuNzIzNTU2IDQyLjcyMzU1NiAwIDEgMC04NS40NDcxMTEgMFY0NDcuMTQ2NjY3eiBtMjguMDQ2MjIyIDUzMy42MTc3NzdBNDkwLjIxMTU1NiA0OTAuMjExNTU2IDAgMCAxIDAgNDkwLjQzOTExMSA0OTAuMjExNTU2IDQ5MC4yMTE1NTYgMCAwIDEgNDkwLjM4MjIyMiAwYzI3MS4wNzU1NTYgMCA0OTAuNDM5MTExIDIxOS40NzczMzMgNDkwLjQzOTExMSA0OTEuMDY0ODg5LTIuMTA0ODg5IDI3MC42NzczMzMtMjIxLjM1NDY2NyA0ODkuODEzMzMzLTQ5MC4zODIyMjIgNDg5LjgxMzMzM3oiIHAtaWQ9IjEwMDk2Ij48L3BhdGg+PC9zdmc+"),s=void 0!==n.zoomInLabel?n.zoomInLabel:"",a=n.zoomOutIcon?"string"==typeof n.zoomOutIcon?t.createIcon_(n.zoomOutIcon):n.zoomOutIcon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE3MjYwNTgxNjc5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9Ijg2NDgiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNDk0LjA4IDM4LjRDMjMyLjkzNjk2IDM4LjQgMjAuNDggMjUwLjg1Njk2IDIwLjQ4IDUxMnMyMTIuNDU2OTYgNDczLjYgNDczLjYgNDczLjYgNDczLjYtMjEyLjQ1Njk2IDQ3My42LTQ3My42Uzc1NS4yMjMwNCAzOC40IDQ5NC4wOCAzOC40eiBtMCA4NTUuMjM5NjhjLTIxMC40MzQ1NiAwLTM4MS42Mzk2OC0xNzEuMjAyNTYtMzgxLjYzOTY4LTM4MS42Mzk2OFMyODMuNjQ1NDQgMTMwLjM2MDMyIDQ5NC4wOCAxMzAuMzYwMzIgODc1LjcxOTY4IDMwMS41NjU0NCA4NzUuNzE5NjggNTEyIDcwNC41MTQ1NiA4OTMuNjM5NjggNDk0LjA4IDg5My42Mzk2OHoiIHAtaWQ9Ijg2NDkiPjwvcGF0aD48cGF0aCBkPSJNNjQwIDQ2MC44SDM0NS42Yy0yOC4yNzc3NiAwLTUxLjIgMjIuOTIyMjQtNTEuMiA1MS4yczIyLjkyMjI0IDUxLjIgNTEuMiA1MS4yaDI5NC40YzI4LjI3Nzc2IDAgNTEuMi0yMi45MjIyNCA1MS4yLTUxLjJzLTIyLjkyMjI0LTUxLjItNTEuMi01MS4yeiIgcC1pZD0iODY1MCI+PC9wYXRoPjwvc3ZnPg=="),l=void 0!==n.zoomOutLabel?n.zoomOutLabel:"",u="ol-unselectable oles-control oles-flex oles-".concat(r," oles-zoom");t.element.className=u,t.createButton_(o,s,t.element,1);var c=document.createElement("div");return c.className="oles-divider-"+(r.indexOf("row")>-1?"vertical":"horizontal"),t.element.appendChild(c),t.createButton_(a,l,t.element,-1),t}return u(i,[{key:"createButton_",value:function(t,e,i,n){var r=document.createElement("div");r.className="oles-button",r.title=e,r.appendChild(t),r.addEventListener(C,this.handleClick_.bind(this,n),!1),i.appendChild(r)}},{key:"createIcon_",value:function(t){var e=document.createElement("img");return e.src=t,e.className="oles-icon",e}},{key:"handleClick_",value:function(t,e){e.preventDefault(),this.zoomToMap_(t)}},{key:"zoomToMap_",value:function(t){var e=this.getMap().getView();if(e){var i=e.getZoom();e.getMinZoom()<i<e.getMaxZoom()&&e.animate({zoom:i+t,duration:500})}}}]),i}(K),FullExtent:function(t){s(i,t);var e=a(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,i),n.element=n.element||document.createElement("div"),(t=e.call(this,n)).extent_=n.extent;var r=n.icon?"string"==typeof n.icon?t.createIcon_(n.icon):n.icon:t.createIcon_("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjE3MjYwNTI5NTkyIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjczOTYiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTExLjk5OTQ4OCA2NC4zMDM1MzhjLTI0Ny4yNTYzNiAwLTQ0Ny42OTY0NjIgMjAwLjQyOTg2OS00NDcuNjk2NDYyIDQ0Ny42OTY0NjIgMCAyNDcuMjU1MzM3IDIwMC40NDAxMDIgNDQ3LjY5NjQ2MiA0NDcuNjk2NDYyIDQ0Ny42OTY0NjIgMjQ3LjI0NTEwNCAwIDQ0Ny42OTY0NjItMjAwLjQ0MTEyNSA0NDcuNjk2NDYyLTQ0Ny42OTY0NjJDOTU5LjY5NTk1IDI2NC43MzM0MDcgNzU5LjI0NDU5MiA2NC4zMDM1MzggNTExLjk5OTQ4OCA2NC4zMDM1Mzh6TTcwMC4xMTA3OTcgODcyLjQ2ODgxOGMwIDAtMTcuODYwNzg2LTExLjU1OTI2Ny0xMC41MDYyODUtNTkuOTA0MzQ1IDAgMC00OS4zODg4NS0xNS43NjMwMDktOTAuMzc3MzgtNDguMzQ0MDU1IDAgMC0zMC40NzQwNTktNDQuMTQxMzM2IDEuMDUyOTgyLTc4LjgxOTEzNyAwIDAtMTkuOTc4MDA3LTUwLjQ2MjI5OS0xMTQuNTUwOTQyLTY3LjI2OTA4IDAgMC01OS45MDQzNDUtNi4zMDA0OTYtNzkuODgyMzUyLTUuMjQ3NTE0IDAgMC0zNS43MjE1NzMtMzkuNjkzMDI0LTQwLjk4OTU1My04Mi4zNzUxMjYgMCAwLTMzLjYyNDgxOC0zMy4yMTg1NjYtODkuMzI0Mzk4LTQ4Ljk5MjgzMSAwIDAtNzYuNzExMTI2LTI2LjI1OTA2LTI4LjM2NzA3MS0xMjguMjA2OTY0IDAgMCA1OC44NTAzMzktMTA3LjE5NTQxOC01LjI1Nzc0Ny0xMTQuNTQ5OTE5IDAgMC0zMS41MzcyNzQgMTcuODYwNzg2LTQzLjA4NjMwNyAxNy44NjA3ODYgMCAwLTE2LjY0NTA5OS00LjY2MTE2LTEzLjY2NjI1NC0xMS41NTkyNjcgMCAwIDM4Ljg5Mjc5OS0xMDQuMDQ1NjgxIDEyOC4yMTcxOTctNzEuNDY0NjM1IDAgMCAzNy44Mjg1NiAxNi44MTgwMzcgNDQuMTQwMzEzIDQ2LjIzODA5MSAwIDAgMjAuNzY3OTk5IDE4LjkxNDc5MiA4OC42NzU2MjItMjcuMzIyMjc1IDAgMCA3Mi4xMDExMzEgNy4zNTU1MjUgMjAuNjE2NTUgNDQuMTQwMzEzLTUxLjQ5NTgzOCAzNi43ODU4MTEtNjMuMDU1MTA1IDQzLjA3NzA5OC0yLjA5Njc1NCA2MC45NTczMjcgMCAwIDc0LjYxNDM3MSAyMy4xMDkzMjQgNTcuODA3NTktNjUuMTYyMDkyIDAgMCA2My4wNTUxMDUtNTguODUxMzYzIDIyNS45NDA4OTIgMTQzLjk4MTIyOSAwIDAgMjIuNzk0MTQ2IDcuNTQ2ODgzLTEyNC4wMTM0NTUgMTcuODU5NzYzLTExOS44MDg2OSA4LjQwOTUzLTM3LjgyODU2IDEyOS4yNjA5NjkgMTguOTI1MDI1IDE1NS41NDA0OTYgMCAwLTE3Ljg3MTAxOSAzNC42Nzg4MjQtNzguODI4MzQ2IDAgMCAwLTMxLjUyOTA4Ny0yMy4xMTg1MzQtMjUuMjE3MzM1LTUzLjU5MjU5MiAwIDAtNDUuNDM2ODQyLTM3LjgyODU2LTkzLjEzMzE0NCAxLjA1NDAwNSAwIDAtNDcuNjk2MzAyIDkxLjQyMTE1MiA3Mi4xMTEzNjQgNTUuNjg5MzQ3IDAgMCAxNy44NzIwNDMgMTM5Ljc2NjIzIDE5OS42ODE4MzIgMzYuNzg1ODExIDAgMCAxNy44NzEwMTktMjMuMDg4ODU4IDE2Ni4wNDY3OCAzNy44NDgwMDMgMCAwIDEzLjY0NTc4OCA2My4wMzU2NjItMzcuODM5ODE3IDEzOS43NTcwMjFDODQ2LjE4ODc4IDc2Ny4zNzExNzggNzg0LjE4NzY4MSA4NjIuOTk2MDczIDcwMC4xMTA3OTcgODcyLjQ2ODgxOHoiIHAtaWQ9IjczOTciPjwvcGF0aD48L3N2Zz4="),s=void 0!==n.label?n.label:"",a=document.createElement("div");return a.className="oles-button",a.title=s,a.appendChild(r),a.addEventListener(C,t.handleClick_.bind(o(t)),!1),t.element.className="ol-unselectable oles-control oles-full-extent",t.element.appendChild(a),t}return u(i,[{key:"createIcon_",value:function(t){var e=document.createElement("img");return e.src=t,e.className="oles-icon",e}},{key:"handleClick_",value:function(t){t.preventDefault(),this.fullExtent_()}},{key:"fullExtent_",value:function(){var t=this.getMap().getView(),e=this.extent_?this.extent_:t.getProjection().getExtent();t.fit(e,{duration:500})}}]),i}(K)}}))},496:function(t,e,i){"use strict";i(392)},506:function(t,e,i){"use strict";i.r(e);i(94),i(95),i(435),i(436);var n=i(501),r=i(399),o=i(502),s=i(437),a=i.n(s),l=i(444),h={data:function(){return{}},mounted:function(){this.initMap()},methods:{initMap:function(){var t=new o.a({source:new a.a({token:"5d4236a2a06043cd0b0880bbf270c958",layer:"vec",matrixSet:"w",crossOrigin:"anonymous"})}),e=new o.a({source:new a.a({token:"5d4236a2a06043cd0b0880bbf270c958",layer:"cva",matrixSet:"w",crossOrigin:"anonymous"})}),i=new n.a({target:"map",view:new r.a({center:[0,0],zoom:0}),layers:[t,e]}),s={instance:new l.Box,children:[{instance:new l.Container({position:"top-right"}),children:[{instance:new l.Swipe({layers:[e]})},{instance:new l.Measure}]},{instance:new l.Container({position:"bottom-right",direction:"column-reverse"}),children:[{instance:new l.Snapshot},{instance:new l.Filter},{instance:new l.FullScreen},{instance:new l.FullExtent},{instance:new l.Zoom}]}]};i.addControl(s.instance),function t(e){var i=e.instance,n=e.children;n&&n.length>0&&n.forEach((function(e){i.appendChild(e.instance),t(e)}))}(s)}}},u=(i(496),i(24)),c=Object(u.a)(h,(function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"map"}})}),[],!1,null,null,null);e.default=c.exports}}]);